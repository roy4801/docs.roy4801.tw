{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"About","text":"<p>This is a place that I store some tutorial</p>"},{"location":"cheatsheets/","title":"Cheatsheets","text":"<p>strftime</p> <p>tmux</p> <p></p>"},{"location":"Backend/elastic/","title":"Elasticsearch","text":""},{"location":"Backend/elastic/#terms","title":"Terms","text":"<p>ES \u662f schemaless \u7684\uff0c\u8cc7\u6599\u683c\u5f0f\u53ef\u4ee5\u96a8\u610f\u5b9a\uff0c\u975e\u5e38\u9069\u5408\u7528\u4f86\u505a\u5168\u6587\u6aa2\u7d22 or \u67e5\u8a62\u8207\u8cc7\u6599\u7684\u76f8\u95dc\u6027</p> <ul> <li>cluster<ul> <li>a es cluster is composed of one or multiple nodes</li> </ul> </li> <li>document<ul> <li>The smallest data unit in ES<ul> <li>Searchable</li> <li>Stored in JSON</li> <li>Each document has its own Unique ID</li> </ul> </li> </ul> </li> <li> <p>document metadata</p> <ul> <li>describe itself</li> <li><code>_index</code>: the name of the index to which this document belongs</li> <li><code>_type</code>: <code>_doc</code></li> <li><code>_id</code>: ID</li> <li><code>_source</code>: data</li> <li><code>_version</code></li> <li><code>_score</code> correlation</li> </ul> </li> <li> <p>index</p> <ul> <li>collection of documents</li> <li>data: document + metadata</li> <li>mapping: name, type</li> <li>setting: how to store (replication, shard)</li> </ul> </li> <li> <p>type</p> <ul> <li>collection of documents</li> <li>divides documents into types</li> <li>==will be removed in the future==</li> </ul> </li> <li>shard<ul> <li>data in indices will be stored in shards</li> </ul> </li> <li>index template</li> <li>mapping type</li> </ul>"},{"location":"Backend/elastic/#api","title":"API","text":""},{"location":"Backend/elastic/#add-a-single-document","title":"Add a single document","text":"<pre><code>POST logs-my_app-default/_doc\n{\n  \"@timestamp\": \"2099-05-06T16:21:15.000Z\",\n  \"event\": {\n    \"original\": \"192.0.2.42 - - [06/May/2099:16:21:15 +0000] \\\"GET /images/bg.jpg HTTP/1.0\\\" 200 24736\"\n  }\n}\n</code></pre> <pre><code>{\n    \"_index\": \".ds-logs-my_app-default-2021.06.28-000001\",\n    \"_type\": \"_doc\",\n    \"_id\": \"sbjVW3oBJ-UWGrIG-3f5\",\n    \"_version\": 1,\n    \"result\": \"created\",\n    \"_shards\": {\n        \"total\": 2,\n        \"successful\": 1,\n        \"failed\": 0\n    },\n    \"_seq_no\": 1,\n    \"_primary_term\": 3\n}\n</code></pre> <ul> <li>PUT<ul> <li><code>PUT _index/_create/ID</code></li> <li>may cause performance issues</li> </ul> </li> </ul>"},{"location":"Backend/elastic/#add-multiple-documents","title":"Add multiple documents","text":"<ul> <li>Use NDJSON</li> </ul> <pre><code>PUT logs-my_app-default/_bulk\n{ \"create\": { } }\n{ \"@timestamp\": \"2099-05-07T16:24:32.000Z\", \"event\": { \"original\": \"192.0.2.242 - - [07/May/2020:16:24:32 -0500] \\\"GET /images/hm_nbg.jpg HTTP/1.0\\\" 304 0\" } }\n{ \"create\": { } }\n{ \"@timestamp\": \"2099-05-08T16:25:42.000Z\", \"event\": { \"original\": \"192.0.2.255 - - [08/May/2099:16:25:42 +0000] \\\"GET /favicon.ico HTTP/1.0\\\" 200 3638\" } }\n</code></pre> Note <pre><code>{\n    \"took\": 3,\n    \"errors\": false,\n    \"items\": [\n        {\n            \"create\": {\n                \"_index\": \".ds-logs-my_app-default-2021.06.28-000001\",\n                \"_type\": \"_doc\",\n                \"_id\": \"RrjaW3oBJ-UWGrIG7nrd\",\n                \"_version\": 1,\n                \"result\": \"created\",\n                \"_shards\": {\n                    \"total\": 2,\n                    \"successful\": 1,\n                    \"failed\": 0\n                },\n                \"_seq_no\": 2,\n                \"_primary_term\": 3,\n                \"status\": 201\n            }\n        },\n        {\n            \"create\": {\n                \"_index\": \".ds-logs-my_app-default-2021.06.28-000001\",\n                \"_type\": \"_doc\",\n                \"_id\": \"R7jaW3oBJ-UWGrIG7nrd\",\n                \"_version\": 1,\n                \"result\": \"created\",\n                \"_shards\": {\n                    \"total\": 2,\n                    \"successful\": 1,\n                    \"failed\": 0\n                },\n                \"_seq_no\": 3,\n                \"_primary_term\": 3,\n                \"status\": 201\n            }\n        }\n    ]\n}\n</code></pre>"},{"location":"Backend/elastic/#search-data","title":"Search data","text":"<pre><code>GET logs-my_app-default/_search\n{\n  \"query\": {\n    \"match_all\": { }\n  },\n  \"sort\": [\n    {\n      \"@timestamp\": \"desc\"\n    }\n  ]\n}\n</code></pre> <ul> <li>Get specific fields</li> </ul> <pre><code>GET logs-my_app-default/_search\n{\n  \"query\": {\n    \"match_all\": { }\n  },\n  \"fields\": [\n    \"@timestamp\"\n  ],\n  \"_source\": false,\n  \"sort\": [\n    {\n      \"@timestamp\": \"desc\"\n    }\n  ]\n}\n</code></pre> <ul> <li>Search a range<ul> <li>time / IP range</li> </ul> </li> </ul> <pre><code>GET logs-my_app-default/_search\n{\n  \"query\": {\n    \"range\": {\n      \"@timestamp\": {\n        \"gte\": \"2099-05-05\",\n        \"lt\": \"2099-05-08\"\n      }\n    }\n  },\n  \"fields\": [\n    \"@timestamp\"\n  ],\n  \"_source\": false,\n  \"sort\": [\n    {\n      \"@timestamp\": \"desc\"\n    }\n  ]\n}\n</code></pre> <ul> <li>Aggregate data<ul> <li>to summarize data as metrics, statistics, or analytics</li> </ul> </li> </ul>"},{"location":"Backend/elastic/#_doc-mapping-type","title":"<code>_doc</code> Mapping Type","text":"<p>Warning</p> <p>Deprecated</p> <p>To separate collections inside an index</p> <p>https://stackoverflow.com/questions/35747862/what-does-doc-represents-in-elasticsearch</p>"},{"location":"Backend/elastic/#cluster","title":"Cluster","text":"<p>https://godleon.github.io/blog/Elasticsearch/Elasticsearch-distributed-mechanism/ http://dog0416.blogspot.com/2017/03/elasticsearch-configuring-cluster.html https://www.claytontan.net/2020/01/23/elasticsearch-cluster-%E5%AE%89%E8%A3%9D/</p>"},{"location":"Backend/install_elastic_stack/","title":"Elastic Stack","text":""},{"location":"Backend/install_elastic_stack/#elasticsearch","title":"Elasticsearch","text":"<ul> <li>Utilities<ul> <li><code>/usr/share/elasticsearch/bin/</code></li> </ul> </li> <li>Config path<ul> <li><code>/etc/elasticsearch</code></li> </ul> </li> <li>Log<ul> <li><code>/var/log/elasticsearch/</code></li> </ul> </li> </ul> <pre><code>wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.2.1-linux-x86_64.tar.gz\ntar xzvf ./elasticsearch-7.2.1-linux-x86_64.tar.gz\nsudo mv elasticsearch-7.2.1 /usr/local/elasticsearch\nsudo adduser elastic\nsudo chown elastic:elastic -R /usr/local/elasticsearch/\ncd /usr/local/elasticsearch\n</code></pre>"},{"location":"Backend/install_elastic_stack/#ubuntu","title":"Ubuntu","text":"<p>https://www.elastic.co/guide/en/elasticsearch/reference/current/deb.html</p> <pre><code>wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -\nsudo apt-get install apt-transport-https\necho \"deb https://artifacts.elastic.co/packages/7.x/apt stable main\" | sudo tee /etc/apt/sources.list.d/elastic-7.x.list\nsudo apt-get update &amp;&amp; sudo apt-get install elasticsearch\nsudo systemctl start elasticsearch\ncurl \"http://localhost:9200\" # Test\n</code></pre>"},{"location":"Backend/install_elastic_stack/#settings","title":"Settings","text":"<p><code>sudo vim /etc/elasticsearch/elasticsearch.yml</code></p> <pre><code># \u7d81\u5b9a\u7279\u5b9a IP\n# network.bind_host: 192.168.56.101\n# \u7d81\u5b9a\u591a\u500b IP\n# network.host: [\"192.168.56.101\", \"127.0.0.1\"]\n# \u7d81\u5b9a\u6240\u6709 IP\nnetwork.bind_host: 0.0.0.0\n\n# \u7d81\u5b9a Port\uff0c\u9810\u8a2d\u5176\u5be6\u5c31\u662f 9200\nhttp.port: 9200\n</code></pre> <ul> <li>\u5982\u679c\u8a2d\u5b9a <code>0.0.0.0</code> \u8981\u8ddf\u8457\u8a2d\u5b9a <code>discovery</code><ul> <li>\u55ae\u7bc0\u9ede: <code>discovery.type: single-node</code></li> </ul> </li> </ul>"},{"location":"Backend/install_elastic_stack/#security","title":"Security","text":"<ul> <li>xpack: es version <code>&gt;= 6.3.0</code></li> </ul> <pre><code>sudo /usr/share/elasticsearch/bin/elasticsearch-setup-passwords interactive\n# Setting all passwords\n# ...\nsudo vim /etc/kibana/kibana.yml\n    elasticsearch.username: \"kibana_system\"\n    elasticsearch.password: \"your password\"\n# Restart the elasticsearch\n</code></pre>"},{"location":"Backend/install_elastic_stack/#reference","title":"Reference","text":"<p>https://ithelp.ithome.com.tw/articles/10215214</p>"},{"location":"Backend/install_elastic_stack/#kibana","title":"Kibana","text":"<p>https://www.elastic.co/guide/en/kibana/current/deb.html</p> <pre><code>wget https://artifacts.elastic.co/downloads/kibana/kibana-7.2.1-linux-x86_64.tar.gz\ntar xzvf ./kibana-7.2.1-linux-x86_64.tar.gz\nsudo mv kibana-7.2.1-linux-x86_64 /usr/local/kibana\n</code></pre>"},{"location":"Backend/install_elastic_stack/#ubuntu_1","title":"Ubuntu","text":"<pre><code>sudo apt-get install kibana\nsudo systemctl start kibana\n</code></pre> <ul> <li>Config <code>/etc/kibana/kibana.yml</code></li> </ul>"},{"location":"Backend/install_elastic_stack/#filebeat","title":"Filebeat","text":""},{"location":"Backend/install_elastic_stack/#installation","title":"Installation","text":"<pre><code>sudo apt install filebeat\n</code></pre>"},{"location":"Backend/install_elastic_stack/#config","title":"Config","text":"<ul> <li> <p>Download Example</p> <ul> <li>https://raw.githubusercontent.com/elastic/beats/v7.13.2/filebeat/filebeat.reference.yml</li> </ul> </li> <li> <p>Remember to change host:ip, username, and password if changed</p> </li> </ul>"},{"location":"Backend/mariadb/","title":"MariaDB","text":""},{"location":"Backend/mariadb/#installation","title":"Installation","text":""},{"location":"Backend/mariadb/#ubuntu","title":"Ubuntu","text":"<pre><code>sudo apt install mariadb-server\n</code></pre>"},{"location":"Backend/mariadb/#centos","title":"CentOS","text":"<pre><code>curl -sS https://downloads.mariadb.com/MariaDB/mariadb_repo_setup | sudo bash\nsudo yum install MariaDB-client MariaDB-shared\n</code></pre> <ul> <li> <p>Interactive secure setting <pre><code>sudo mysql_secure_installation\n</code></pre></p> </li> <li> <p>Add user with all privileges <pre><code>GRANT ALL ON *.* TO 'admin'@'localhost' IDENTIFIED BY 'password' WITH GRANT OPTION;\nFLUSH PRIVILEGES;\nexit;\n</code></pre></p> </li> <li> <p>Test <pre><code>sudo mysqladmin version\n</code></pre></p> </li> </ul>"},{"location":"Backend/nginx/","title":"nginx","text":""},{"location":"Backend/nginx/#lets-encrypt-certbot","title":"let's encrypt + certbot","text":"<pre><code>sudo apt install certbot python3-certbot-nginx\n</code></pre> <p>Warning</p> <p><code>AttributeError: module 'acme.challenges' has no attribute 'TLSSNI01'</code>?</p> <pre><code>curl -o- https://raw.githubusercontent.com/vinyll/certbot-install/master/install.sh | bash\n</code></pre>"},{"location":"Backend/redis/","title":"Redis","text":""},{"location":"Backend/redis/#installation","title":"Installation","text":""},{"location":"Backend/redis/#ubuntu","title":"Ubuntu","text":"<ul> <li>Install</li> </ul> <pre><code>sudo apt install redis-server\nsudo systemctl enable redis-server.service\n# Restart\nsudo systemctl restart redis-server.service\n</code></pre> <ul> <li>Config<ul> <li><code>sudo vim /etc/redis/redis.conf</code></li> </ul> </li> </ul> <pre><code>maxmemory 256mb\nmaxmemory-policy allkeys-lru\n</code></pre>"},{"location":"Backend/redis/#centos7","title":"CentOS7","text":"<pre><code># install\nsudo yum -y install epel-release\nsudo yum -y install http://rpms.remirepo.net/enterprise/remi-release-7.rpm\nsudo yum -y --enablerepo=remi,remi-test install redis\n\n# enable redis as service\nsudo systemctl daemon-reload\nsudo systemctl enable redis.service\n\nfirewall-cmd --permanent --add-port=6379/tcp\nfirewall-cmd --reload\n\nsudo systemctl start redis\n</code></pre>"},{"location":"Backend/redis/#cli","title":"CLI","text":"<pre><code># ping redis\nredis-cli ping\n\n# get version\nredis-server -v\n\n#\u6548\u80fd\u6e2c\u8a66 http://redis.io/topics/benchmarks\nredis-benchmark -q -n 100000\n</code></pre>"},{"location":"Backend/redis/#reference","title":"Reference","text":"<p>https://tecadmin.net/install-redis-ubuntu/</p> <p>https://dotblogs.com.tw/supershowwei/2016/02/01/144251</p> <p>https://xyz.cinc.biz/2015/09/centos7-redis-php.html</p>"},{"location":"Backend/traefik/","title":"traefik","text":"<p>https://www.digitalocean.com/community/tutorials/how-to-use-traefik-v2-as-a-reverse-proxy-for-docker-containers-on-ubuntu-20-04</p>"},{"location":"Backend/traefik/#basicauth","title":"BasicAuth","text":"<pre><code>[http.middlewares]\n  [http.middlewares.login.basicAuth]\n    users = [\n      \"roy4801:$2y$05$qmSUC0EePfGCf6hnabUqeuHHn77cZJu3M2Z095qwxZw6mbiXaF2YG\"\n    ]\n</code></pre>"},{"location":"Backend/PHP/php/","title":"PHP","text":""},{"location":"Backend/PHP/php/#ubuntu","title":"Ubuntu","text":""},{"location":"Backend/PHP/php/#2004","title":"20.04","text":"<pre><code>sudo add-apt-repository ppa:ondrej/php\nsudo apt-get update\n</code></pre> <pre><code>php7.3-cli php7.3-fpm php7.3-json php7.3-mysql php7.3-zip php7.3-gd  php7.3-mbstring php7.3-curl php7.3-xml php7.3-bcmath php7.3-json\n</code></pre> <pre><code># apache\nsudo apt install php7.2\n\n# nginx\nsudo apt install php7.2-fpm\n\n# Install modules\nsudo apt install php7.2-cli php7.2-xml php7.2-mysql php7.2-mbstring php7.2-xdebug\n\n# Install composer to current dir\n#https://getcomposer.org/doc/00-intro.md#downloading-the-composer-executable\nphp -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\"\nphp composer-setup.php --filename=composer\nphp -r \"unlink('composer-setup.php');\"\n# move composer to global\nsudo mv composer /usr/local/bin/\n\n# New project\ncomposer create-project laravel/laravel example-app\n\n# Serve\nphp artisan serve --host=0.0.0.0\n</code></pre> <ul> <li>Install laravel globally <pre><code>composer global require laravel/installer\n</code></pre></li> </ul>"},{"location":"Backend/PHP/php/#centos","title":"CentOS","text":"<ul> <li> <p>Install <code>nginx</code> <pre><code>sudo yum install nginx\n\nsudo firewall-cmd --permanent --zone=public --add-service=http\nsudo firewall-cmd --permanent --zone=public --add-service=https\nsudo firewall-cmd --reload\n</code></pre></p> </li> <li> <p>Install PHP <pre><code>sudo yum install epel-release\nsudo yum install http://rpms.remirepo.net/enterprise/remi-release-7.rpm\nsudo yum install yum-utils\nsudo yum-config-manager --enable remi-php72\nsudo yum update\nsudo yum install php72 php72-php-fpm php72-php-gd php72-php-json php72-php-mbstring php72-php-mysqlnd php72-php-xml php72-php-xmlrpc php72-php-opcache php7.2-xdebug\n</code></pre></p> </li> </ul> <p>https://www.cyberciti.biz/faq/how-to-install-php-7-2-on-centos-7-rhel-7/ https://www.cyberciti.biz/faq/how-to-install-and-use-nginx-on-centos-7-rhel-7/ https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-on-centos-7</p>"},{"location":"Backend/PHP/php/#usage","title":"Usage","text":"<ul> <li>Create a empty project <pre><code># &gt;= php 7.3.0\nlaravel new abc\ncomposer require laravel/ui\nphp artisan ui [bootstrap, vue, react] --auth\n\n# else\n</code></pre></li> </ul>"},{"location":"Backend/PHP/php/#logs","title":"Logs","text":"<ul> <li><code>/var/log/php-fpm/www-error.log</code></li> </ul>"},{"location":"Backend/PHP/php/#artisan","title":"Artisan","text":""},{"location":"Backend/PHP/php/#route","title":"Route","text":"<pre><code>php artisan route:cache\nphp artisan route:list\n</code></pre>"},{"location":"Backend/PHP/php/#reference","title":"Reference","text":"<p>https://getcomposer.org/download/ https://www.tecmint.com/install-different-php-versions-in-ubuntu/ https://computingforgeeks.com/how-to-install-php-ubuntu-debian/</p>"},{"location":"Backend/PHP/php_snippets/","title":"Snippets","text":""},{"location":"Backend/PHP/php_snippets/#error","title":"Error","text":"<pre><code>ini_set('display_errors', 1);\nerror_reporting(E_ALL);\n</code></pre> <pre><code>$s = proc_get_status($res);\nposix_kill($s['pid'], SIGKILL);\nproc_close($res);\n</code></pre>"},{"location":"Backend/SQL/dump/","title":"Dump","text":"<pre><code>mysqldump -u &lt;user&gt; -h &lt;host&gt; -p &lt;db name&gt; [table name]...\n</code></pre> <ul> <li><code>--all-databasses</code></li> </ul>"},{"location":"Backend/SQL/dump/#reference","title":"Reference","text":"<p>https://code.yidas.com/mysqldump/</p>"},{"location":"Backend/SQL/query/","title":"Query","text":""},{"location":"Backend/SQL/query/#privilege","title":"Privilege","text":"<ul> <li>Create user</li> </ul> <pre><code>CREATE USER 'user'@'host' IDENTIFIED BY 'pass';\n</code></pre> <ul> <li>Grant privileges<ul> <li><code>ALL PRIVILEGES</code></li> <li><code>CREATE</code></li> <li><code>DROP</code></li> <li><code>DELETE</code></li> <li><code>INSERT</code></li> <li><code>SELECT</code></li> <li><code>UPDATE</code></li> </ul> </li> </ul> <pre><code>GRANT p1,p2,... ON database.table TO 'user'@'localhost';\n# *.*\nFLUSH PRIVILEGES;\n</code></pre> <ul> <li>Delete a user</li> </ul> <pre><code>DROP USER 'user'@'localhost'\n</code></pre>"},{"location":"Backend/SQL/query/#reference","title":"Reference","text":"<p>https://stackoverflow.com/questions/8369253/grant-user-access-to-limited-number-of-tables-in-mysql https://stackoverflow.com/questions/8369253/grant-user-access-to-limited-number-of-tables-in-mysql</p>"},{"location":"Backend/SQL/setting/","title":"MySQL/MariaDB Setting","text":""},{"location":"Backend/SQL/setting/#user","title":"User","text":"<pre><code>USE mysql;\n</code></pre> <ul> <li>Check users</li> </ul> <pre><code>MariaDB [mysql]&gt; select user,host,plugin from user;\n+--------------+-----------+-----------------------+\n| user         | host      | plugin                |\n+--------------+-----------+-----------------------+\n| root         | localhost | unix_socket           |\n| ....         | localhost |                       |\n| xxx          | localhost |                       |\n| ????         | localhost | mysql_native_password |\n| ????         | %         | mysql_native_password |\n+--------------+-----------+-----------------------+\n</code></pre> <ul> <li> <p>Create a user <pre><code>CREATE USER 'username'@'localhost' IDENTIFIED BY 'password; # \u672c\u6a5f\nCREATE USER 'username'@'%' IDENTIFIED BY 'password; # \u9060\u7aef\n</code></pre></p> </li> <li> <p>Set plugin</p> <ul> <li><code>mysql_native_password</code></li> <li><code>unix_socket</code>/<code>auth_socket</code></li> </ul> </li> </ul> <pre><code>UPDATE user SET plugin='plugin_name' WHERE user='user_name';\n</code></pre> <ul> <li>Grant privileges Ref <pre><code>GRANT ALL PRIVILEGES ON *.* TO 'username'@'host';\nFLUSH PRIVILEGES;\n</code></pre></li> </ul> <pre><code>GRANT CREATE, ALTER, DROP, INSERT, UPDATE, DELETE, SELECT, REFERENCES, RELOAD on *.* TO 'sammy'@'remote_server_ip' WITH GRANT OPTION;\n</code></pre> <ul> <li>Set password for a user</li> </ul> <pre><code>SET PASSWORD FOR 'user'@'host' = PASSWORD('pass'); # &lt;= MySQL 5.7.5\nALTER USER 'user'@'host' IDENTIFIED BY 'pass';     # &gt;= MySQL 5.7.6\n</code></pre> <pre><code>mysqladmin -u user -p'old' password 'new'\n</code></pre>"},{"location":"Backend/SQL/setting/#allow-remote-access","title":"Allow remote access","text":"<ul> <li> <p>Comment <code>bind-address</code></p> <ul> <li>mysql<ul> <li>&lt;= 5.5 <code>/etc/mysql/my.cnf</code></li> <li>&gt;= 5.6 <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code></li> </ul> </li> <li>mariadb: <code>/etc/mysql/mariadb.conf.d/50-server.cnf</code></li> </ul> </li> <li> <p>Restart mysql service</p> </li> </ul> <pre><code>sudo systemctl restart mysql\n</code></pre>"},{"location":"Backend/SQL/setting/#reference","title":"Reference","text":"<p>\u89e3\u51b3 MySQL \u7684 ERROR 1698 (28000): Access denied for user 'root'@'localhost' https://blog.csdn.net/jlu16/article/details/82809937</p> <p>[MySQL] \u8cc7\u6599\u5eab\u5bc6\u78bc\u4fee\u6539\u8655\u7406 \u2013 MySQL Password Change https://code.yidas.com/mysql-password-change/</p> <p>MySQL \u5141\u8a31\u5916\u90e8\u9023\u5165 https://contemplator.github.io/blog/2018/06/06/Mysql-%E5%85%81%E8%A8%B1%E5%A4%96%E9%83%A8%E9%80%A3%E5%85%A5/</p> <p>http://itman.in/en/mysql-add-user-for-remote-access/</p> <p>https://www.digitalocean.com/community/tutorials/how-to-allow-remote-access-to-mysql</p>"},{"location":"Backend/laravel/artisan/","title":"Artisan","text":"<p>a command-line tool for laravel</p>"},{"location":"Backend/laravel/artisan/#config","title":"Config","text":"<ul> <li>Reload config <pre><code>php artisan config:cache\n</code></pre></li> </ul>"},{"location":"Backend/laravel/artisan/#route","title":"Route","text":"<ul> <li>Reload routes</li> </ul>"},{"location":"Backend/laravel/command/","title":"Command","text":""},{"location":"Backend/laravel/command/#create-a-new-command","title":"Create a new command","text":"<pre><code>php artisan make:command CommandName\n</code></pre> <p>This will generates a <code>CommandName.php</code> at <code>app/Console/Commands/</code></p> <pre><code>&lt;?php\n\nnamespace App\\Console\\Commands;\n\nuse Illuminate\\Console\\Command;\n\nclass DumpQueue extends Command\n{\n    /**\n     * The name and signature of the console command.\n     *\n     * @var string\n     */\n    protected $signature = 'command';\n\n    /**\n     * The console command description.\n     *\n     * @var string\n     */\n    protected $description = 'description';\n\n    /**\n     * Create a new command instance.\n     *\n     * @return void\n     */\n    public function __construct()\n    {\n        parent::__construct();\n    }\n\n    /**\n     * Execute the console command.\n     *\n     * @return int\n     */\n    public function handle()\n    {\n        return 0;\n    }\n}\n</code></pre>"},{"location":"Backend/laravel/command/#api","title":"API","text":"<p>Warning</p> <p>The description of the command need to insert spaces before and after the colon. e.g. <code>{arg : description}'</code></p>"},{"location":"Backend/laravel/command/#arguments","title":"Arguments","text":"<ul> <li> <p>Define <pre><code>protected $signature = 'test:command {arg1 : All jobs}';\n</code></pre></p> </li> <li> <p>Access <pre><code>$this-&gt;argument(\"arg1\"); // arg1\n\n$this-&gt;arguements();     // A list of arguments\n</code></pre></p> </li> </ul>"},{"location":"Backend/laravel/command/#options","title":"Options","text":"<ul> <li>Define</li> </ul> <pre><code>protected $signature = 'test:command {--opt1: A option} {--opt2=} {--opt3=123}';\n</code></pre> <ul> <li>Access</li> </ul> <pre><code>$this-&gt;option('opt1'); // flag\n$this-&gt;option('opt2'); // value if given\n$this-&gt;option('opt3'); // default value if not specified\n\n$this-&gt;options();      // A list of options\n</code></pre>"},{"location":"Backend/laravel/command/#advanced-arguements-or-options","title":"Advanced arguements or options","text":"<pre><code>protected $signature = 'test:command {--Q|queue} ';\n\n// Input array\nprotected $signature = 'test:command {input=*}';     // for Arguemtns\n\nprotected $signature = 'email:send {user} {--id=*}'; // for Options\n</code></pre>"},{"location":"Backend/laravel/command/#output","title":"Output","text":"<ul> <li>Write outputs with level <pre><code>$this-&gt;line()\n$this-&gt;info()\n$this-&gt;comment()\n$this-&gt;question()\n$this-&gt;error()\n</code></pre></li> </ul>"},{"location":"Backend/laravel/controller/","title":"laravel Controller","text":""},{"location":"Backend/laravel/controller/#invokable","title":"Invokable","text":"<ul> <li>Make Controller</li> </ul> <pre><code>php artisan make:controller -i NAME\n</code></pre> <ul> <li>Route <pre><code>Route::get('YOUR/ROUTE', TestInvokable::class);\nRoute::get('YOUR/ROUTE', '\\App\\Http\\Controllers\\TestInvokable');\n</code></pre></li> </ul>"},{"location":"Backend/laravel/database/","title":"Database","text":"<ul> <li>Config: <code>config/database.php</code></li> </ul>"},{"location":"Backend/laravel/database/#migration","title":"Migration","text":"<ul> <li>Create a migraiton<ul> <li>The table to migrate: <code>--table=XXX</code></li> <li>The table to be created: <code>--create=XXX</code></li> </ul> </li> </ul> <pre><code>php artisan make:migration create_user_table\n</code></pre> <ul> <li>Execute the migration <pre><code>php artisan migrate\nphp artisan migrate --path=path_to_php\n</code></pre></li> </ul>"},{"location":"Backend/laravel/database/#ref","title":"Ref","text":"<p>https://stackoverflow.com/questions/30447385/artisan-creating-tables-in-database</p>"},{"location":"Backend/laravel/eloquent/","title":"Eloquent","text":""},{"location":"Backend/laravel/eloquent/#get-sql-query","title":"Get SQL query","text":"<pre><code>DB::enableQueryLog();\n\n// Eloquent query\n\ndump(DB::getQueryLog();)\n</code></pre>"},{"location":"Backend/laravel/eloquent/#raw","title":"Raw","text":"<pre><code>DB::statement('query') -&gt; bool\n\nDB::select('query') -&gt;&gt; result\nModel::select(DB::raw('query'))-&gt;get();\n\n$users = DB::select('select * from users where id = ?', array(1));\n$users = DB::select( DB::raw(\"select * from users where username = :username\"), array('username' =&gt; Input::get(\"username\")));\n</code></pre>"},{"location":"Backend/laravel/eloquent/#where","title":"Where","text":"<pre><code>Model::where('condition')\n-&gt;where('condition')  # and\n-&gt;orWhere('condtion') # or\n-&gt;get()\n</code></pre>"},{"location":"Backend/laravel/eloquent/#table","title":"Table","text":"<pre><code>DB::table('table');\n</code></pre>"},{"location":"Backend/laravel/eloquent/#transcation","title":"Transcation","text":"<p>https://dev.to/inspector/resolve-mysql-lock-wait-timeout-dealing-with-laravel-queues-and-jobs-4a6g</p> <pre><code>DB::transaction(function () {\n    DB::table('users')-&gt;update(['votes' =&gt; 1]);\n\n    DB::table('posts')-&gt;delete();\n}, 5);\n</code></pre> <ul> <li>Reappempts</li> </ul> <pre><code>DB::transaction(function () {\n    /* ... */\n}, 5);\n</code></pre>"},{"location":"Backend/laravel/eloquent/#manually","title":"Manually","text":"<pre><code>DB::beginTransaction();\n\nDB::rollBack();\n\nDB::commit();\n</code></pre>"},{"location":"Backend/laravel/job_queue/","title":"Queue","text":""},{"location":"Backend/laravel/job_queue/#setup","title":"Setup","text":""},{"location":"Backend/laravel/job_queue/#databawse","title":"Databawse","text":"<pre><code>php artisan queue:table\nphp artisan queue:failed-table\nphp artisan migrate\n</code></pre>"},{"location":"Backend/laravel/job_queue/#redis","title":"Redis","text":"<ul> <li>see use_redis_as_mq</li> </ul>"},{"location":"Backend/laravel/job_queue/#usage","title":"Usage","text":"<pre><code># Restart the worker\nphp artisan queue:restart\n</code></pre>"},{"location":"Backend/laravel/job_queue/#use-supervisord-to-start-laravel-worker","title":"Use supervisord to start laravel worker","text":"<ul> <li> <p>Config path     <pre><code>sudo vim /etc/supervisord.d/laravel-worker.conf\n</code></pre></p> </li> <li> <p><code>laravel-work.conf</code> or <code>laravel-work.ini</code> (see config)     <pre><code>[program:laravel-worker]\nprocess_name=%(program_name)s_%(process_num)02d\ncommand=php /usr/share/CLM/html/v2/artisan queue:work --queue=high,default\nautostart=true\nautorestart=true\nuser=nspectrum\nnumprocs=5\nredirect_stderr=true\nstdout_logfile=/var/log/laravel/worker.log\nstopwaitsecs=3600\n</code></pre></p> </li> <li> <p>Start the processes</p> </li> </ul> <pre><code>sudo supervisorctl reread\nsudo supervisorctl update\nsudo supervisorctl start laravel-worker:*\n\n# Broadcast the restart message\nphp artisan queue:restart\n</code></pre>"},{"location":"Backend/laravel/job_queue/#job","title":"Job","text":""},{"location":"Backend/laravel/job_queue/#dispatch-a-job","title":"Dispatch a job","text":"<pre><code>$data = [/* ... */];\n\nJob::dispatch($data);\n</code></pre> <ul> <li>Dispatch a specific queue</li> </ul> <pre><code>Job::dispatch($data)-&gt;onQueue(\"Name\");\n</code></pre>"},{"location":"Backend/laravel/laravel_passport/","title":"Laravel Passport","text":""},{"location":"Backend/laravel/laravel_passport/#installation","title":"Installation","text":"<pre><code># Install laravel/passport\ncomposer require laravel/passport\n# Migrate oauth tables\nphp artisan migrate\n# Generate keys\nphp artisan passport:install\n</code></pre>"},{"location":"Backend/laravel/laravel_passport/#configuration","title":"Configuration","text":"<ul> <li>Add <code>Laravel\\Passport\\HasApiTokens</code> to User model</li> </ul> <pre><code>&lt;?php\n\nnamespace App;\n\nuse Laravel\\Passport\\HasApiTokens;\nuse Illuminate\\Notifications\\Notifiable;\nuse Illuminate\\Foundation\\Auth\\User as Authenticatable;\n\nclass User extends Authenticatable\n{\n    use HasApiTokens, Notifiable;\n}\n</code></pre> <ul> <li>Add <code>Passport::routes()</code> to <code>AuthServiceProvider::boot()</code></li> </ul> <pre><code>class AuthServiceProvider extends ServiceProvider\n    public function boot()\n    {\n        $this-&gt;registerPolicies();\n\n        Passport::routes();\n    }\n</code></pre> <ul> <li>Register <code>Laravel\\Passport\\PassportServiceProvider</code> to <code>config/app.php</code></li> </ul> <pre><code>'providers' =&gt; [\n    // ...\n\n    /*\n     * Package Service Providers...\n     */\n    Laravel\\Passport\\PassportServiceProvider::class,\n\n    // ...\n],\n</code></pre> <ul> <li>Change <code>driver</code> of api to <code>passport</code> in <code>config/auth.php</code></li> </ul> <pre><code>'guards' =&gt; [\n    'web' =&gt; [\n        'driver' =&gt; 'session',\n        'provider' =&gt; 'users',\n    ],\n\n    'api' =&gt; [\n        'driver' =&gt; 'passport',\n        'provider' =&gt; 'users',\n    ],\n],\n</code></pre> <ul> <li>Deploy Laravel/Passport</li> </ul> <pre><code>php artisan passport:keys\n</code></pre>"},{"location":"Backend/laravel/laravel_passport/#create-auth-controller","title":"Create Auth Controller","text":"<pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\nuse Illuminate\\Http\\Request;\nuse App\\Models\\User;\n\nclass PassportAuthController extends Controller\n{\n    /**\n     * Registration\n     */\n    public function register(Request $request)\n    {\n        $this-&gt;validate($request, [\n            'name' =&gt; 'required|min:4',\n            'email' =&gt; 'required|email',\n            'password' =&gt; 'required|min:8',\n        ]);\n\n        $user = User::create([\n            'name' =&gt; $request-&gt;name,\n            'email' =&gt; $request-&gt;email,\n            'password' =&gt; bcrypt($request-&gt;password)\n        ]);\n\n        $token = $user-&gt;createToken('LaravelAuthApp')-&gt;accessToken;\n\n        return response()-&gt;json(['token' =&gt; $token], 200);\n    }\n\n    /**\n     * Login\n     */\n    public function login(Request $request)\n    {\n        $data = [\n            'email' =&gt; $request-&gt;email,\n            'password' =&gt; $request-&gt;password\n        ];\n\n        if (auth()-&gt;attempt($data)) {\n            $token = auth()-&gt;user()-&gt;createToken('LaravelAuthApp')-&gt;accessToken;\n            return response()-&gt;json(['token' =&gt; $token], 200);\n        } else {\n            return response()-&gt;json(['error' =&gt; 'Unauthorised'], 401);\n        }\n    }   \n}\n</code></pre>"},{"location":"Backend/laravel/laravel_passport/#reference","title":"Reference","text":"<p>Laravel 8 REST API with Passport Authentication Tutorial https://www.positronx.io/laravel-rest-api-with-passport-authentication-tutorial/</p>"},{"location":"Backend/laravel/schedule/","title":"Schedule","text":""},{"location":"Backend/laravel/schedule/#start-the-scheduler","title":"Start the scheduler","text":"<p>Add the following command as a cron job </p> <pre><code>* * * * * cd /path-to-your-project &amp;&amp; php artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1\n</code></pre>"},{"location":"Backend/laravel/schedule/#define-a-schedule","title":"Define a schedule","text":"<ul> <li>In <code>App\\Console\\Kernel.php</code></li> </ul> <pre><code>protected function schedule(Schedule $schedule)\n{\n    // Closures\n    $schedule-&gt;call(function () {\n        DB::table('recent_users')-&gt;delete();\n    })-&gt;daily();\n\n    // invokable objects\n    $schedule-&gt;call(new DeleteRecentUsers)-&gt;daily();\n\n    $schedule\n        -&gt; command('cbh:dummyCommand')\n        -&gt; everyFiveMinutes()\n        -&gt; appendOutputTo ('/my/logs/laravel_output.log');\n}\n</code></pre>"},{"location":"Backend/laravel/schedule/#schedule-a-artisan-command","title":"Schedule a artisan command","text":"<pre><code>// string\n$schedule-&gt;command('command:exec')-&gt;everyMinute();\n\n// class\n$schedule-&gt;command(CommandClass::class, ['--option', $option])-&gt;daily();\n</code></pre>"},{"location":"Backend/laravel/schedule/#schedule-a-queue-jobs","title":"Schedule a queue jobs","text":"<pre><code>$schedule-&gt;job(new QueueJob, args, ...)-&gt;daily();\n</code></pre>"},{"location":"Backend/laravel/schedule/#schedule-a-shell-command","title":"Schedule a shell command","text":"<pre><code>$schedule-&gt;exec('shell command')-&gt;daily();\n</code></pre>"},{"location":"Backend/laravel/schedule/#frequency-options","title":"Frequency options","text":"<ul> <li> <p><code>-&gt;cron('* * * * *')</code> Cron</p> </li> <li> <p>Minute</p> <ul> <li><code>-&gt;everyXMinute[s]()</code><ul> <li>Every X minutes \\(X \\in {1,2,3,4,5,10,15,30}\\)</li> <li>e.g. <code>-&gt;everyMinute()</code>, <code>-&gt;everyFiveMinutes()</code></li> </ul> </li> </ul> </li> </ul> <p>-Hour     - <code>-&gt;hourly()</code>         - every hour     - <code>-&gt;hourlyAt(X)</code>         - Every hour at X minutes     - <code>-&gt;everyXHours()</code>         - Every X hours \\(X \\in {2, 3, 4, 6}\\)</p> <ul> <li> <p>Day</p> <ul> <li><code>-&gt;daily()</code><ul> <li>Daily at midnight</li> </ul> </li> <li><code>-&gt;dailyAt('AA:BB')</code><ul> <li>Daily at AA:BB</li> </ul> </li> <li><code>-&gt;twiceDaily(1, 13);</code><ul> <li>Daily at 1:00 &amp; 13:00</li> </ul> </li> </ul> </li> <li> <p>Week</p> <ul> <li><code>-&gt;weekly()</code><ul> <li>Every Sunday at 0:00</li> </ul> </li> <li><code>-&gt;weeklyOn(1, '8:00')</code><ul> <li>Every X day at Time</li> </ul> </li> </ul> </li> <li> <p>Month</p> <ul> <li><code>-&gt;monthly()</code><ul> <li>Eveny first day (0:00) of the month</li> </ul> </li> <li><code>-&gt;monthlyOn(4, '15:00')</code><ul> <li>Every 4th day of the month (15:00)</li> </ul> </li> <li><code>-&gt;twiceMonthly(1, 16, '13:00')</code><ul> <li>Every month on the 1st and 16th at 13:00</li> </ul> </li> <li><code>-&gt;lastDayOfMonth('15:00');</code><ul> <li>The last day of the month at 15:00</li> </ul> </li> </ul> </li> <li> <p>Year</p> <ul> <li><code>-&gt;yearly();</code></li> <li><code>-&gt;yearlyOn(6, 1, '17:00');</code></li> </ul> </li> <li> <p>Other</p> <ul> <li><code>-&gt;timezone('Asia/Taipei')</code> Timezone</li> </ul> </li> </ul> <p>https://laravel.com/docs/8.x/scheduling#day-constraints</p>"},{"location":"Backend/laravel/unit_test/","title":"Testing","text":"<ul> <li>Feature<ul> <li>A larger portion of the code, how several objects</li> </ul> </li> <li>Unit<ul> <li>Small functionalities (e.g. a function)</li> </ul> </li> </ul>"},{"location":"Backend/laravel/unit_test/#config","title":"Config","text":"<ul> <li>Config: <code>phpunit.xml</code><ul> <li>Need to <code>config:cache</code> after editing</li> </ul> </li> </ul>"},{"location":"Backend/laravel/unit_test/#usage","title":"Usage","text":"<ul> <li>Create</li> </ul> <pre><code>// Create a feature test\nphp artisan make:test XXXTest\n\n// Create a unit test\nphp artisan make:test XXXTest --unit\n</code></pre> <p>A test would looks like:</p> <pre><code>&lt;?php\n\nnamespace Tests\\Unit;\n\nuse PHPUnit\\Framework\\TestCase;\n\nuse Tests\\TestCase // better\n\nclass ExampleTest extends TestCase\n{\n    /**\n     * A basic test example.\n     *\n     * @return void\n     */\n    public function testBasicTest()\n    {\n        $this-&gt;assertTrue(true);\n    }\n}\n</code></pre> <ul> <li>Run the test</li> </ul> <pre><code>php artisan test [--group name] [/path/to/test.php]\n</code></pre> <p>Danger</p> <p><code>A facade root has not been set</code> when use things related to the application</p> <pre><code>&lt;?php\n\nnamespace Tests\\Unit;\n\nuse Tests\\TestCase;\n\nclass XXXTest extends TestCase\n{\n\n}\n</code></pre> <p>Danger</p> <p>The test function name must be <code>testXXX()</code> or you need to add comment <code>@test</code> above the function <pre><code>/** @test */\npublic function it_tests_something()\n{\n  ...\n}\n</code></pre></p>"},{"location":"Backend/laravel/use_redis_as_mq/","title":"Use redis as laravel Queue","text":""},{"location":"Backend/laravel/use_redis_as_mq/#use-predis","title":"Use predis","text":"<ul> <li>install <pre><code>composer require predis/predis\n</code></pre></li> </ul>"},{"location":"Backend/laravel/use_redis_as_mq/#use-php-redis","title":"Use php-redis","text":"<pre><code>sudo yum install -y php72-php-pecl-redis\n</code></pre>"},{"location":"Backend/laravel/use_redis_as_mq/#config","title":"Config","text":"<ul> <li>Edit the <code>.env</code> <pre><code># Queue Type (sync|database|redis)\nQUEUE_CONNECTION=redis\n\nREDIS_CLIENT=predis\nREDIS_HOST=127.0.0.1\nREDIS_PASSWORD=null\nREDIS_PORT=6379\n</code></pre></li> </ul>"},{"location":"Backend/laravel/use_redis_as_mq/#ref","title":"Ref","text":"<p>https://laravel.com/docs/7.x/queues</p>"},{"location":"Backend/pgsql/allow_remote_connection/","title":"Allow remote connection - PostgreSQL","text":"<ul> <li>Edit <code>/var/lib/pgsql/12/data/postgresql.conf</code></li> </ul> <pre><code>listen_addresses = '*'\n</code></pre> <ul> <li>Edit <code>/var/lib/pgsql/12/data/pg_hba.conf</code> to add the following lines for allowing remote connection</li> </ul> <pre><code>host    all             all              0.0.0.0/0                       md5\nhost    all             all              ::/0                            md5\n</code></pre> <ul> <li>Optional: Add firewall rule and restart it</li> </ul> <pre><code># CentOS\nfirewall-cmd --add-service=postgresql --permanent\nfirewall-cmd --reload\n</code></pre>"},{"location":"Backend/pgsql/allow_remote_connection/#references","title":"References","text":"<p>Configure PostgreSQL to allow remote connection https://www.bigbinary.com/blog/configure-postgresql-to-allow-remote-connection</p> <p>\u201cpsql :could not connect to server: no route to host\u201d \u2013 How we fix it https://bobcares.com/blog/psql-could-not-connect-to-server-no-route-to-host/</p>"},{"location":"Backend/pgsql/installation/","title":"Install PostgresQL","text":""},{"location":"Backend/pgsql/installation/#centos","title":"CentOS","text":"<ul> <li>php</li> </ul> <pre><code>yum install php-pgsql\n</code></pre>"},{"location":"DsAlgo/Math/hash/","title":"Hash","text":"<ul> <li>non-cryptographic hash function<ul> <li>FNV-1a</li> <li>djb2a</li> <li>sdbm</li> </ul> </li> </ul> <p>https://softwareengineering.stackexchange.com/questions/49550/which-hashing-algorithm-is-best-for-uniqueness-and-speed/145633#145633 https://blog.csdn.net/wangpengqi/article/details/9716921 https://blog.csdn.net/wwchao2012/article/details/80302310 https://opensource.apple.com/source/Kerberos/Kerberos-47/KerberosFramework/Kerberos5/Sources/util/db2/hash/hash_func.c.auto.html Dan Bernstein's (or Chris Torek's) hash</p>"},{"location":"Editor/sublime/","title":"sublime text","text":"<ul> <li> <p>plugins</p> <ul> <li> <p>SublimeCodeIntel</p> <pre><code>pip3 install --upgrade --pre CodeIntel\n</code></pre> </li> <li> <p>EasyClangComplete</p> <ul> <li>install llvm</li> </ul> </li> </ul> </li> </ul>"},{"location":"Editor/vs/","title":"Visual Studio","text":"<ul> <li> <p>Debug sub-solution?</p> <ul> <li>Right click solution name -&gt; Set as Startup Project</li> </ul> </li> <li> <p>VA</p> <ul> <li>Shift+Alt+O: Open file</li> <li>Shift+Alt+S: Find Symbols</li> <li> <p>Alt+O: Switch to .h/.cpp</p> </li> <li> <p>Comment</p> <ul> <li><code>VAssistX.SelectionToggleBlockComment</code></li> <li><code>VAssistX.SelectionToggleLineComment</code></li> </ul> </li> </ul> </li> <li> <p>VS</p> <ul> <li>Ctrl+Shift+L: Delete line &gt;&gt;&gt;&gt;&gt; ctrl+shift+k</li> <li>Ctrl+F4: Close Preview</li> <li>Ctrl+T, R: Open recently closed files</li> <li>Shift+Esc: Close Window</li> <li>Ctrl+K, Ctrl+X: Insert snippet</li> </ul> </li> </ul> <p>Change close tab shortcut https://stackoverflow.com/questions/32735755/visual-studio-shortcut-to-close-window-not-working https://www.meziantou.net/visual-studio-tips-and-tricks-open-recently-closed-files.htm</p>"},{"location":"Editor/vs/#usage","title":"Usage","text":"<ul> <li>Change keyboard shortcut<ul> <li></li> </ul> </li> </ul>"},{"location":"Editor/vs/#shortcuts","title":"Shortcuts","text":"<ul> <li>Ctrl+M+M: Fold/Unfold code</li> </ul>"},{"location":"Editor/vs/#extensions","title":"Extensions","text":"<ul> <li>Path: <code>%LocalAppData%\\Microsoft\\VisualStudio\\&lt;Visual Studio version&gt;\\Extensions\\</code></li> </ul>"},{"location":"Editor/vscode/","title":"vscode","text":""},{"location":"Editor/vscode/#keymap","title":"keymap","text":""},{"location":"Editor/vscode/#windows","title":"Windows","text":"<ul> <li> <p>indent</p> <ul> <li>left <code>ctrl+{</code></li> <li>right <code>ctrl+}</code></li> </ul> </li> <li> <p>fold/expand block</p> <ul> <li>fold <code>ctrl+shift+{</code></li> <li>expand <code>ctrl+shift+}</code></li> </ul> </li> </ul>"},{"location":"Editor/vscode/#macos","title":"macos","text":"<ul> <li>command \u2318</li> <li>option \u2325</li> <li>control \u2303</li> <li> <p>shift \u21e7</p> </li> <li> <p>indent</p> <ul> <li>left <code>cmd+{</code></li> <li>right <code>cmd+}</code></li> </ul> </li> <li> <p>fold/expand block</p> <ul> <li>fold <code>cmd+opt+{</code></li> <li>expand <code>cmd+opt+}</code></li> </ul> </li> </ul>"},{"location":"Editor/vscode/#other","title":"Other","text":"<ul> <li>List extensions from CLI</li> </ul> <pre><code>code --list-extensions\n</code></pre>"},{"location":"FreeNAS/pkg/","title":"pkg","text":""},{"location":"FreeNAS/pkg/#enable-pkg","title":"Enable <code>pkg</code>","text":"<pre><code>vim /usr/local/etc/pkg/repos/local.conf\n# yes -&gt; no\n\nvim /usr/local/etc/pkg/repos/FreeBSD.conf\n# no -&gt; yes\n</code></pre> <p>Waning</p> <p>Backup you config and Think before you run <code>pkg upgrade</code>. Otherwise, use <code>pkg upgrade &lt;package_name&gt;</code>.</p>"},{"location":"FreeNAS/pkg/#list-outdated-packages","title":"List outdated packages","text":"<pre><code>pkg version -l \\&lt;\n</code></pre>"},{"location":"FreeNAS/truenas_scale/","title":"TrueNAS scale","text":""},{"location":"FreeNAS/truenas_scale/#network-static-ipv4","title":"Network static ipv4","text":"<ol> <li>Install the system</li> <li>Go to shell</li> </ol> <pre><code>/etc/netcli\n</code></pre> <ol> <li>Choose network setting </li> <li>Done</li> </ol>"},{"location":"Frontend/nodejs/","title":"node.js","text":""},{"location":"Frontend/nodejs/#installation","title":"Installation","text":"<p>https://github.com/nodesource/distributions</p>"},{"location":"Frontend/nodejs/#ref","title":"Ref","text":"<p>https://oranwind.org/post-post-11/</p>"},{"location":"OS/Linux/Server%20Management/","title":"User","text":"<ul> <li>Add a user</li> </ul> <pre><code>$ sudo adduser &lt;username&gt;\n</code></pre> <ul> <li>Add a user to groups</li> </ul> <pre><code>$ sudo usermod -a -G group1,group2 user\n</code></pre> <ul> <li>Add a user to sudoer in Debian</li> </ul> <pre><code>$ su -\n# usermod -a -G sudo &lt;username&gt;\n\nsudo -l -U &lt;username&gt; # check if the user has sudo\n</code></pre>"},{"location":"OS/Linux/Server%20Management/#misc","title":"Misc","text":"<ul> <li>Change the hostname</li> </ul> <pre><code>sudo hostname new-server-name-here\n# Also edit /etc/hostname and /etc/hosts\n# OR hostnamectl set-hostname new-server-name-here\n</code></pre>"},{"location":"OS/Linux/apt/","title":"apt","text":""},{"location":"OS/Linux/apt/#mirror","title":"Mirror","text":"<p>Switch to twds mirror</p> <ul> <li> <p>debian     <pre><code># sed -i 's|http://deb.debian.org|https://mirror.twds.com.tw|g' sources.list\n# sed -i 's|http://security.debian.org|https://mirror.twds.com.tw/debian-security|g' sources.list\n</code></pre></p> </li> <li> <p>pve</p> <ul> <li>Use debian script</li> <li>Disable PVE-Enterperise</li> <li>LXC template src     <pre><code># cp /usr/share/perl5/PVE/APLInfo.pm /usr/share/perl5/PVE/APLInfo.pm_back\n# sed -i 's|http://download.proxmox.com|https://mirror.twds.com.tw/proxmox|g' /usr/share/perl5/PVE/APLInfo.pm\n# systemctl restart pvedaemon\n</code></pre></li> </ul> </li> </ul>"},{"location":"OS/Linux/apt/#ref","title":"Ref","text":"<p>PVE\u7cfb\u5217-\u66f4\u6362\u8f6f\u4ef6&amp;\u5bb9\u5668\u6e90 https://gvnote.com/p/replace-lxc-container-source/</p>"},{"location":"OS/Linux/centos/","title":"CentOS","text":""},{"location":"OS/Linux/centos/#yum","title":"yum","text":"<ul> <li>List installed packages <pre><code>sudo yum list installed\n</code></pre></li> </ul>"},{"location":"OS/Linux/centos/#install-htop","title":"Install htop","text":"<pre><code>sudo yum -y install epel-release &amp;&amp; sudo yum -y update\nsudo yum -y install htop\n</code></pre>"},{"location":"OS/Linux/centos/#firewall","title":"Firewall","text":"<pre><code>sudo firewall-cmd --permanent --zone=public --add-service=http\nsudo firewall-cmd --permanent --zone=public --add-service=https\nsudo firewall-cmd --zone=public --permanent --add-port=8080/tcp\nsudo firewall-cmd --reload\n</code></pre>"},{"location":"OS/Linux/centos/#register-as-a-service","title":"Register as a service","text":"<ul> <li>Write a <code>xxx.service</code> file and put it into <code>/etc/systemd/system/xxx.service</code></li> </ul> <pre><code>[Unit]\nDescription=&lt;description&gt;\n\n[Service]\nRestart=on-failure\nRestartSec=60s\nType=simple\nUser=&lt;username&gt;\nGroup=&lt;group&gt;\nExecStart=&lt;here is your command&gt;\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <ul> <li>TODO <pre><code>systemctl daemon-reload\n</code></pre></li> </ul>"},{"location":"OS/Linux/centos/#setting-up-the-network","title":"Setting up the network","text":"<pre><code>cd /etc/sysconfig/network-scripts/\nsudo vi ifcfg-eXX\n\nIPADDR, PREFIX, GATEWAY, DNS1, DNS2\n\nsudo ifdown ifcfg-eXX\nsudo ifup ifcfg-eXX\n</code></pre>"},{"location":"OS/Linux/centos/#keys","title":"Keys","text":"<pre><code>sudo bash -c \"curl https://www.centos.org/keys/RPM-GPG-KEY-CentOS-Official &gt; /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial\"\nsudo yum update -y\n</code></pre>"},{"location":"OS/Linux/crontab/","title":"crontab - Linux","text":""},{"location":"OS/Linux/crontab/#references","title":"References","text":"<p>https://serverfault.com/questions/449651/why-is-my-crontab-not-working-and-how-can-i-troubleshoot-it</p>"},{"location":"OS/Linux/dhclient/","title":"dhclient - DHCP client","text":""},{"location":"OS/Linux/dhclient/#renew-a-dhcp-lease","title":"Renew a DHCP lease","text":"<pre><code># Release\nsudo dhclient -r\n# Obtain\nsudo dhclient\n</code></pre>"},{"location":"OS/Linux/du/","title":"du","text":"<ul> <li>List only 1 directories and sort by size</li> </ul> <pre><code>du -hd1 | sort -h\n</code></pre> <pre><code>4.0K    ./download_complete\n8.0K    ./.gnupg\n8.0K    ./.ssh\n12K     ./.config\n17M     ./.aria2\n27M     ./.cache\n211M    ./yourls\n600M    ./.vscode-server\n5.0G    ./leak\n16G     ./upload_dir\n17G     ./download\n38G     .\n</code></pre>"},{"location":"OS/Linux/man/","title":"man","text":"<pre><code>man [section] name\n</code></pre> <ul> <li>Search in man</li> </ul> <pre><code>man -k name\n</code></pre>"},{"location":"OS/Linux/man/#manual-page-sections","title":"Manual page sections","text":"<ol> <li>User commands</li> <li>System calls</li> <li>C library functions</li> <li>Devices and special files</li> <li>File formats and conventions</li> <li>Games et al.</li> <li>Miscellaneous</li> <li>System administration tools and daemons</li> </ol>"},{"location":"OS/Linux/openssl/","title":"Generate SSL Certificate","text":"<pre><code>openssl req -new &gt; cert.csr\nopenssl rsa -in privkey.pem -out key.pem\nopenssl x509 -in cert.csr -out cert.pem -req -signkey key.pem -days 1001\n</code></pre>"},{"location":"OS/Linux/openssl/#ref","title":"Ref","text":"<p>https://stackoverflow.com/questions/10175812/how-to-generate-a-self-signed-ssl-certificate-using-openssl</p>"},{"location":"OS/Linux/pacman/","title":"pacman","text":"<p>Arch Linux package manager utility.</p> <ul> <li>Synchronize and update all packages</li> </ul> <pre><code>pacman -Syu\n</code></pre> <ul> <li>Install</li> </ul> <pre><code>pacman -S package_name\n</code></pre> <ul> <li>Search</li> </ul> <pre><code>pacman -Ss package_name\n</code></pre> <ul> <li>Display version</li> </ul> <pre><code>pacman -Q  package_name\n</code></pre> <ul> <li>Display file list provided by local package</li> </ul> <pre><code>pacman -Ql package_name\n</code></pre> <ul> <li>Check the local package database</li> </ul> <pre><code>pacman -Qk package_name\n</code></pre>"},{"location":"OS/Linux/process/","title":"Process","text":"<ul> <li> <p>Terminate a process <pre><code>sudo pkill -&lt;sig&gt; &lt;name&gt;\n</code></pre></p> </li> <li> <p>Find the pid</p> </li> </ul> <pre><code>pgrep \"&lt;name&gt;\"\n</code></pre> <ul> <li>Task manager like</li> </ul> <pre><code>sudo htop\n</code></pre>"},{"location":"OS/Linux/ssh/","title":"ssh","text":"<ul> <li>Generate the ssh key</li> </ul> <pre><code>$ mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh   # Create the .ssh directory\n$ ssh-keygen  # Creates id_rsa* in ~/.ssh\n\n# With comment &amp; path\n$ ssh-keygen -t rsa -b 4096 -C \"your_email@example.com\" -f $HOME/.ssh/id_rsa\n</code></pre> <ul> <li>Copy the ssh public key to server</li> </ul> <pre><code>$ ssh-copy-id USER@HOST\nOR\n$ ssh USER@HOST 'mkdir -p ~/.ssh;chmod 700 ~/.ssh;cat &gt;&gt; ~/.ssh/authorized_keys' &lt; ~/.ssh/id_rsa.pub\n</code></pre> <ul> <li>ssh-copy-id on windows</li> </ul> <pre><code>type %userprofile%\\.ssh\\id_rsa.pub | ssh &lt;host&gt; \"cat &gt;&gt; .ssh/authorized_keys\"\n</code></pre>"},{"location":"OS/Linux/ssh/#sshd","title":"sshd","text":"<ul> <li>Disable password authentication</li> <li>in <code>/etc/ssh/sshd_config</code></li> </ul> <pre><code>PasswordAuthentication no\nPubkeyAuthentication yes\n</code></pre> <p>And restart the sshd service</p> <pre><code>$ sudo service sshd restart\n$ sudo systemctl restart sshd  # OR\n$ sudo /etc/init.d/ssh restart # OR\n</code></pre>"},{"location":"OS/Linux/ssh/#tunnel","title":"Tunnel","text":"<ul> <li>reverse tunnel</li> </ul> <pre><code># On target\nssh -NfR 12345:localhost:22 username@myhost\n# On myhost\nssh localhost -p 12345\n</code></pre> <ul> <li>SOCK5 proxy</li> <li><code>-C</code> Compress</li> </ul> <pre><code>ssh -gfND 8080 username@&lt;your host&gt;\n</code></pre> <p>TODO: autossh</p>"},{"location":"OS/Linux/ssh/#windows-sftp","title":"Windows sftp","text":"<ul> <li> <p>Setting &gt; Apps &gt; Optional features &gt; Add an optional feature &gt; OpenSSH Server</p> </li> <li> <p>Powershell Run as administrator</p> </li> </ul> <pre><code>Start-Service sshd\nSet-Service -Name sshd -StartupType 'Automatic'\nNew-NetFirewallRule -Name sshd -DisplayName 'OpenSSH Server (sshd)' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22\n</code></pre>"},{"location":"OS/Linux/ssh/#references","title":"References","text":"<p>https://kb.iu.edu/d/aews https://blog.gtwang.org/linux/linux-ssh-public-key-authentication/ https://askubuntu.com/questions/346857/how-do-i-force-ssh-to-only-allow-users-with-a-key-to-log-in</p> <p>Reverse SSH Tunnel \u53cd\u5411\u6253\u6d1e\u5be6\u9304 https://fred-zone.blogspot.com/2010/08/reverse-ssh-tunnel.html</p> <p>SSH Tunnel \u901a\u9053\u6253\u9020\u52a0\u5bc6 Proxy\uff0c\u900f\u904e\u5916\u90e8 Linux \u4f3a\u670d\u5668\u4e0a\u7db2 https://blog.gtwang.org/linux/ssh-tunnel-socks-proxy-forwarding-tutorial/</p> <p>https://berglas.github.io/dest/articles/2020/7/note_SFTP_setting_1.html</p> <p>https://winscp.net/eng/docs/guide_windows_openssh_server</p>"},{"location":"OS/Linux/sudo/","title":"sudo","text":""},{"location":"OS/Linux/sudo/#use-in-shell-script","title":"Use in shell script","text":"<ul> <li><code>-S</code> Read the password from STDIN</li> </ul> <pre><code>echo mypassword | sudo -S command\n</code></pre>"},{"location":"OS/Linux/supervisor/","title":"Supervisor","text":""},{"location":"OS/Linux/supervisor/#installation","title":"Installation","text":"<ul> <li>CentOS7</li> </ul> <pre><code>sudo yum install epel-release\nsudo yum install supervisor\n</code></pre> <ul> <li>Config path: <code>/etc/supervisord.conf</code><ul> <li>config path of service managed by supervisor<ul> <li><code>/etc/supervisord.d/</code></li> <li><code>/etc/supervisor/conf.d</code></li> </ul> </li> </ul> </li> </ul>"},{"location":"OS/Linux/supervisor/#configuration","title":"Configuration","text":""},{"location":"OS/Linux/supervisor/#config-for-systemd","title":"Config for systemd","text":"<ul> <li>File @ <code>/etc/systemd/system/supervisord.service</code></li> </ul> <pre><code>[Unit]\nDescription=Supervisor daemon\n\n[Service]\nType=forking\nExecStart=/usr/bin/supervisord\nExecStop=/usr/bin/supervisorctl $OPTIONS shutdown\nExecReload=/usr/bin/supervisorctl $OPTIONS reload\nKillMode=process\nRestart=on-failure\nRestartSec=42s\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <ul> <li> <p>Commands</p> <pre><code>systemctl enable supervisord.service\n</code></pre> </li> </ul>"},{"location":"OS/Linux/supervisor/#config-for-supervisor","title":"Config for supervisor","text":"<pre><code>[program:helloworld]  ;\u7a0b\u5e8f\u7684\u540d\u79f0\ncommand = dotnet HelloWorld.dll ;\u6267\u884c\u7684\u547d\u4ee4\ndirectory = /root/www/ ;\u547d\u4ee4\u6267\u884c\u7684\u76ee\u5f55\nenvironment = ASPNETCORE__ENVIRONMENT=Production  ;\u73af\u5883\u53d8\u91cf\nuser = root                                       ;\u6267\u884c\u8fdb\u7a0b\u7684\u7528\u6237\nstopsignal = INT\nautostart = true  ;\u662f\u5426\u81ea\u52a8\u542f\u52a8\nautorestart = true  ;\u662f\u5426\u81ea\u52a8\u91cd\u542f\nstartsecs = 1  ;\u81ea\u52a8\u91cd\u542f\u95f4\u9694\nstderr_logfile = /var/log/helloworld.err.log  ;\u6807\u51c6\u9519\u8bef\u65e5\u5fd7\nstdout_logfile = /var/log/helloworld.out.log  ;\u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\n</code></pre>"},{"location":"OS/Linux/supervisor/#cli","title":"CLI","text":"<ul> <li> <p>Restart supervisor</p> <ul> <li><code>sudo supervisorctl reload</code></li> </ul> </li> <li> <p>Soft restart</p> <ul> <li><code>sudo supervisorctl reread &amp;&amp; sudo supervisorctl update</code></li> </ul> </li> </ul> <pre><code>supervisorctl shutdown #\u5173\u95ed\u6240\u6709\u4efb\u52a1\n\nsupervisorctl stop|start program_name\n\nsupervisorctl status #\u67e5\u770b\u6240\u6709\u4efb\u52a1\u72b6\u6001\n</code></pre>"},{"location":"OS/Linux/supervisor/#reference","title":"Reference","text":"<p>https://www.chengxulvtu.com/supervisor-on-centos-7/</p>"},{"location":"OS/Linux/systemd/","title":"systemd","text":"<ul> <li> <p>paths</p> <ul> <li><code>/etc/systemd/system/</code></li> <li><code>/usr/lib/systemd/</code></li> <li>TODO: diff</li> </ul> </li> <li> <p>Reload files</p> </li> </ul> <pre><code>sudo systemctl daemon-reload\n</code></pre>"},{"location":"OS/Linux/tar/","title":"Compression Tools","text":""},{"location":"OS/Linux/tar/#tar","title":"tar","text":"<ul> <li> <p>File exts <pre><code>*.Z              compress \u58d3\u7e2e\u7684\u6a94\u6848\n*.zip            zip \u58d3\u7e2e\u7684\u6a94\u6848\n*.gz             gzip \u58d3\u7e2e\u7684\u6a94\u6848\n*.bz2            bzip2 \u58d3\u7e2e\u7684\u6a94\u6848\n*.xz             xz \u58d3\u7e2e\u7684\u6a94\u6848\n\n*.tar            tar \u6253\u5305\u7684\u8cc7\u6599\uff0c\u6c92\u6709\u58d3\u7e2e\n*.tar.gz == .tgz tar \u6253\u5305\u7684\u6a94\u6848\uff0c\u7531 gzip \u58d3\u7e2e\n\n*.tar.bz2        tar \u6253\u5305\u7684\u6a94\u6848\uff0c\u7531 bzip2 \u58d3\u7e2e\n  == .tbz == tb2\n\n*.tar.xz         tar \u6253\u5305\u7684\u6a94\u6848\uff0c\u7531 xz \u58d3\u7e2e\n  == .txz\n</code></pre></p> </li> <li> <p>Overview <pre><code>tar \u64cd\u4f5c \u9078\u9805 \u6a94\u6848...\n</code></pre></p> </li> <li> <p>\u64cd\u4f5c</p> <ul> <li><code>c</code> \u5efa\u7acb(Create) tar</li> <li><code>x</code> \u89e3\u958b(Extract) tar</li> <li><code>t</code> \u5217\u51fa tar \u4e2d\u6a94\u6848</li> </ul> </li> <li> <p>\u9078\u9805</p> <ul> <li><code>v</code> \u8a73\u7d30\u8f38\u51fa\uff08\u9032\u5ea6\uff09verbose</li> <li><code>f</code> tar \u540d\u7a31\uff08\u63a5\u8f09\u5f8c\u982d\uff09</li> </ul> </li> <li> <p>\u58d3\u7e2e\u683c\u5f0f</p> <ul> <li><code>z</code> gzip</li> <li><code>j</code> bzip2</li> <li><code>J</code> xz</li> <li><code>--lzma</code> lzma</li> </ul> </li> </ul>"},{"location":"OS/Linux/tar/#cheat","title":"Cheat","text":"<ul> <li>Pack</li> </ul> <pre><code>tar cvf name.tar file1 dir1/ ... # no compression\ntar czvf name.tar.gz ...         # gzip\ntar cjvf name.tar.bz2 ...        # bzip2\ntar cJvf name.tar.xz ...         # xz\ntar --lzma cvf name.tar.lzma ... # lzma\n</code></pre> <ul> <li>Pack but multithreaded</li> </ul> <pre><code>tar -I pigz -cf tarball.tgz files   # gz\ntar -I pbzip2 -cf tarball.tbz files # bz2\ntar -I pixz -cf tarball.txz files   # xz\ntar -I pxz -cf tarball.txz files    # xz\n</code></pre> <ul> <li>Extract</li> </ul> <pre><code>tar xvf name.tar.*        # \u89e3\u58d3\u5230\u7576\u524d\u76ee\u9304\ntar xvf name.tar.* -C dir # \u89e3\u58d3\u5230\u6307\u5b9a\u76ee\u9304\ntar xvf name.tar.* path/to/file... # \u89e3\u58d3\u7279\u5b9a\u7684\u6a94\u6848\n\n--wildcards \"*.html\" # \u7b26\u5408 pattern\n-k  # \u4e0d\u8986\u84cb\n-p  # \u4fdd\u7559\u6b0a\u9650\n</code></pre> <ul> <li> <p>List files in tar.* <pre><code>tar tf name.tar   # like ls\ntar tvf name.tar  # like ls -l\n</code></pre> </p> </li> <li> <p>\u5176\u4ed6</p> </li> </ul> <pre><code>--exclude=PATTERN   # \u6392\u9664\u7684\u6a94\u6848\n--X FILE            # \u6392\u9664\u7684\u5217\u8868(\u5beb\u5728FILE\u88e1)\n</code></pre>"},{"location":"OS/Linux/tar/#reference","title":"Reference","text":"<p>tar(1) - Linux man page https://linux.die.net/man/1/tar</p> <p>GNU / Linux \u5404\u7a2e\u58d3\u7e2e\u8207\u89e3\u58d3\u7e2e\u6307\u4ee4 http://note.drx.tw/2008/04/command.html</p> <p>UNIX/Linux \u6a94\u6848\u58d3\u7e2e\u8207\u5099\u4efd\u5de5\u5177 tar \u6307\u4ee4\u4f7f\u7528\u6559\u5b78\u8207\u7bc4\u4f8b https://blog.gtwang.org/linux/tar-command-examples-in-linux-2/</p> <p>\u9ce5\u54e5 http://linux.vbird.org/linux_basic/0240tarcompress.php</p> <p>cheatsheet http://cht.sh/tar</p> <p>wiki https://zh.wikipedia.org/wiki/Tar</p>"},{"location":"OS/Linux/watch_log/","title":"Watch log","text":"<pre><code>tailf -n24 &lt;file&gt;\nless ++GF &lt;file&gt;\n</code></pre>"},{"location":"OS/Linux/watch_log/#ref","title":"Ref","text":"<p>https://unix.stackexchange.com/questions/4351/is-there-a-way-to-dynamically-refresh-the-less-command</p>"},{"location":"OS/Linux/tools/jq/","title":"jq","text":""},{"location":"OS/Linux/tools/jq/#installation","title":"Installation","text":""},{"location":"OS/Linux/tools/jq/#centos","title":"CentOS","text":"<pre><code>sudo yum -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nsudo yum install jq -y\n</code></pre>"},{"location":"OS/Linux/tools/jq/#usage","title":"Usage","text":"<p>https://cameronnokes.com/blog/jq-cheatsheet/</p> <ul> <li>Raw output (without double quotes)<ul> <li><code>-r</code>, <code>--raw-output</code></li> </ul> </li> </ul>"},{"location":"OS/Linux/tools/netdata/","title":"netdata","text":"<p>Netdata \u662f\u4e00\u7a2e\u5373\u6642\u76e3\u63a7\u7cfb\u7d71\u6548\u80fd\u7684\u8edf\u9ad4\uff0c\u901a\u5e38\u88ab\u7528\u4f86\u91dd\u5c0d\u5982\u7db2\u7ad9\u4f3a\u670d\u5668\u3001\u8cc7\u6599\u5eab\u7b49\u91cd\u8981\u61c9\u7528\u7db2\u8def\u670d\u52d9\u6216CPU\u3001\u786c\u789f\u7b49\u786c\u9ad4\u8cc7\u6e90\u63d0\u4f9b\u5373\u6642\u7684\u6548\u80fd\u76e3\u63a7\u3002</p>"},{"location":"OS/Linux/tools/netdata/#installation","title":"Installation","text":"<ul> <li> <p>Add to <code>/etc/apt/sources.list</code></p> <ul> <li>debian     <pre><code>deb http://repo.netdata.cloud/repos/stable/debian/ bookworm/\ndeb https://repo.netdata.cloud/repos/repoconfig/debian bookworm/\n</code></pre></li> </ul> </li> <li> <p>Add apt key</p> <ul> <li>Old way <pre><code># wget -qO - https://repo.netdata.cloud/netdatabot.gpg.key | apt-key add -\n# or\n# apt-key adv --fetch-keys https://repo.netdata.cloud/netdatabot.gpg.key\n\n# Export Key\n# apt-key list\n# apt-key export 65F56346 | gpg --dearmour -o /etc/apt/trusted.gpg.d/netdatabot.gpg\n</code></pre></li> <li>New way? <pre><code>wget -qO /etc/apt/trusted.gpg.d/netdatabot.gpg https://repo.netdata.cloud/netdatabot.gpg.key\n</code></pre></li> </ul> </li> <li> <p>Install     <pre><code># apt update\n# apt install netdata\n</code></pre></p> </li> <li> <p>Install Plugins     <pre><code># netdata-plugin-freeipmi netdata-plugin-apps netdata-plugin-network-viewer\n</code></pre></p> </li> </ul>"},{"location":"OS/Windows/Remote%20Access%20With%20Blank%20Password/","title":"Remote Access With Blank Password","text":"<p>Danger</p> <p>\u5141\u8a31\u7a7a\u767d\u5bc6\u78bc\u767b\u5165\u975e\u5e38\u5371\u96aa\uff0c\u8acb\u77e5\u9053\u4f60\u5728\u505a\u5565</p> <ul> <li><code>gpedit.msc</code> &gt; Computer Configuration\\Windows Settings\\Security Settings\\Local Policies\\Security Options\\Accounts<ul> <li>\u95dc\u9589\u5373\u53ef</li> </ul> </li> </ul> <pre><code>Windows Registry Editor Version 5.00\n\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Lsa]\n\"LimitBlankPasswordUse\"=dword:00000000\n</code></pre>"},{"location":"OS/Windows/Remote%20Access%20With%20Blank%20Password/#ref","title":"Ref","text":"<p>https://superuser.com/questions/106917/remote-desktop-without-a-password https://harshasnmp.wordpress.com/2018/03/21/windows-allow-remote-desktop-access-with-blank-passwords/</p>"},{"location":"OS/Windows/Right%20Menu/","title":"Right Click Menu","text":"<p>Info</p> <p>Save as <code>.reg</code></p>"},{"location":"OS/Windows/Right%20Menu/#notes","title":"Notes","text":"<ul> <li>Need root<ul> <li><code>HKEY_CLASSES_ROOT\\*\\shell</code> all ext</li> <li><code>HKEY_CLASSES_ROOT\\Folder\\shell</code> Folders</li> </ul> </li> </ul>"},{"location":"OS/Windows/Right%20Menu/#windows-terminal","title":"Windows Terminal","text":"<pre><code>Windows Registry Editor Version 5.00\n\n[HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\wt]\n@=\"Windows terminal here\"\n\"Icon\"=\"%USERPROFILE%\\\\AppData\\\\Local\\\\terminal\\\\wt_32.ico\"\n\n[HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\wt\\command]\n@=\"%LOCALAPPDATA%\\\\Microsoft\\\\WindowsApps\\\\wt.exe\"\n</code></pre>"},{"location":"OS/Windows/Right%20Menu/#sublime-text","title":"sublime text","text":"<pre><code>Windows Registry Editor Version 5.00\n\n[HKEY_CLASSES_ROOT\\*\\shell\\Edit with Sublime Text]\n@=\"Edit with &amp;Sublime Text\"\n\"Icon\"=\"C:\\\\Program Files\\\\Sublime Text\\\\sublime_text.exe,0\"\n\"MuiVerb\"=\"Edit with Sublime Text\"\n\n[HKEY_CLASSES_ROOT\\*\\shell\\Edit with Sublime Text\\command]\n@=\"C:\\\\Program Files\\\\Sublime Text\\\\sublime_text.exe \\\"%1\\\"\"\n\n[HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\Sublime]\n@=\"Open with Sublime Text\"\n\"Icon\"=\"C:\\\\Program Files\\\\Sublime Text\\\\sublime_text.exe,0\"\n\n[HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\Sublime\\command]\n@=\"\\\"C:\\\\Program Files\\\\Sublime Text\\\\sublime_text.exe\\\" \\\"%V\\\"\"\n\n[HKEY_CLASSES_ROOT\\Directory\\shell\\Sublime]\n@=\"Open with Sublime Text\"\n\"Icon\"=\"C:\\\\Program Files\\\\Sublime Text\\\\sublime_text.exe,0\"\n\n[HKEY_CLASSES_ROOT\\Directory\\shell\\Sublime\\command]\n@=\"\\\"C:\\\\Program Files\\\\Sublime Text\\\\sublime_text.exe\\\" \\\"%1\\\"\"\n</code></pre>"},{"location":"OS/Windows/Right%20Menu/#neovim","title":"NeoVim","text":"<pre><code>Windows Registry Editor Version 5.00\n\n[HKEY_CLASSES_ROOT\\*\\shell\\Open in NeoVim]\n\"Icon\"=hex(2):43,00,3a,00,5c,00,50,00,72,00,6f,00,67,00,72,00,61,00,6d,00,20,\\\n  00,46,00,69,00,6c,00,65,00,73,00,5c,00,4e,00,65,00,6f,00,76,00,69,00,6d,00,\\\n  5c,00,62,00,69,00,6e,00,5c,00,6e,00,76,00,69,00,6d,00,2d,00,71,00,74,00,2e,\\\n  00,65,00,78,00,65,00,00,00\n\n[HKEY_CLASSES_ROOT\\*\\shell\\Open in NeoVim\\command]\n@=\"\\\"C:\\\\Program Files\\\\Neovim\\\\bin\\\\nvim-qt.exe\\\" \\\"%1\\\"\"\n\n[HKEY_CURRENT_USER\\SOFTWARE\\Classes\\*\\shell\\Open in NeoVim]\n\"Icon\"=hex(2):43,00,3a,00,5c,00,50,00,72,00,6f,00,67,00,72,00,61,00,6d,00,20,\\\n  00,46,00,69,00,6c,00,65,00,73,00,5c,00,4e,00,65,00,6f,00,76,00,69,00,6d,00,\\\n  5c,00,62,00,69,00,6e,00,5c,00,6e,00,76,00,69,00,6d,00,2d,00,71,00,74,00,2e,\\\n  00,65,00,78,00,65,00,00,00\n\n[HKEY_CURRENT_USER\\SOFTWARE\\Classes\\*\\shell\\Open in NeoVim\\command]\n@=\"\\\"C:\\\\Program Files\\\\Neovim\\\\bin\\\\nvim-qt.exe\\\" \\\"%1\\\"\"\n</code></pre>"},{"location":"OS/Windows/Right%20Menu/#ref","title":"Ref","text":"<p>https://github.com/microsoft/terminal/issues/1060</p>"},{"location":"OS/Windows/Shortcut/","title":"Shortcut to settings","text":"<ul> <li> <p>Edit environment variable window</p> <pre><code>rundll32.exe sysdm.cpl,EditEnvironmentVariables\n</code></pre> </li> <li> <p>Device management: <code>devmgmt.msc</code></p> </li> </ul>"},{"location":"OS/Windows/Shortcut/#reference","title":"Reference","text":"<p>Create Environment Variables Shortcut in Windows 10 https://winaero.com/create-environment-variables-shortcut-windows-10/</p> <p>Windows 10 Rundll32 Commands \u2013 the complete list https://winaero.com/windows-10-rundll32-command-list/</p>"},{"location":"OS/Windows/Startup/","title":"Startup","text":"<ul> <li> <p>Use <code>Run</code> to navigate to the startup folder</p> <ul> <li>All Users: <code>shell:common startup</code><ul> <li>Path: <code>C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\StartUp</code></li> </ul> </li> <li>Current User: <code>shell:startup</code><ul> <li>Path: <code>C:\\Users\\&lt;UserName&gt;\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup</code></li> </ul> </li> </ul> </li> <li> <p>Registry</p> <ul> <li><code>HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Run</code><ul> <li>Local Machine</li> </ul> </li> <li><code>HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Run</code><ul> <li>Current User</li> </ul> </li> </ul> </li> </ul>"},{"location":"OS/Windows/Startup/#ref","title":"Ref","text":"<p>https://community.spiceworks.com/how_to/158583-how-to-remove-startup-program-in-registry-editor</p>"},{"location":"OS/Windows/VPN/","title":"VPN","text":""},{"location":"OS/Windows/VPN/#remove-default-route-and-add-only-subnet-routes","title":"Remove default route and add only subnet routes","text":""},{"location":"OS/Windows/VPN/#remove-default-route-through-the-vpn","title":"Remove default route through the VPN","text":"<ul> <li>Run <code>ncpa.cpl</code> and right-click on the VPN you want to edit and select \"Properties\"</li> <li>On tab \"Networking\", select \"TCP/IPv4\" and click \"Properties\"</li> <li>Click \"Advanced\"</li> <li>Uncheck the \"Use default gateway on remote network\"</li> </ul>"},{"location":"OS/Windows/VPN/#add-only-subnet","title":"Add only subnet","text":"<pre><code>route add &lt;IP&gt; mask &lt;MASK&gt; &lt;GATEWAY&gt; [metric X] [if x]\n</code></pre>"},{"location":"OS/Windows/VPN/#references","title":"References","text":"<p>How to route only certain IP Addresses to your VPN in Windows Version 0.51 http://bootstrike.com/Articles/Win7Routing/</p> <p>How can I make the Windows VPN route selective traffic (by destination network)? https://superuser.com/questions/12022/how-can-i-make-the-windows-vpn-route-selective-traffic-by-destination-network</p>"},{"location":"OS/Windows/Windows%20Terminal/","title":"Windows Terminal","text":"<ul> <li>Settings<ul> <li>Terminals<ul> <li>cmd</li> <li>powershell</li> <li>msys2</li> <li>cmder</li> </ul> </li> </ul> </li> </ul> <pre><code>// To view the default settings, hold \"alt\" while clicking on the \"Settings\" button.\n// For documentation on these settings, see: https://aka.ms/terminal-documentation\n{\n    \"$schema\": \"https://aka.ms/terminal-profiles-schema\",\n\n    \"defaultProfile\": \"{0caa0dad-35be-5f56-a8ff-afceeeaa6101}\",\n\n    \"disabledProfileSources\": [\n        \"Windows.Terminal.Azure\"\n    ],\n\n    // You can add more global application settings here.\n    // To learn more about global settings, visit https://aka.ms/terminal-global-settings\n\n    // If enabled, selections are automatically copied to your clipboard.\n    \"copyOnSelect\": false,\n\n    // If enabled, formatted data is also copied to your clipboard\n    \"copyFormatting\": false,\n\n    // A profile specifies a command to execute paired with information about how it should look and feel.\n    // Each one of them will appear in the 'New Tab' dropdown,\n    //   and can be invoked from the commandline with `wt.exe -p xxx`\n    // To learn more about profiles, visit https://aka.ms/terminal-profile-settings\n    \"profiles\":\n    {\n        \"defaults\":\n        {\n            // Put settings here that you want to apply to all profiles.\n            \"startingDirectory\": \".\"\n        },\n        \"list\":\n        [\n            {\n                // Make changes here to the cmd.exe profile.\n                \"guid\": \"{0caa0dad-35be-5f56-a8ff-afceeeaa6101}\",\n                \"name\": \"Command Prompt\",\n                \"commandline\": \"cmd.exe\",\n                \"hidden\": false,\n                // \"startingDirectory\": \"%USERPROFILE%\",\n            },\n            {\n                // Make changes here to the powershell.exe profile.\n                \"guid\": \"{61c54bbd-c2c6-5271-96e7-009a87ff44bf}\",\n                \"name\": \"Windows PowerShell\",\n                \"commandline\": \"powershell.exe\",\n                \"hidden\": false,\n                // \"startingDirectory\": \"%USERPROFILE%\",\n            },\n            {\n                \"guid\": \"{b453ae62-4e3d-5e58-b989-0a998ec441b8}\",\n                \"hidden\": false,\n                \"name\": \"Azure Cloud Shell\",\n                \"source\": \"Windows.Terminal.Azure\",\n                // \"startingDirectory\": \"%USERPROFILE%\",\n            },\n            {\n                \"name\": \"Windows Terminal (elevated)\",\n                \"commandline\": \"powershell.exe -command Start-Process -Verb RunAs \\\"shell:appsFolder\\\\Microsoft.WindowsTerminal_8wekyb3d8bbwe!App\\\"\",\n                \"hidden\": false,\n                \"icon\": \"ms-appx:///Images/Square44x44Logo.targetsize-32.png\",\n                // \"startingDirectory\": \"%USERPROFILE%\",\n            },\n            {\n                \"acrylicOpacity\": 1.0,\n                \"closeOnExit\": true,\n                \"colorScheme\": \"Campbell\",\n                \"commandline\": \"cmd.exe /c \\\"set MSYSTEM=MINGW32&amp;&amp; set MSYS=winsymlinks:nativestrict&amp;&amp; set MSYS2_PATH_TYPE=inherit&amp;&amp; C:/msys64/usr/bin/bash.exe --login\\\"\",\n                \"cursorColor\": \"#FFFFFF\",\n                \"cursorShape\": \"bar\",\n                // \"fontFace\": \"Consolas\",\n                // \"fontSize\": 10,\n                \"guid\": \"{1597a4d0-b666-4b1f-a8d3-79af62638679}\",\n                \"historySize\": 9001,\n                \"icon\": \"C:\\\\msys64\\\\msys2.ico\",\n                \"name\": \"MSYS2 32bit\",\n                \"padding\": \"0, 0, 0, 0\",\n                \"snapOnInput\": true,\n                // \"startingDirectory\": \"%USERPROFILE%\",\n                \"useAcrylic\": true\n            },\n            {\n                \"acrylicOpacity\": 1.0,\n                \"closeOnExit\": true,\n                \"colorScheme\": \"Campbell\",\n                \"commandline\": \"cmd.exe /c \\\"set MSYSTEM=MINGW64&amp;&amp; set MSYS=winsymlinks:nativestrict&amp;&amp; set MSYS2_PATH_TYPE=inherit&amp;&amp; C:/msys64/usr/bin/bash.exe --login\\\"\",\n                \"cursorColor\": \"#FFFFFF\",\n                \"cursorShape\": \"bar\",\n                // \"fontFace\": \"Consolas\",\n                // \"fontSize\": 10,\n                \"guid\": \"{54a0ab5e-1f34-4e0a-ae96-0eb964e11f68}\",\n                \"historySize\": 9001,\n                \"icon\": \"C:\\\\msys64\\\\msys2.ico\",\n                \"name\": \"MSYS2 64bit\",\n                \"padding\": \"0, 0, 0, 0\",\n                \"snapOnInput\": true,\n                // \"startingDirectory\": \"%USERPROFILE%\",\n                \"useAcrylic\": true\n            },\n            {\n                \"guid\": \"{cd7ea819-1bda-4d3d-8a32-db0e96bc72ad}\",\n                \"acrylicOpacity\" : 1.0,\n                \"closeOnExit\" : true,\n                \"colorScheme\" : \"Campbell\",\n                \"commandline\" : \"cmd.exe /k E:\\\\cmder\\\\vendor\\\\init.bat\",\n                \"cursorColor\" : \"#FFFFFF\",\n                \"cursorShape\" : \"bar\",\n                \"fontFace\" : \"Consolas\",\n                \"fontSize\" : 13,\n                \"historySize\" : 9001,\n                \"icon\" : \"E:\\\\cmder\\\\cmder\\\\icons\\\\cmder.ico\",\n                \"name\" : \"Cmder\",\n                \"snapOnInput\" : true,\n                \"useAcrylic\" : true\n            },\n            {\n                \"guid\": \"{2c4de342-38b7-51cf-b940-2309a097f518}\",\n                \"hidden\": false,\n                \"name\": \"Ubuntu\",\n                \"source\": \"Windows.Terminal.Wsl\"\n            }\n        ]\n    },\n\n    // Add custom color schemes to this array.\n    // To learn more about color schemes, visit https://aka.ms/terminal-color-schemes\n    \"schemes\": [],\n\n    // Add custom actions and keybindings to this array.\n    // To unbind a key combination from your defaults.json, set the command to \"unbound\".\n    // To learn more about actions and keybindings, visit https://aka.ms/terminal-keybindings\n    \"actions\":\n    [\n        // Copy and paste are bound to Ctrl+Shift+C and Ctrl+Shift+V in your defaults.json.\n        // These two lines additionally bind them to Ctrl+C and Ctrl+V.\n        // To learn more about selection, visit https://aka.ms/terminal-selection\n        { \"command\": {\"action\": \"copy\", \"singleLine\": false }, \"keys\": \"ctrl+c\" },\n        { \"command\": \"paste\", \"keys\": \"ctrl+v\" },\n\n        // Press Ctrl+Shift+F to open the search box\n        { \"command\": \"find\", \"keys\": \"ctrl+shift+f\" },\n\n        // Press Alt+Shift+D to open a new pane.\n        // - \"split\": \"auto\" makes this pane open in the direction that provides the most surface area.\n        // - \"splitMode\": \"duplicate\" makes the new pane use the focused pane's profile.\n        // To learn more about panes, visit https://aka.ms/terminal-panes\n        { \"command\": { \"action\": \"splitPane\", \"split\": \"auto\", \"splitMode\": \"duplicate\" }, \"keys\": \"alt+shift+d\" }\n    ]\n}\n</code></pre>"},{"location":"OS/Windows/Windows%20Terminal/#see-also","title":"See Also","text":"<ul> <li>Enable Right Menu</li> </ul>"},{"location":"OS/Windows/everything/","title":"Everything","text":"<p>A powerful search tool in Windows</p> <p>https://www.voidtools.com/</p>"},{"location":"OS/Windows/everything/#open-keyboard-shortcut","title":"Open keyboard shortcut","text":"<ul> <li> <p>prerequisite</p> <ul> <li>Tools &gt; Options &gt; General<ul> <li>Start Everything on system startup</li> </ul> </li> <li>Tools &gt; Options &gt; UI<ul> <li>Run in background</li> </ul> </li> </ul> </li> <li> <p>Tools &gt; Options &gt; Keyboard &gt; Show window Hotkey</p> </li> </ul>"},{"location":"OS/Windows/otehr/","title":"Others","text":"<ul> <li>https://www.thewindowsclub.com/window-auto-tuning-in-windows-10</li> </ul>"},{"location":"OS/Windows/otehr/#auto-fix","title":"Auto fix","text":"<pre><code>Dism /Online /Cleanup-Image /CheckHealth\nDism /Online /Cleanup-Image /ScanHealth\nDism /Online /Cleanup-Image /RestoreHealth\n\nsfc /scannow\n</code></pre>"},{"location":"OS/Windows/quick_access/","title":"Add to Quick Access","text":"<ul> <li>Drag the folder from the path bar to Quick access</li> </ul>"},{"location":"OS/Windows/redirect%20port/","title":"Redirect port","text":"<pre><code>netsh advfirewall firewall add rule name=\"test_arduino_8888\" protocol=TCP dir=in localip=0.0.0.0 localport=8888 action=allow\n\nnetsh interface portproxy add v4tov4 listenport=8888 listenaddress=0.0.0.0 connectport=80 connectaddress=192.168.68.107\n\nnetsh interface portproxy reset\n</code></pre>"},{"location":"OS/Windows/redirect%20port/#ref","title":"Ref","text":"<p>http://woshub.com/port-forwarding-in-windows/</p>"},{"location":"OS/Windows/schtasks/","title":"schtasks","text":"<ul> <li>Once</li> </ul> <pre><code>schtasks /SC ONCE /TN test /TR I:\\sitcon\\a.bat /ST 6:45 /ET 6:46\n</code></pre>"},{"location":"OS/Windows/schtasks/#references","title":"References","text":"<p>http://pejslin.blogspot.com/2015/09/schtasks-create.html</p> <p>http://pejslin.blogspot.com/2015/09/schtasks_8.html</p> <p>https://stackoverflow.com/questions/10442392/is-it-possible-to-make-schtasks-run-at-specific-times</p>"},{"location":"OS/Windows/taskmgr/","title":"Task Manager","text":""},{"location":"OS/Windows/taskmgr/#process-used-memory-type","title":"Process used memory type","text":"<ul> <li>Working Set<ul> <li>Working set is the subset of virtual pages that are resident in physical memory only; this will be a partial amount of pages from that process.</li> </ul> </li> <li>Private Working Set<ul> <li>The private working set is the amount of memory used by a process that cannot be shared among other processes</li> </ul> </li> <li>Commit Size<ul> <li>Amount of virtual memory that is reserved for use by a process.</li> </ul> </li> </ul> <p>https://stackoverflow.com/questions/1170654/how-to-interpret-windows-task-manager</p>"},{"location":"OS/macos/software/","title":"Software","text":""},{"location":"OS/macos/software/#clean","title":"Clean","text":"<ul> <li>Tencent Lemon</li> </ul>"},{"location":"OS/openwrt/themes/","title":"Themes","text":"<p>https://github.com/jerrykuku/luci-theme-argon</p>"},{"location":"OpenGL/Basics/","title":"OpenGL Basics","text":""},{"location":"OpenGL/Basics/#vertex-buffer-object-vbo","title":"Vertex Buffer Object (VBO)","text":"<pre><code>uint32_t vbo;\nglGenBuffer(1, &amp;vbo); // number, array to object id\nglBindBuffer(GL_ARRAY_BUFFER, vbo); // \u7d81\u5b9a\nglBufferData(GL_ARRAY_BUFFER, sizeof(vertices), GL_STATIC_DRAW); //\u50b3\u8f38\u8cc7\u6599\n</code></pre> details <ul> <li>\u7522\u751f<ul> <li><code>glGenBuffers(GLsizei n, GLuint *buffer)</code><ul> <li><code>n</code>: \u8981\u7522\u751f\u5e7e\u500b\u7de9\u885d\u7269\u4ef6</li> <li><code>buffers</code>: \u5b58\u7522\u751f\u51fa\u4f86\u7684\u540d\u5b57\u9663\u5217</li> </ul> </li> </ul> </li> <li> <p>\u7d81\u5b9a</p> <ul> <li><code>glBindBuffer(GLenum target, GLuint buffer)</code><ul> <li><code>target</code>: \u7d81\u5b9a\u5230\u54ea\u7a2e\u7de9\u885d\u5668\u7684\u7d81\u5b9a\u9ede</li> <li><code>buffer</code>: \u8981\u7d81\u5b9a\u7de9\u885d\u7269\u4ef6\u540d\u5b57</li> </ul> </li> </ul> </li> <li> <p>\u5206\u914d\u5132\u5b58\u7a7a\u9593</p> <ul> <li><code>glBufferData(GLenum target, GLsizeptr size, const GLvoid *data, GLenum usage)</code><ul> <li><code>target</code>: \u76ee\u524d\u7de9\u885d\u7269\u4ef6\u7d81\u5b9a\u5230\u7684\u76ee\u6a19</li> <li><code>size</code>: \u7d66\u5b9a\u7de9\u885d\u7269\u4ef6\u7684\u5927\u5c0f</li> <li><code>data</code>: \u8981\u5b58\u5165\u8cc7\u6599\u7684 pointer</li> <li><code>usage</code>: \u8a2d\u5b9a\u5b58\u5165\u8cc7\u6599\u7684\u4f7f\u7528\u65b9\u5f0f</li> </ul> </li> </ul> </li> </ul> Usage \u63cf\u8ff0 <code>STATIC</code> \u8cc7\u6599\u53ea\u88ab\u8a2d\u5b9a\u4e00\u6b21\uff0c\u4f46\u6703\u88ab\u4f7f\u7528\u5f88\u591a\u6b21 <code>DYNAMIC</code> \u8cc7\u6599\u88ab\u6539\u8b8a\u5f88\u591a\u6b21\uff0c\u4e5f\u88ab\u4f7f\u7528\u5f88\u591a\u6b21 <code>STREAM</code> \u8cc7\u6599\u6bcf\u6b21\u7e6a\u88fd\u90fd\u6703\u6539\u8b8a"},{"location":"OpenGL/Basics/#specify-vertex-attributes","title":"Specify Vertex Attributes","text":"<pre><code>glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3*sizeof(float), (void*)0);\nglEnableVertexAttribArray(0);\n</code></pre> Explaination of <code>glVertexAttribPointer()</code> <ul> <li> <p><code>index</code> \u5c6c\u6027\u7684 index</p> <ul> <li>\u53ef\u4ee5\u5728 Shader \u4e2d\u6307\u5b9a <code>layout (location = #)</code>\uff0c\u5728\u7a0b\u5f0f\u4e2d\u53ef\u4ee5\u7528 <code>glGetAttribLocation()</code> \u62ff\u5230 index</li> <li>\u6216\u662f\u4f7f\u7528 <code>glBindAttribLocation()</code> \u7d81\u5b9a</li> </ul> </li> <li> <p><code>size</code> \u8a72\u9802\u9ede\u5c6c\u6027(Attribute)\u7684\u5927\u5c0f</p> <ul> <li>size \\(\\in [1, 4]\\)</li> <li>\u7bc4\u4f8b\u662f <code>vec3</code> \u6240\u4ee5\u662f 3</li> </ul> </li> <li> <p><code>type</code> \u9802\u9ede\u5c6c\u6027\u7684\u578b\u5225</p> <ul> <li><code>vec*</code> \u662f float</li> </ul> </li> <li> <p><code>normalized</code> \u662f\u5426 normalize</p> <ul> <li><code>True</code> unsigned \\([0, 1]\\), signed \\([-1, 1]\\)</li> </ul> </li> <li> <p><code>stride</code> </p> <ul> <li>\u4e00\u500b vertex \u7684\u5927\u5c0f</li> <li>\\(+\\) <code>stride</code> bytes \u6703\u5230\u4e0b\u500b vertex \u7684\u540c\u500b\u8cc7\u6599</li> </ul> </li> <li> <p><code>pointer</code></p> <ul> <li>\u958b\u982d\u7684\u504f\u79fb\u91cf</li> <li>\u4e00\u500b Vertex \u53ef\u80fd\u6703\u6709\u591a\u7a2e Attribute \u8cc7\u6599</li> </ul> </li> </ul>"},{"location":"OpenGL/Basics/#vertex-array-object-vao","title":"Vertex Array Object (VAO)","text":"<ul> <li> <p>VAOs can contain: VBO and EBO</p> <ul> <li>bind vao first , and bind vbo, ebo</li> <li>only need to bind vao in the future</li> </ul> </li> <li> <p>Create</p> </li> </ul> <pre><code>uint32_t vao;\nglGenVertexArray(1, &amp;vao);\nglBindVertexArray(vao);\n</code></pre>"},{"location":"OpenGL/Basics/#element-buffer-object-ebo","title":"Element Buffer Object (EBO)","text":"<ul> <li>also called: Index Buffer Object (IBO)</li> <li>reduce the memory usage by using index for sharing common -vertices</li> </ul> <pre><code>uint32_t indices[] = {\n    {0, 1, 3}, // \u7b2c\u4e00\u500b\u4e09\u89d2\u5f62\n    {1, 2, 3}  // \u7b2c\u4e8c\u500b\u4e09\u89d2\u5f62\n};\n</code></pre> <ul> <li>Create and bind</li> </ul> <pre><code>uint32_t ebo;\nebo = glGenBuffers(1, &amp;ebo); // \u5efa\u7acb\nglBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ebo); // \u7d81\u5b9a\nglBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW); // send data\n</code></pre> <ul> <li>Draw</li> </ul> <pre><code>glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ebo);\nglDrawElements(GL_TRIANGLES,  // \u5f62\u72c0\n    6,               // \u9802\u9ede\u6578\u91cf\n    GL_UNSIGNED_INT, // EBO \u7684 value type\n    0                // offset\n);\n</code></pre>"},{"location":"OpenGL/Basics/#shader","title":"Shader","text":"<ul> <li> <p>Whole process: Create -&gt; Compile -&gt; Linking -&gt; Cleanup -&gt; Use</p> </li> <li> <p>Create</p> <ul> <li>Different shader?<ul> <li>vertex: <code>GL_VERTEX_SHADER</code></li> <li>fragment: <code>GL_FRAGMENT_SHADER</code></li> </ul> </li> </ul> </li> </ul> <pre><code>uint32_t vs;\nvs = glCreateShader(GL_VERTEX_SHADER);\n</code></pre> <ul> <li>Source and Compile</li> </ul> <pre><code>glShaderSource(vs, 1, &amp;src, nullptr);\nglCompileShader(vs);\n</code></pre> <ul> <li>Check compile status</li> </ul> <pre><code>int success;\nchar log[512];\nglGetShaderiv(shader, GL_COMPILE_STATUS, &amp;success);\nif(!success)\n{\n    glGetShaderInfoLog(shader, 512, nullptr, log);\n    printf(\"Error Shader %s compile error\\n%s\\n\", \n        type == GL_VERTEX_SHADER ? \"Vertex\" : \"Fragment\", log);\n}\n</code></pre> <ul> <li>Shader Program and Linking</li> </ul> <pre><code>uint32_t shader;\nshader = glCreateProgram();\nglAttachShader(shader, vs); // vertex shader\nglAttachShader(shader, fs); // fragment shader\nglLinkProgram(shader);\n// cleanup\nglDeleteShader(vs);\nglDeleteShader(fs);\n</code></pre> <ul> <li>Check error</li> </ul> <pre><code>bool ok;\nchar log[512];\nglGetProgramiv(shader, GL_LINK_STATUS, &amp;ok);\nif(!ok)\n{\n    glGetProgramInfoLog(shader, 512, nullptr, log);\n    printf(\"%s\\n\", log);\n}\n</code></pre> <ul> <li>Use shader</li> </ul> <pre><code>glUseProgram(shader);\n</code></pre>"},{"location":"OpenGL/Basics/#rendering","title":"Rendering","text":"Without VAO <pre><code>// \u5efa\u7acb VBO \u8907\u88fd\u9802\u9ede\u8cc7\u6599\nglBindBuffer(GL_ARRAY_BUFFER, VBO);\nglBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n// \u8a2d\u5b9a\u9802\u9ede\u5c6c\u6027\nglVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(float), (void*)0);\nglEnableVertexAttribArray(0);\n// \u4f7f\u7528 shader program\nglUseProgram(shaderProgram);\n// \u756b\u6771\u897f\nglDrawArrays(GL_TRIANGLES, 0, 3);\n</code></pre> With VAO <pre><code>// \u5efa\u7acb\u4e26\u7d81\u5b9a VAO\nglGenVertexArray(1, &amp;VAO);\nglBindVertexArray(VAO);\n\n// \u5efa\u7acb VBO \u8907\u88fd\u9802\u9ede\u8cc7\u6599\nglBindBuffer(GL_ARRAY_BUFFER, VBO);\nglBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n\n// \u8a2d\u5b9a\u9802\u9ede\u5c6c\u6027\nglVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(float), (void*)0);\nglEnableVertexAttribArray(0);\n\n// \u7e6a\u88fd\nglUseProgram(shaderProgram);\nglBindVertexArray(VAO);\nglDrawArrays(GL_TRIANGLES, 0, 3); // \u4e09\u89d2\u5f62\uff0c\u5f9e0\u958b\u59cb\uff0c\u756b3\u500b\n</code></pre> With EBO &amp; VAO <pre><code>// \u5efa\u7acb\u4e26\u7d81\u5b9a VAO\nglGenVertexArray(1, &amp;VAO);\nglBindVertexArray(VAO);\n\n// \u5efa\u7acb VBO \u8907\u88fd\u9802\u9ede\u8cc7\u6599\nglBindBuffer(GL_ARRAY_BUFFER, VBO);\nglBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n\n// \u5efa\u7acb EBO \u4e26\u8907\u88fd\nglBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);\nglBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);\n\n// \u8a2d\u5b9a\u9802\u9ede\u5c6c\u6027\nglVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(float), (void*)0);\nglEnableVertexAttribArray(0);\n\n// \u7e6a\u88fd\nglUseProgram(shaderProgram);\nglBindVertexArray(VAO);\nglDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);\n// \u4e09\u89d2\u5f62\uff0c\u756b6\u500b\uff0cEBO\u7684type\uff0c\u5f9e0\u958b\u59cb\n</code></pre>"},{"location":"OpenGL/Camera/","title":"OpenGL Camera","text":"<p>OpenGL \u4e2d\u6a21\u64ec\u76f8\u6a5f\u7684\u65b9\u6cd5\u662f\uff0c\u628a\u5834\u666f(\u6574\u500b\u4e16\u754c)\u7167\u76f8\u6a5f\u60f3\u79fb\u52d5\u7684\u76f8\u53cd\u65b9\u5411\u79fb\u52d5\uff0c\u4f86\u6a21\u64ec\u51fa\u76f8\u6a5f\u7684\u611f\u89ba\u3002</p>"},{"location":"OpenGL/Camera/#viewcamera-space","title":"View(Camera) Space","text":"<p>View Space \u662f\u6307\u628a\u76f8\u6a5f\u7576\u4f5c\u539f\u9ede\u7684\u5ea7\u6a19\uff0c\u4e00\u500b\u76f8\u6a5f\u53ef\u4ee5\u7528\u4ee5\u4e0b\u4e09\u500b\u6771\u897f\u5b9a\u7fa9\u51fa\u4f86:</p> <ul> <li>\u76f8\u6a5f(Camera)<ul> <li>\u4f4d\u7f6e</li> <li>\u89c0\u5bdf\u7684\u65b9\u5411</li> <li>\u76f8\u6a5f\u982d\u9802\u7684\u65b9\u5411\u5411\u91cf</li> </ul> </li> </ul> <p>\u7b2c\u4e09\u500b\u8ef8\u53ef\u4ee5\u7528\u5916\u7a4d\u6c42\u51fa\uff0c\u65bc\u662f\u6211\u5011\u5b9a\u7fa9\u51fa\u4e86\u4e00\u500b\u4ee5\u76f8\u6a5f\u70ba\u539f\u9ede\u7684\u5ea7\u6a19\u7cfb\uff0c\u63a5\u4e0b\u4f86\u5c31\u662f\u8981\u69cb\u9020 View Matrix \u4f86\u628a\u4e16\u754c\u5ea7\u6a19\u8f49\u63db\u904e\u53bb\u3002</p> <ul> <li>\u4f4d\u7f6e</li> </ul> <pre><code>glm::vec3 cameraPos = glm::vec3(0.0f, 0.0f, 3.0f);\n</code></pre> <ul> <li>\u89c0\u5bdf\u7684\u65b9\u5411</li> </ul> <pre><code>glm::vec3 cameraTarget = glm::vec3(0.0f, 0.0f, 0.0f);\nglm::vec3 cameraDirection = glm::normalize(cameraPos - cameraTarget);\n// \u9019\u88e1\u5176\u5be6\u662f\u53cd\u5411(\u5f80\u76f8\u6a5f\u63d2\u7684\u5411\u91cf) i.e. \u5716 2 \u7684\u85cd\u8272\u5411\u91cf\n// \u4e5f\u5c31\u662f View Space \u7684 z \u5411\u91cf\n</code></pre> <ul> <li>\u53f3\u5411\u91cf(\u5c0d\u65bc\u76f8\u6a5f)<ul> <li>\u9019\u88e1\u6703\u7528\u4e16\u754c\u7684 \\(y\\) \u8ef8\u5411\u91cf(\u5411\u4e0a)\u8ddf \u89c0\u5bdf\u65b9\u5411\u505a\u5916\u7a4d</li> <li>\u62ff\u5230\u7684\u5411\u91cf\u6703\u671d\u5411 View Space \u7684 \\(+x\\) \uff0c\u4e5f\u5c31\u662f\u76f8\u6a5f\u7684\u53f3\u908a</li> </ul> </li> </ul> <pre><code>glm::vec3 up = glm::vec3(0.0f, 1.0f, 0.0f);\nglm::vec3 cameraRight = glm::normalize(glm::cross(up, cameraDirection));\n</code></pre> <ul> <li>\u4e0a\u5411\u91cf(\u5c0d\u65bc\u76f8\u6a5f)<ul> <li>\u6211\u5011\u5df2\u7d93\u6709 View Space \u7684 \\(x\\) \u8ef8\u548c \\(z\\) \u8ef8\u7684\u5411\u91cf</li> </ul> </li> </ul> <pre><code>glm::vec3 cameraUp = glm::cross(cameraDirection, cameraRight);\n</code></pre> <p>\u9019\u4e09\u500b\u5411\u91cf\u69cb\u6210\u4e86 View Space\u3002</p> <ul> <li>\u70ba\u4ec0\u9ebc\u8981\u4e16\u754c\u7684\u4e0a\u5411\u91cf<ul> <li>\u5148\u7528\u5916\u7a4d\u6c42\u51fa View Space \u7684\u53f3\u5411\u91cf(Right Vector)</li> <li>\u518d\u7b97\u51fa View Space \u4e4b\u4e0a\u5411\u91cf</li> <li>https://stackoverflow.com/questions/5717654/glulookat-explanation</li> <li>https://www.scratchapixel.com/lessons/mathematics-physics-for-computer-graphics/lookat-function</li> </ul> </li> </ul> <p>:::spoiler \u4e0a\u9762\u7684\u6578\u5b78\u77e5\u8b58\u662f: Gram-Schmidt process</p> <p>\u554a\u6211\u4e5f\u4e0d\u6703\uff0c\u4f46\u611f\u89ba\u5f88\u5408\u7406[name=roy4801] :::</p>"},{"location":"OpenGL/Camera/#look-at","title":"Look At \u77e9\u9663","text":"\\[ LookAt = \\begin{bmatrix} \\color{red}{R_x} &amp; \\color{red}{R_y} &amp; \\color{red}{R_z} &amp; 0 \\\\ \\color{green}{U_x} &amp; \\color{green}{U_y} &amp; \\color{green}{U_z} &amp; 0 \\\\ \\color{blue}{D_x} &amp; \\color{blue}{D_y} &amp; \\color{blue}{D_z} &amp; 0 \\\\ 0 &amp; 0 &amp; 0  &amp; 1 \\end{bmatrix} * \\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; -\\color{purple}{P_x} \\\\ 0 &amp; 1 &amp; 0 &amp; -\\color{purple}{P_y} \\\\ 0 &amp; 0 &amp; 1 &amp; -\\color{purple}{P_z} \\\\ 0 &amp; 0 &amp; 0  &amp; 1 \\end{bmatrix} \\] <p>\\(\\color{Red}{R}\\) \u662f\u53f3\u5411\u91cf\u3001\\(\\color{Green}{U}\\)\u662f\u4e0a\u5411\u91cf\u3001\\(\\color{Blue}{D}\\)\u662f\u65b9\u5411\u5411\u91cf\uff0c\\(\\color{purple}{P}\\) \u662f\u76f8\u6a5f\u4f4d\u7f6e\uff0c\u6ce8\u610f\u4f4d\u79fb\u662f\u76f8\u53cd\u65b9\u5411\uff0c\u662f\u56e0\u70ba\u524d\u9762\u63d0\u5230\u6211\u5011\u5e0c\u671b\u5c07\u4e16\u754c\u5f80\u76f8\u6a5f\u7684\u76f8\u53cd\u65b9\u5411\u79fb\u52d5(\u56e0\u70ba OpenGL \u7684\u76f8\u6a5f\u5728 \\((0, 0, 0)\\))</p> <ul> <li> <p>GLM \u63d0\u4f9b\u4e86\u76f4\u63a5\u7522\u751f Look At Matrix \u7684\u5be6\u7528\u529f\u80fd\uff0c\u53ea\u8981\u63d0\u4f9b\u76f8\u6a5f\u4f4d\u7f6e\u3001\u89c0\u5bdf\u76ee\u6a19\u3001\u8ddf\u4e16\u754c\u7a7a\u9593\u7684\u4e0a\u5411\u91cf</p> <ul> <li>glm::lookAt(eye, center, up) <pre><code>glm::mat4 view;\nview = glm::lookAt(\n    glm::vec3(0.0f, 0.0f, 3.0f),  // \u76f8\u6a5f\u4f4d\u7f6e\n    glm::vec3(0.0f, 0.0f, 0.0f),  // \u89c0\u5bdf\u76ee\u6a19\n    glm::vec3(0.0f, 1.0f, 0.0f)   // \u4e0a\u5411\u91cf\n);\n</code></pre></li> </ul> </li> <li> <p>7.1.camera_circle</p> <ul> <li>\u9019\u500b\u7bc4\u4f8b\u793a\u7bc4\u4e86\uff0c\u628a Camera \u7e5e \\(x-z\\) \u5e73\u9762\u65cb\u8f49</li> </ul> </li> </ul> <p></p>"},{"location":"OpenGL/Camera/#_1","title":"\u81ea\u7531\u79fb\u52d5","text":"<p>\u4e0a\u9762\u53ea\u793a\u7bc4\u4e86\u65cb\u8f49\uff0c\u5982\u679c\u80fd\u81ea\u7531\u79fb\u52d5\u7684\u8a71\u6703\u66f4\u6709\u8da3\uff0c\u4f46\u662f\u6211\u5011\u8981\u6539\u4e00\u4e0b Camera \u7684\u5be6\u4f5c</p> <pre><code>glm::vec3 cameraPos   = glm::vec3(0.0f, 0.0f,  3.0f);\nglm::vec3 cameraFront = glm::vec3(0.0f, 0.0f, -1.0f);\nglm::vec3 cameraUp    = glm::vec3(0.0f, 1.0f,  0.0f);\nglm::vec3 cameraRight = glm::normalize(glm::cross(cameraFront, cameraUp));\n</code></pre> <p><code>lookAt</code> \u8b8a\u6210\u4e86:</p> <pre><code>view = glm::lookAt(cameraPos, cameraPos+cameraFront, cameraUp);\n</code></pre> <p>\u63a5\u4e0b\u4f86\u65b0\u589e\u79fb\u52d5\u529f\u80fd</p> <pre><code>if(sf::Keyboard::isKeyPressed(sf::Keyboard::W))\n    cameraPos += cameraSpeed * cameraFront;\nelse if(sf::Keyboard::isKeyPressed(sf::Keyboard::S))\n    cameraPos -= cameraSpeed * cameraFront;\n//\nif(sf::Keyboard::isKeyPressed(sf::Keyboard::A))\n    cameraPos -= cameraSpeed * cameraRight;\nelse if(sf::Keyboard::isKeyPressed(sf::Keyboard::D))\n    cameraPos += cameraSpeed * cameraRight;\n//\nif (sf::Keyboard::isKeyPressed(sf::Keyboard::Space))\n    cameraPos += cameraSpeed * cameraUp;\nelse if (sf::Keyboard::isKeyPressed(sf::Keyboard::LControl))\n    cameraPos -= cameraSpeed * cameraUp;\n</code></pre> <p>\u7576\u6211\u5011\u6309\u4e0b WASD \u6642\uff0cCamera \u5c31\u6703\u5728\u904a\u6232\u4e16\u754c\u4e2d\u79fb\u52d5\uff0c\u6309 Shift \u6642 Camera \u6703\u52a0\u901f</p> <ul> <li>7.2.camera_move</li> </ul> <p></p> <p>\u9664\u4e86\u6309\u9375\u79fb\u52d5\u4e4b\u5916\uff0c\u6211\u5011\u9084\u6539\u4e86\u79fb\u52d5\u901f\u5ea6\u7684 code\uff0c\u6839\u64da\u8655\u7406\u5668\u4e0d\u540c\uff0c\u6bcf\u500b loop \u7684\u6642\u9593\u6703\u4e0d\u540c\uff0c\u901a\u5e38\u90fd\u6703\u7528 delta time \u53bb\u4e58\u4e0a\u67d0\u500b\u6771\u897f\u7684\u6642\u9593\u8b8a\u5316\u91cf(e.g. \u901f\u5ea6)\uff0c\u4f86\u66f4\u65b0\u7576\u524d\u7684\u72c0\u614b\u3002</p> <pre><code>if(sf::Keyboard::isKeyPressed(sf::Keyboard::LShift))\n    cameraSpeed = dt * 5;\nelse\n    cameraSpeed = dt * 3;\n</code></pre>"},{"location":"OpenGL/Camera/#_2","title":"\u8996\u89d2\u79fb\u52d5","text":""},{"location":"OpenGL/Camera/#_3","title":"\u6b50\u62c9\u89d2","text":"<p>\u6b50\u62c9\u89d2(Euler Angle)\u53ef\u4ee5\u8868\u793a\u7a7a\u9593\u4e2d\u4e09\u8ef8\u7684\u65cb\u8f49\u3002\u4fef\u4ef0\u89d2(Pitch)\u3001\u504f\u64fa\u89d2(Yaw)\u548c\u7ffb\u6efe\u89d2(Roll)</p> <p></p> <p>\u5728\u50b3\u7d71 FPS \u4e2d\u4e0d\u6703\u6709 Roll \u6240\u4ee5\u9019\u88e1\u4e0d\u8a0e\u8ad6\uff0c\u6709\u4e86\u6b50\u62c9\u89d2\u5f8c\u5c31\u53ef\u4ee5\u7b97\u51fa\u65cb\u8f49\u5f8c\u7684\u65b0\u7684\u65b9\u5411\u5411\u91cf</p> <p></p> <pre><code>glm::vec3 dir;\ndir.x = cos(glm::radians(pitch)) * cos(glm::radians(yaw));\ndir.y = sin(glm::radians(pitch));\ndir.z = cos(glm::radians(pitch)) * sin(glm::radians(yaw));\n</code></pre> <p>\u6709\u4e86\u65b9\u5411\u5411\u91cf\uff0c\u6211\u5011\u5c31\u53ef\u4ee5\u628a <code>cameraFront</code> \u8a2d\u5b9a\u6210\u65b9\u5411\u5411\u91cf\uff0c\u4f86\u628a\u76f8\u6a5f\u8f49\u904e\u53bb\u4e86\u3002</p>"},{"location":"OpenGL/Camera/#_4","title":"\u6ed1\u9f20\u8f38\u5165","text":"<p>\u901a\u5e38\u6839\u64da\u6ed1\u9f20\u8f38\u5165\u8b8a\u52d5\u8996\u89d2\u7684\u8655\u7406\u65b9\u6cd5\u662f:</p> <ul> <li>\u8a08\u7b97\u6ed1\u9f20\u4f4d\u7f6e\u7684\u504f\u79fb\u91cf(\u76f8\u5c0d\u4e0a\u500b frame)</li> <li>\u628a\u504f\u79fb\u91cf\u52a0\u5230 <code>pitch</code> \u8ddf <code>yaw</code> \u4e2d</li> <li>\u9650\u5236\u6700\u5927\u8ddf\u6700\u5c0f\u503c</li> <li>\u8a08\u7b97\u65b9\u5411\u5411\u91cf</li> </ul> <pre><code>// \u6ed1\u9f20\u76ee\u524d\u70ba\u4f4d\u7f6e\nauto [x, y] = sf::Mouse::getPosition(window);\nglm::vec2 nowCursorPos(x, window.getSize().y - y);\n// \u87a2\u5e55\u4e2d\u5fc3\nstatic glm::vec2 screenCenter(window.getSize().x / 2, window.getSize().y / 2);\nsf::Mouse::setPosition({window.getSize().x / 2, window.getSize().y / 2} , window);\n// \u504f\u79fb\u91cf\nglm::vec2 off = nowCursorPos - screenCenter;\n</code></pre> <p>\u628a\u504f\u79fb\u91cf\u4e58\u4e0a\u6ed1\u9f20\u654f\u611f\u5ea6</p> <p>```cpp= off *= sensitivity; <pre><code>\u628a\u89d2\u5ea6\u52a0\u4e0a\u504f\u79fb\u91cf\uff0c\u4e26\u9650\u5236\u6700\u5927\u3001\u6700\u5c0f (\u4e0d\u9650\u5236\u6c34\u5e73\u65cb\u8f49\u662f\u56e0\u70ba\u53e4\u65e9 FPS \u90fd\u662f\u8996\u89d2\u8f49 = \u4eba\u8f49)\n\n```cpp=\nstatic float pitch  = 0.f;\nstatic float yaw = -90.f;  // \u9762\u5411 -z\nstatic float sensitivity = 0.05f;\n\npitch += off.y;\nyaw += off.x;\n// \u907f\u514d yaw \u56e0\u70ba float \u7cbe\u5ea6\u554f\u984c\nif(yaw &gt; 360.f || yaw &lt; -360.f) yaw = glm::mod(yaw, 360.f);\n// \u9650\u5236 pitch\nif(pitch &gt; 89.f) pitch = 89.f;\nif(pitch &lt; -89.f) pitch = -89.f;\n</code></pre></p> <p>\u6700\u5f8c\u8a08\u7b97 Camera \u65b0\u7684\u65b9\u5411\u5411\u91cf</p> <p>```cpp= glm::vec3 newCameraFront; newCameraFront.x = cos(glm::radians(yaw)) * cos(glm::radians(pitch)); newCameraFront.y = sin(glm::radians(pitch)); newCameraFront.z = sin(glm::radians(yaw)) * cos(glm::radians(pitch)); cameraFront = newCameraFront; <pre><code>![](https://imgur.com/X0WdzL2.gif)\n\n* \u96b1\u85cf\u6ed1\u9f20\u6e38\u6a19\n    * [ref](https://github.com/ocornut/imgui/issues/2375)\n\n```cpp\nwindow.setMouseCursorVisible(false); // \u56e0\u70ba imgui \u7684\u7de3\u6545\uff0c\u6ed1\u9f20\u9084\u662f\u6703\u88ab\u756b\u51fa\u4f86\nwindow.setMouseCursorGrabbed(true);  // \u8b93\u6ed1\u9f20\u4e0d\u80fd\u8d85\u51fa\u8996\u7a97\u7bc4\u570d\n\nwhile(running)\n{\n    // ...\n\n    // \u5fc5\u9808\u53eb imgui \u4e0d\u8981\u756b\u6ed1\u9f20\n    ImGui::SetMouseCursor(ImGuiMouseCursor_None);\n\n    windiw.draw();\n}\n</code></pre></p>"},{"location":"OpenGL/Camera/#_5","title":"\u8996\u89d2\u7e2e\u653e","text":"<p>\u628a FOV \u8b8a\u5c0f\u6642\uff0c\u6703\u7522\u751f\u4e00\u7a2e\u653e\u5927\u7684\u611f\u89ba\uff0c\u6211\u5011\u4f7f\u7528\u6ed1\u9f20\u6efe\u8f2a\u4f86\u9032\u884c\u7e2e\u653e\u3002SFML \u88cf\u982d\u5075\u6e2c\u6ed1\u9f20\u6efe\u8f2a\u53ea\u80fd\u7528\u4e8b\u4ef6</p> <pre><code>// Event update\nif(event.type == sf::Event::MouseWheelScrolled)\n{\n    mouseWheelDelta = event.mouseWheelScroll.delta;\n}\n\n// In Update\nif(mouseWheelDelta != 0.f)\n{\n    fov += mouseWheelDelta;\n    if(fov &lt; 1.f) fov = 1.f;\n    if(fov &gt; 45.f) fov = 45.f;\n    mouseWheelDelta = 0.f;\n}\n</code></pre> <p></p> <ul> <li> <p>Example 7.3 Camera</p> </li> <li> <p>\u4f7f\u7528\u6b50\u62c9\u89d2\u7684 Camera \u6703\u6709\u842c\u5411\u9396(Gimbal Lock)\u7684\u554f\u984c</p> <ul> <li>\u66f4\u597d\u7684\u662f\u4f7f\u7528\u56db\u5143\u6578(Quaternions)<ul> <li>https://github.com/cybercser/OpenGL_3_3_Tutorial_Translation/blob/master/Tutorial%2017%20Rotations.md</li> </ul> </li> </ul> </li> </ul>"},{"location":"OpenGL/Coordinates/","title":"OpenGL Coordinate","text":"<p>OpenGL \u5ea7\u6a19\u7684\u503c\u5728 \u7d93\u904e Vertex Shader \u4e4b\u5f8c\u8b8a\u6210 \\([-1.0, 1.0]\\) \u7684\u5ea7\u6a19\uff0c\u7a31\u4f5c \u6a19\u6e96\u5316\u8a2d\u5099\u5ea7\u6a19 Normalized Device Coordinates (NDC)\uff0c\u53ea\u6709\u5728\u6b64\u5ea7\u6a19\u5167\u7684\u9802\u9ede\u6700\u7d42\u624d\u6703\u986f\u793a\u5728\u87a2\u5e55\u4e0a\u3002</p> <p>\u5ea7\u6a19\u5728\u88ab\u8f49\u63db\u6210\u87a2\u5e55\u5ea7\u6a19(Screen-Space)\u6642\u9084\u6703\u7d93\u904e\u591a\u6b21\u8f49\u63db</p> <ul> <li>\u5ea7\u6a19\u7cfb\u7d71<ul> <li>\u5c40\u90e8\u7a7a\u9593 Local Space \u6216\u662f \u7269\u9ad4\u7a7a\u9593(Object Space)</li> <li>\u4e16\u754c\u7a7a\u9593 World Space</li> <li>\u89c0\u5bdf\u7a7a\u9593 View Space \u6216 Eye Space</li> <li>\u88c1\u526a\u7a7a\u9593 Clip Space</li> <li>\u87a2\u5e55\u7a7a\u9593 Screen Space</li> </ul> </li> </ul> <p></p> <p>\u70ba\u4e86\u8f49\u63db\u5750\u6a19\u7cfb\uff0c\u9700\u8981\u7528\u5230\u5e7e\u500b\u8b8a\u63db\u77e9\u9663(Transforma Matrix)\uff0c\u5206\u5225\u662f Model(\u6a21\u578b)\u3001View(\u89c0\u5bdf)\u3001Projection(\u6295\u5f71)\u4e09\u500b\u77e9\u9663\u3002</p> <ul> <li>Local Space<ul> <li>\u7269\u9ad4\u76f8\u5c0d\u65bc\u5c40\u90e8\u539f\u9ede\u7684\u5ea7\u6a19</li> </ul> </li> <li>World Space<ul> <li>\u76f8\u5c0d\u65bc\u4e16\u754c\u7684\u539f\u9ede\uff0c\u6703\u548c\u5176\u4ed6\u7269\u9ad4\u76f8\u5c0d\u65bc\u539f\u9ede\u64fa\u653e</li> </ul> </li> <li>View Space<ul> <li>\u5f9e Camera (\u89c0\u5bdf\u8005) \u7684\u89d2\u5ea6\u9032\u884c\u89c0\u5bdf\u7684\u9802\u9ede\u5ea7\u6a19</li> </ul> </li> <li>Clip Space<ul> <li>View Space \u7d93\u904e\u6295\u5f71\u5f8c\uff0c\u88c1\u526a\u5ea7\u6a19\u6703\u88ab\u8655\u7406\u5230 NDC \u7a7a\u9593 \\([-1.0, 1.0]\\)</li> </ul> </li> <li>Screen Space<ul> <li>\u7d93\u904e Viewport Transform\uff0c\u5c07 \\([-1.0, 1.0]\\) \u5167\u7684\u5ea7\u6a19\u8b8a\u63db\u5230 <code>glViewport</code> \u6240\u5b9a\u7fa9\u7684\u5ea7\u6a19\u7bc4\u570d\u5167</li> <li>\u51fa\u4f86\u7684\u5ea7\u6a19\u6703\u9001\u5230 Rasterizer \u8b8a\u6210 Fragment (Pixel)</li> </ul> </li> </ul> <p>\u4e4b\u6240\u4ee5\u628a\u9802\u9ede\u5728\u4e0d\u540c\u5750\u6a19\u7cfb\u4e2d\u8f49\u63db\uff0c\u662f\u56e0\u70ba\u6709\u4e9b\u64cd\u4f5c\u5728\u7279\u5b9a\u7684\u5750\u6a19\u7cfb\u4e2d\u624d\u6709\u610f\u7fa9\u4e14\u65b9\u4fbf\u3002\u4f8b\u5982\uff0c\u9700\u8981\u5c0d\u7269\u9ad4\u4fee\u6539\u6642\uff0c\u5728 Local Space \u6bd4\u8f03\u65b9\u4fbf\uff1b\u5982\u679c\u9700\u8981\u76f8\u5c0d\u5176\u4ed6\u7269\u9ad4\u6642\uff0c\u5728 World Space \u6bd4\u8f03\u65b9\u4fbf\u3002</p>"},{"location":"OpenGL/Coordinates/#local-space","title":"Local Space \u5c40\u90e8\u7a7a\u9593","text":"<p>\u7269\u9ad4\u6240\u5728\u7684\u5ea7\u6a19\u7a7a\u9593\uff0c\u4e00\u500b\u7269\u9ad4\u7684\u539f\u9ede\u5728 \\((0, 0, 0)\\) \u4f46\u6700\u5f8c\u53ef\u80fd\u51fa\u73fe\u5728\u4e16\u754c\u7684\u4e0d\u540c\u5730\u65b9(\u5ea7\u6a19)\uff0c\u5b83\u7684\u6240\u6709\u9802\u9ede\u90fd\u662f\u76f8\u5c0d\u65bc Local Space \u7684\u539f\u9ede\uff0c\u9019\u4e9b\u5ea7\u6a19\u90fd\u662f\u5c40\u90e8(Local)\u7684\u3002</p>"},{"location":"OpenGL/Coordinates/#world-space","title":"World Space \u4e16\u754c\u7a7a\u9593","text":"<p>\u9802\u9ede\u76f8\u5c0d\u65bc\u904a\u6232\u4e16\u754c\u539f\u9ede\u7684\u5ea7\u6a19\u3002\u5f9e Local Space \u8b8a\u63db\u5230 World Space \u662f\u7531 Model Matrix \u4f86\u5b8c\u6210\u7684 \u628a\u7269\u9ad4\u5f9e Local Space \u7d93\u904e\u4f4d\u79fb\u3001\u7e2e\u653e\u3001\u65cb\u8f49\u4f86\u628a\u7269\u9ad4\u64fa\u5728\u4e16\u754c\u7684\u4f4d\u7f6e</p>"},{"location":"OpenGL/Coordinates/#view-space","title":"View Space \u89c0\u5bdf\u7a7a\u9593","text":"<p>\u89c0\u5bdf\u7a7a\u9593\u662f\u5c07\u4e16\u754c\u5ea7\u6a19\u8f49\u6210\u4f7f\u7528\u8005\u8996\u91ce(\u651d\u5f71\u6a5f Camera)\u524d\u65b9\u7684\u5ea7\u6a19\u3002\u7d93\u7531\u4f4d\u79fb\u548c\u65cb\u8f49\u5834\u666f\uff0c\u4f7f\u5f97\u7279\u5b9a\u7684\u7269\u9ad4\u8b8a\u63db\u5230\u651d\u5f71\u6a5f(Camera)\u7684\u524d\u65b9\uff0c\u6b64\u7a2e\u8b8a\u63db\u7684\u77e9\u9663\u7a31\u4f5c View Matrix</p>"},{"location":"OpenGL/Coordinates/#clip-space","title":"Clip Space \u88c1\u526a\u7a7a\u9593","text":"<p>\u5728\u7d93\u904e Vertex Shader \u5f8c OpenGL \u5e0c\u671b\u6240\u6709\u7684\u5ea7\u6a19\u90fd\u5728 \\([-1.0, 1.0]\\) \u5167\uff0c\u8d85\u51fa\u7684\u6703\u88ab\u88c1\u526a(Clip) \u6389(\u5ffd\u7565\u6389)\uff0c\u5728\u6b64\u5ea7\u6a19\u5167\u7684\u9802\u9ede\u6700\u5f8c\u6703\u88ab\u5149\u67f5\u5316\u6210 Fragment</p> <p>\u70ba\u4e86\u5c07\u9802\u9ede\u5ea7\u6a19\u8b8a\u63db\u5230 NDC \u7a7a\u9593\uff0c\u8981\u7d93\u7531 Projection Matrix \u6295\u5f71\u77e9\u9663\uff0c\u5b83\u6307\u5b9a\u4e86\u4e00\u500b\u7bc4\u570d\u7684\u5ea7\u6a19 e.g. [-1000, 1000]\uff0c\u6295\u5f71\u77e9\u9663\u6703\u5c07\u5728\u7bc4\u570d\u5167\u7684\u5ea7\u6a19\u8f49\u6210 NDC\u3002\u8d85\u51fa\u7bc4\u570d\u7684\u5ea7\u6a19\uff0c\u8f49\u51fa\u7684\u5ea7\u6a19\u6703\u8d85\u51fa -1.0 \u6216 1.0\uff0c\u6700\u5f8c\u6703\u88ab\u526a\u88c1\u6389\u3002</p> <p>\u56e0\u6b64\u6703\u6709\u500b\u7bc4\u570d\u5167\u7684\u9802\u9ede\u90fd\u6703\u88ab\u8f49\u63db\uff0c\u9019\u500b\u7bc4\u570d\u53eb\u505a \u89c0\u5bdf\u7bb1Viewing Box\u53c8\u7a31\u4f5c Frustum</p> <p></p> <p>\u9019\u500b\u8f49\u63db\u7684\u904e\u7a0b\u7a31\u4f5c \u6295\u5f71 Projection</p> <p>\u6709\u5169\u7a2e\u4e0d\u540c\u7684\u6295\u5f71\u65b9\u5f0f:\u6b63\u5c04\u6295\u5f71\u3001\u900f\u8996\u6295\u5f71</p> <p></p>"},{"location":"OpenGL/Coordinates/#orthographic-projection","title":"\u6b63\u5c04\u6295\u5f71 Orthographic Projection","text":"<p>\u6b63\u5c04\u6295\u5f71\u5b9a\u7fa9\u4e86\u4e00\u500b\u50cf\u9577\u65b9\u9ad4\u7684\u89c0\u5bdf\u7bb1\uff0c\u8d85\u51fa\u9019\u500b\u89c0\u5bdf\u7bb1\u5916\u7684\u9802\u9ede\u6703\u88ab\u526a\u88c1\u6389\uff0c\u5728\u6b64\u89c0\u5bdf\u7bb1\u5167\u7684\u9802\u9ede\u6703\u88ab\u8f49\u6210 NDC \u5ea7\u6a19\u3002 \u7531\u5bec\u3001\u9ad8\u53ca\u8fd1(Near)\u5e73\u9762\u548c\u9060(Far)\u5e73\u9762\u5b9a\u7fa9</p> <pre><code>// glm::ortho(left, right, bottom, top, zNear, zFar)\nglm::ortho(0.0f, 800.0f, 0.0f, 600.0f, 0.1f, 100.0f);\n</code></pre> <p></p> Orthographic Projection Matrix <p>\u51fa\u4f86\u7684\u77e9\u9663\u662f: \\(\\begin{pmatrix} \\frac{2}{\\text{right}-\\text{left}} &amp; 0 &amp; 0 &amp; t_x \\\\ 0 &amp; \\frac{2}{\\text{top} - \\text{bottom}} &amp; 0 &amp; t_y \\\\ 0 &amp; 0 &amp; \\frac{2}{\\text{zFar} - \\text{zNear}} &amp; t_z \\\\ 0 &amp; 0 &amp; 0 &amp; 1 \\end{pmatrix}\\)</p> <p>\\(t_x = - \\frac{\\text{right}+\\text{left}}{\\text{right}-\\text{left}} \\\\ t_y = - \\frac{\\text{top} + \\text{bottom}}{\\text{top} - \\text{bottom}} \\\\ t_z = - \\frac{\\text{zFar} + \\text{zNear}}{\\text{zFar} - \\text{zNear}}\\)</p> <p>TODO \u7406\u89e3</p>"},{"location":"OpenGL/Coordinates/#perspective-projection","title":"\u900f\u8996\u6295\u5f71 Perspective Projection","text":"<p>\u9060\u8655\u7684\u6771\u897f\u770b\u8d77\u4f86\u5f88\u5c0f\uff0c\u8fd1\u8655\u7684\u7269\u54c1\u770b\u8d77\u4f86\u5f88\u5927\uff0c\u7a31\u70ba\u900f\u8996(Perspective)\u3002\u4e0a\u5716\u662f\u4e00\u500b\u7121\u9650\u9577\u7684\u9435\u8ecc\uff0c\u7531\u65bc\u900f\u8996\u7684\u95dc\u4fc2\uff0c\u5169\u689d\u7dda\u5728\u5f88\u9060\u7684\u5730\u65b9\u770b\u8d77\u4f86\u6703\u76f8\u4ea4\u3002</p> <p>\u900f\u8996\u6295\u5f71\u9664\u4e86\u5c07\u89c0\u5bdf\u7bb1\u5167\u7684\u5ea7\u6a19\u6620\u5c04\u5230 Clip Space \uff0c\u9084\u4fee\u6539\u4e86\u5ea7\u6a19\u7684 \\(w\\) \u5206\u91cf\uff0c\u8b93\u96e2\u89c0\u5bdf\u8005\u9060\u7684\u9802\u9ede\u4e4b \\(w\\) \u5206\u91cf\u8d8a\u5927\uff0c\u7d93\u7531\u900f\u8996\u9664\u6cd5\uff0c\u96e2\u89c0\u5bdf\u8005\u8d8a\u9060\u7684\u9802\u9ede\u5247\u6703\u8d8a\u5c0f\u3002</p> <ul> <li>Perspective Division \u900f\u8996\u9664\u6cd5<ul> <li>\u5728\u8f49\u63db\u5230 Clip Space \u7684\u9802\u9ede\uff0c\u6bcf\u500b\u5ea7\u6a19\u7684 \\((x, y, z)\\) \u6703\u90fd\u9664\u4e0a \\(w\\) \u5206\u91cf</li> <li>\u4e5f\u5c31\u662f \\((\\frac{x}{w}, \\frac{y}{w}, \\frac{z}{w})\\)</li> <li>\u5c07 4D \u7684 Clip Space \u5ea7\u6a19\u8f49\u63db\u6210 3D NDC \u5ea7\u6a19</li> <li>\u5728 Vertex Shader \u7684\u6700\u5f8c\u6703\u88ab \u81ea\u52d5\u57f7\u884c</li> </ul> </li> </ul> <p></p> <pre><code>glm::mat4 proj = glm::perspective(\n    glm::radians(45.0f),       // Field Of View\n    (float)width/(float)height // \u5bec\u9ad8\u6bd4\n    , 0.1f, 100.0f);           // \u8fd1\u5e73\u9762, \u9060\u5e73\u9762\n</code></pre> <code>glm::perspective(fovy, aspect, near, far)</code> <ul> <li><code>fovy</code> Field of View \u8996\u91ce\u5927\u5c0f</li> <li><code>aspect</code> \u5bec\u9ad8\u6bd4 \\(\\frac{\\text{width}}{\\text{height}}\\)</li> <li><code>near</code> \u8fd1\u5e73\u9762 (\u8ddd\u96e2)</li> <li><code>far</code> \u9060\u5e73\u9762 (\u8ddd\u96e2)</li> </ul> <p></p>"},{"location":"OpenGL/Coordinates/#_1","title":"\u6bd4\u8f03","text":"<p>\u6b63\u5c04\u6295\u5f71(Orthographic)\u4e0d\u6703\u7522\u751f\u900f\u8996(w\u5206\u91cf\u662f1.0)\u6240\u4ee5\u770b\u8d77\u4f86\u9060\u8655\u7684\u7269\u9ad4\u8ddf\u8fd1\u8655\u662f\u4e00\u6a23\u7684\u5927\u5c0f\uff0c\u4e3b\u8981\u7528\u5728\u6e32\u67d3 2D \u6216\u662f\u5efa\u7bc9\u3001\u5de5\u7a0b\u3001\u6216\u5efa\u6a21\u7684\u61c9\u7528\u3002</p> <p>\u900f\u8996\u6295\u5f71(Perspective)\u9060\u8655\u7684\u7684\u7269\u9ad4\u5c31\u770b\u8d77\u4f86\u8f03\u5c0f\u3002</p>"},{"location":"OpenGL/Coordinates/#_2","title":"\u7d44\u5408\u5728\u4e00\u8d77","text":"<p>\u4e00\u500b\u9802\u9ede\u5ea7\u6a19\u6703\u7d93\u904e\u4e0b\u5217\u7b97\u5f0f\u8f49\u6210 Clip Space\u3002\u6ce8\u610f\u77e9\u9663\u904b\u7b97\u5f0f\u5f9e\u53f3\u5f80\u5de6\u3002</p> <p>\\(V_{clip} = M_{projection} \\cdot M_{view} \\cdot M_{model} \\cdot V_{local}\\)</p>"},{"location":"OpenGL/Coordinates/#3d","title":"\u9032\u5165 3D \u4e16\u754c","text":"<p>\u56e0\u70ba\u4e4b\u524d\u7bc4\u4f8b\u7684\u5716\u7247\u90fd\u662f\u8cbc\u5728 \\(x-y\\) \u5e73\u9762\u4e0a\uff0c\u8981\u770b\u8d77\u4f86\u6709 3D \u7684\u6548\u679c\u7684\u8a71\uff0c\u5247\u8981\u65cb\u8f49\u7269\u9ad4 e.g. \u8b93\u5b83\u770b\u8d77\u4f86\u8eba\u5728\u5730\u677f\u4e0a\u3002(\u5728\u9019\u500b\u4f8b\u5b50\u4e2d\uff0c\u6211\u5011\u7bb1\u5b50\u4e5f\u64fa\u5728\u4e16\u754c\u5ea7\u6a19\u7684 \\((0, 0, 0)\\) \u56e0\u6b64\u6c92\u6709 translate)</p> <pre><code>glm::mat4 model(1.f);\nmodel = glm::rotate(model, glm::radians(-55.0f), glm::vec(1.0f, 0.0f, 0.0f));\n// \u7e5e x \u8ef8\u65cb\u8f49 -55 \u5ea6\n</code></pre> <ul> <li>\u53f3\u624b\u5750\u6a19\u7cfb<ul> <li>OpenGL \u7684\u5ea7\u6a19\u7cfb  </li> </ul> </li> </ul> <p>\u5728 OpenGL \u4e2d\uff0c\u770b\u51fa\u53bb\u7684\u8996\u91ce(Camera)\u6c38\u9060\u662f\u671d\u5411 \\(-z\\) \u65b9\u5411\uff0c\u4e14\u4f4d\u5728 \\((0, 0, 0)\\)\uff0c\u4e14\u4e0d\u80fd\u79fb\u52d5</p> <p>\u60f3\u50cf\u982d\u662f Camera\uff0c\u5750\u6a19\u7cfb\u662f\u4f60\u7528\u4e2d\u4e8c\u7684\u624b\u52e2(\u4e0a\u5716)\uff0c\u4e2d\u6307\u6307\u8457\u81ea\u5df1\uff0c\u98df\u6307\u6307\u8457\u5929\uff0c\u62c7\u6307\u6307\u8457\u53f3\u908a\uff0c\u56e0\u6b64\u8996\u91ce\u5c04\u51fa\u53bb\u662f \\(-z\\) \u65b9\u5411</p> <ul> <li>\u90a3\u6211\u5011\u60f3\u8981\u628a Camera \u64fa\u5728 \\((0, 0, 3)\\) \u7136\u5f8c\u5f80 \\(-z\\) \u65b9\u5411\u770b\u8981\u600e\u9ebc\u8fa6?<ul> <li>\u6211\u5011\u4e0d\u80fd\u79fb\u52d5 Camera</li> <li>\u90a3\u5c31\u79fb\u52d5\u7269\u9ad4\uff0c\u5f80\u76f8\u53cd\u65bc Camera \u79fb\u52d5\u7684\u65b9\u5411\uff0c\u79fb\u52d5\u6574\u500b\u5834\u666f</li> <li>View Matrix</li> </ul> </li> </ul> <pre><code>glm::mat4 view(1.f);\nview = glm::translate(view, glm::vec3(0.0f, 0.0f, -3.0f));\n</code></pre> <p>\u6700\u5f8c\uff0c\u6839\u64da\u60f3\u8981\u7684\u6548\u679c\u9078\u64c7 Projection Matrix</p> <pre><code>glm::mat4 projection(1.0f);\nprojection = glm::perspective(glm::radians(45.0f), width / height, 0.1f, 100.f);\n</code></pre> <p>\u5efa\u597d Matrix \u5f8c\uff0c\u61c9\u8a72\u8981\u628a\u5b83\u5011\u50b3\u5230 Vertex Shader \u4e2d:</p> <pre><code>#version 330 core\nlayout (location = 0) in vec3 aPos;\n// ...\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 projection;\n\nvoid main()\n{\n    // \u6ce8\u610f\u77e9\u9663\u4e58\u6cd5\n    gl_Position = projection * view * model * vec4(aPos, 1.0);\n    ...\n}\n</code></pre> <p>\u6700\u5f8c\u7684\u6548\u679c:</p> <p></p>"},{"location":"OpenGL/Texture/","title":"OpenGL Texture","text":"<ul> <li> <p>While process:</p> <ul> <li>loading image</li> <li>images -&gt; textures</li> <li>bind texture unit &amp; prepare shader</li> <li>rendering :)</li> </ul> </li> <li> <p>TL;DR for loading     <pre><code>unsigned int texture;\nglGenTextures(1, &amp;texture);\nglBindTexture(GL_TEXTURE_2D, texture);\n//\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);   \nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n//\nunsigned char *data = load_image(\"example.jpg\"); // \u81ea\u8a02\u8f09\u5165\u5716\u7247\u65b9\u5f0f\nuint32_t width = /* \u5716\u7247\u7684\u5bec */;\nuint32_t height = /* \u5716\u7247\u7684\u9ad8 */;\nif (data)\n{\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, data);\n    glGenerateMipmap(GL_TEXTURE_2D);\n}\nelse\n{\n    std::cout &lt;&lt; \"Failed to load texture\" &lt;&lt; std::endl;\n}\nfree_image(data); // \u91cb\u653e\u5716\u7247\n</code></pre></p> </li> <li> <p>There is no TL;DR for using :(</p> </li> </ul>"},{"location":"OpenGL/Texture/#loading-textures","title":"Loading Textures","text":"<ul> <li>Create texture</li> </ul> <pre><code>uint32_t tex;\nglGenTexture(1, &amp;tex);\n</code></pre> <ul> <li>Bind texture</li> </ul> <pre><code>// &gt;= OpenGL 4.5\nglBindTextureUnit(unit, texture)\n// &lt; OpenGL 4.5\nglActiveTexture(GL_TEXTURE0 + unit);\nglBindTexture(GL_TEXTURE_2D, texture);\n</code></pre> <ul> <li>Loading images to textures<ul> <li>\u5404\u500b\u5e73\u53f0\u3001\u4e0d\u540c\u7684\u5716\u7247\u683c\u5f0f\u751a\u81f3\u662f\u5e95\u5c64\u7684 library \u90fd\u6709\u4e0d\u540c\u7684\u5716\u7247\u8f09\u5165\u7684\u65b9\u6cd5\uff0c\u56e0\u6b64\u9019\u88e1\u4e0d\u8d05\u8ff0</li> <li>stb_image</li> </ul> </li> </ul> <pre><code>glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, data);\nglGenerateMipmap(GL_TEXTURE_2D);\n</code></pre> glTexImage2D(target, level, internalFormat, width, height, border,  format,  type, * data) <ul> <li>Target</li> <li>Mipmap Level<ul> <li>0 = base</li> </ul> </li> <li>internalFormat \u5132\u5b58\u683c\u5f0f</li> <li>width \u5bec\u5ea6, height \u9ad8\u5ea6</li> <li>border \u6c38\u9060 = 0 (\u6b77\u53f2\u907a\u7559)</li> <li>format \u539f\u5716\u683c\u5f0f</li> <li>type \u8cc7\u6599\u985e\u578b</li> <li>data \u771f\u6b63\u7684\u5716\u50cf\u8cc7\u6599</li> </ul>"},{"location":"OpenGL/Texture/#texture-wrapping","title":"Texture Wrapping \u6750\u8cea\u74b0\u7e5e\u65b9\u5f0f","text":"<p>\u6750\u8cea\u5ea7\u6a19\u7684\u7bc4\u570d\u662f \\([0, 1]\\)(\u7b2c\u4e00\u8c61\u9650) \uff0c\u5982\u679c\u8d85\u51fa\u9019\u500b\u5ea7\u6a19\u4e4b\u5916\u9810\u8a2d\u7684\u884c\u70ba\u662f\u91cd\u8907\uff0c\u4f46\u5176\u5be6 OpenGL \u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u9078\u64c7:</p> \u74b0\u7e5e\u65b9\u5f0f \u63cf\u8ff0 <code>GL_REPEAT</code> \u9810\u8a2d\uff0c\u91cd\u8907\u6750\u8cea\u5716\u50cf <code>GL_MIRRORED_REPEAT</code> \u4e00\u6a23\u662f\u91cd\u8907\u6750\u8cea\uff0c\u4f46\u5716\u7247\u662f\u93e1\u50cf\u7684 <code>GL_CLAMP_TO_EDGE</code> \u6750\u8cea\u5ea7\u6a19\u6703\u88ab\u7d04\u675f\u5728 \\([0,1]\\)\uff0c\u8d85\u51fa\u7684\u90e8\u5206\u6703\u91cd\u8907\u908a\u7de3\u4e26\u7522\u751f\u62c9\u4f38\u7684\u6548\u679c <code>GL_CLAMP_TO_BORDER</code> \u8d85\u51fa\u7684\u5ea7\u6a19\u70ba\u6307\u5b9a\u7684\u984f\u8272 <p>\u9019\u4e9b\u9078\u9805\u90fd\u53ef\u4ee5\u5c0d\u55ae\u7368\u7684\u6750\u8cea\u5ea7\u6a19\u8ef8\u8a2d\u5b9a\uff0cs, t \u548c r \u8ef8(\u5982\u679c\u662f 3D \u7684\u8a71)</p> <pre><code>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_MIRRORED_REPEAT);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_MIRRORED_REPEAT);\n// glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_R, GL_MIRRORED_REPEAT);\n</code></pre> <ul> <li>\u9078\u64c7 <code>GL_CLAMP_TO_BORDER</code> \u5247\u9084\u9700\u8981\u6307\u5b9a\u4e00\u500b\u984f\u8272</li> </ul> <pre><code>float borderColor[] = {1.0f, 1.0f, 0.0f, 1.0f};\nglTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);\n</code></pre>"},{"location":"OpenGL/Texture/#texture-filtering","title":"Texture Filtering","text":"<p>\u7d0b\u7406\u5ea7\u6a19\u8ddf\u89e3\u6790\u5ea6\u7121\u95dc\uff0c\u6240\u4ee5 OpenGL \u8981\u77e5\u9053\u600e\u9ebc\u5c07\u7d0b\u7406\u50cf\u7d20(Texture Pixel, Texel)\u6620\u5c04\u5230\u7d0b\u7406\u5ea7\u6a19(Texture Coordinate)\u3002 \u5982\u679c\u4e00\u500b\u5f88\u5927\u7684\u7269\u9ad4\uff0c\u53ef\u662f\u7d0b\u7406\u89e3\u6790\u5ea6\u5f88\u4f4e\uff0c\u5c31\u6703\u6709\u660e\u986f\u7684\u7455\u75b5\u51fa\u73fe\u3002</p> <ul> <li> <p>\u7d0b\u7406\u6ffe\u6ce2 Texture Filter</p> <ul> <li><code>GL_NEAREST</code></li> <li><code>GL_LINEAR</code></li> <li>\u5176\u4ed6\u904e\u6ffe\u65b9\u5f0f\uff0c\u53c3\u898b</li> </ul> </li> <li> <p>\u9130\u8fd1\u6ffe\u6ce2 Nearest Neighbor Filtering</p> <ul> <li>OpenGL \u9810\u8a2d\u4f7f\u7528 <code>GL_NEAREST</code></li> <li>\u9078 Texture Coordinate \u6700\u63a5\u8fd1\u7684 \u7d0b\u7d20(Texel)</li> <li>\u770b\u8d77\u4f86\u7522\u751f\u4e86\u9846\u7c92\u72c0</li> </ul> </li> </ul> <p></p> <ul> <li>\u96d9\u7dda\u6027\u904e\u6ffe Bilinear Filtering<ul> <li><code>GL_LINEAR</code></li> <li>\u57fa\u65bc\u7d0b\u7406\u5ea7\u6a19\u9644\u8fd1\u7684\u7d0b\u7406\u50cf\u7d20\uff0c\u8a08\u7b97\u63d2\u503c\uff0c\u8fd1\u4f3c\u51fa\u9019\u4e9b\u7d0b\u7406\u50cf\u7d20\u5011\u4e4b\u9593\u7684\u984f\u8272</li> <li>\u7d0b\u7406\u5ea7\u6a19\u96e2\u8a72\u7d0b\u7406\u50cf\u7d20\u8d8a\u63a5\u8fd1\u5247\u5c0d\u6700\u7d42\u984f\u8272\u8ca2\u737b\u8d8a\u5927</li> <li>\u770b\u8d77\u4f86\u5e73\u6ed1</li> </ul> </li> </ul> <p></p> <p></p> <ul> <li>OpenGL \u53ef\u4ee5\u8a2d\u5b9a\u7d0b\u7406\u5728\u653e\u5927\u6216\u7e2e\u5c0f\u6642\u8981\u4f7f\u7528\u7684\u904e\u6ffe\u65b9\u5f0f<ul> <li><code>GL_TEXTURE_MIN_FILTER</code> \u7e2e\u5c0f</li> <li><code>GL_TEXTURE_MAG_FILTER</code> \u653e\u5927</li> </ul> </li> </ul> <pre><code>// \u7e2e\u5c0f\u4f7f\u7528 GL_NEAREST\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n// \u653e\u5927\u4f7f\u7528 GL_LINEAR\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n</code></pre>"},{"location":"OpenGL/Texture/#mipmapping","title":"Mipmapping","text":"<p>\u5047\u5982\u8aaa\u5834\u666f\u5728\u958b\u95ca\u7684\u5730\u65b9\uff0c\u6709\u4e0a\u5343\u500b\u7269\u9ad4\uff0c\u6bcf\u500b\u7269\u9ad4\u4e0a\u90fd\u6709\u7d0b\u7406\uff0c\u8fd1\u8655\u7684\u7269\u9ad4\u7684\u7d0b\u7406\u89e3\u6790\u5ea6\u5f88\u9ad8\uff0c\u4f46\u9060\u8655\u7684\u7269\u9ad4\u53ef\u80fd\u53ea\u7522\u751f\u5f88\u5c0f\u7684\u7247\u6bb5(Fragment)\uff0c\u5728\u9ad8\u89e3\u6790\u5ea6\u7684\u7d0b\u7406\u4e2d\u9019\u7a2e\u7269\u9ad4\u7684\u984f\u8272\u901a\u5e38\u90fd\u4e0d\u6b63\u78ba\uff0c\u4e26\u4e14\u4e5f\u6d6a\u8cbb\u8a18\u61b6\u9ad4\u3002</p> <p></p> <p>\u591a\u7d1a\u6f38\u9060\u7d0b\u7406(Mipmap)\u662f\u4e00\u7cfb\u5217\u7684\u7d0b\u7406\u5716\u50cf\uff0c\u5f8c\u4e00\u500b\u7684\u5927\u5c0f\u662f\u524d\u500b\u7684\u4e8c\u5206\u4e4b\u4e00\u3002\u7576\u89c0\u5bdf\u8005\u7684\u8ddd\u96e2\u8d85\u904e\u4e00\u5b9a\u7684\u95be\u503c(threshold)\uff0c\u81ea\u52d5\u5207\u63db\u81f3\u9069\u5408\u8a72\u8ddd\u96e2\u7684\u7d0b\u7406\u3002\u8ddd\u96e2\u9060\u7528\u89e3\u6790\u5ea6\u6bd4\u8f03\u5c0f\u7684\uff0c\u4e5f\u4e0d\u5bb9\u6613\u88ab\u5bdf\u89ba\u3002</p> <p>Mipmap \u53ef\u4ee5\u81ea\u5df1\u624b\u52d5\u7522\u751f\uff0c\u4e0d\u904e OpenGL \u53ef\u4ee5\u5e6b\u6211\u5011\u81ea\u52d5\u7522\u751f\u3002</p> <ul> <li>\u7d0b\u7406\u904e\u6ffe\u7b49\u7d1a + Mipmap<ul> <li><code>_MIPMAP_NEAREST</code><ul> <li>\u4f7f\u7528\u6700\u63a5\u8fd1\u7684 Mip Level</li> </ul> </li> <li><code>_MIPMAP_LINEAR</code><ul> <li>\u5728\u5169\u500b\u6700\u63a5\u8fd1\u7684 Mip Level \u63d2\u503c</li> </ul> </li> </ul> </li> </ul> <pre><code>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\nglGenerateMipmap(GL_TEXTURE_2D);\n</code></pre> <p>Info</p> <p>\u653e\u5927\u904e\u6ffe\u4e0d\u53ef\u4ee5\u4f7f\u7528 Mipmap \uff0c\u56e0\u70ba Mipmap \u662f\u7d66\u7e2e\u5c0f\u7d0b\u7406\u4f7f\u7528\u7684</p>"},{"location":"OpenGL/Texture/#using-textures","title":"Using Textures","text":"<p>Need to prepare texture coordinates in vertices like:</p> <pre><code>float vertices[] = {\n//     ---- \u4f4d\u7f6e ----    \u7d0b\u7406\u5ea7\u6a19 -\n     0.5f,  0.5f, 0.0f, 1.0f, 1.0f,   // \u53f3\u4e0a\n     0.5f, -0.5f, 0.0f, 1.0f, 0.0f,   // \u53f3\u4e0b\n    -0.5f, -0.5f, 0.0f, 0.0f, 0.0f,   // \u5de6\u4e0b\n    -0.5f,  0.5f, 0.0f, 0.0f, 1.0f    // \u5de6\u4e0a\n};\n</code></pre> <ul> <li>Setting up vertex attributes</li> </ul> <pre><code>uint32_t aPos = glGetAttribLocation(shader, \"aPos\");\nglVertexAttribPointer(aPos, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(float), (void *)0);\nglEnableVertexAttribArray(aPos);\nuint32_t aTexCoord = glGetAttribLocation(shader, \"aTexCoord\");\nglVertexAttribPointer(aTexCoord, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(float), (void*)(3*sizeof(float)));\nglEnableVertexAttribArray(aTexCoord);\n</code></pre> <ul> <li>In Shaders<ul> <li>vs     <pre><code>#version 450 core\nlayout (location = 0) in vec3 aPos;\nlayout (location = 1) in vec2 aTexCoord;\n\nout vec2 TexCoord;\n\nvoid main()\n{\n    gl_Position = vec4(aPos.x, aPos.y, aPos.z, 1.0);\n    TexCoord = aTexCoord;\n}\n</code></pre></li> <li>fs     <pre><code>#version 450 core\nout vec4 FragColor;\n\nin vec2 TexCoord;\n\nuniform sampler2D tex;\n\nuniform vec4 fColor;\n\nvoid main()\n{\n    FragColor = texture(tex, TexCoord) * fColor;\n}\n</code></pre></li> </ul> </li> </ul> <p>Info</p> <p>GLSL \u5167\u5efa texture() \u51fd\u6578\u4f86\u63a1\u6a23\uff0c\u7b2c\u4e00\u500b\u53c3\u6578\u662f\u63a1\u6a23\u7684\u7d0b\u7406\uff0c\u7b2c\u4e8c\u500b\u53c3\u6578\u662f\u7d0b\u7406\u5ea7\u6a19\uff0c\u8f38\u51fa\u53bb\u7d0b\u7406\u5ea7\u6a19(\u63d2\u503c\u5f8c)\u4e26\u4e14\u7d93\u904e Filter \u5f8c\u7684\u984f\u8272\u3002</p> <ul> <li>Bind texture units</li> </ul> <pre><code>glActiveTexture(GL_TEXTURE0); // \u555f\u7528\u7b2c 0 \u865f texture\nglBindTexture(GL_TEXTURE_2D, texture); // \u5c07\u7d0b\u7406\u7d81\u5b9a\u4e0a GL_TEXTURE0\n</code></pre>"},{"location":"OpenGL/Texture/#bind-multiple-textures","title":"Bind multiple textures","text":"<ul> <li>fs</li> </ul> <pre><code>#version 450 core\n\nuniform sampler2D tex1;\nuniform sampler2D tex2;\n\nvoid main()\n{\n    FragColor = mix(texture(tex1, TexCoord), texture(tex2, TexCoord), 0.2);\n}\n</code></pre> <p>Specify different texture unit for two textures</p> <pre><code>/* Create, Load Texture */\n/* ... */\nglUseProgram(shader);\n// Set Texture units\nglUniform1i(glGetUniformLocation(shader, \"tex1\"), 0);\nglUniform1i(glGetUniformLocation(shader, \"tex2\"), 1);\n\nwhile(...)\n{\n    /* ... */\n\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, texture1);\n    glActiveTexture(GL_TEXTURE1);\n    glBindTexture(GL_TEXTURE_2D, texture2);\n\n    glBindVertexArray(VAO);\n    glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);\n}\n</code></pre>"},{"location":"OpenGL/Transform/","title":"OpenGL Transform","text":""},{"location":"OpenGL/Transform/#_1","title":"\u77e9\u9663\u7d44\u5408","text":"<p>\u591a\u500b\u8b8a\u63db\u77e9\u9663\u53ef\u4ee5\u7528\u4e58\u6cd5\u878d\u5408\u5230\u4e00\u500b\u77e9\u9663\u4e2d\u3002\u4f8b\u5982\uff0c\u5148\u7e2e\u653e\u5169\u500d\u3001\u518d\u4f4d\u79fb\\((1,2,3)\\) \u77e9\u9663\u4e58\u6cd5\u662f\u5f9e\u6700\u53f3\u908a\u958b\u59cb\uff0c\u4f9d\u5e8f\u5f80\u5de6\u4e58\uff0c\u6240\u4ee5\u662f\u6700\u53f3\u908a\u7684\u64cd\u4f5c\u6700\u5148\u767c\u751f\u3002</p> \\[ Trans . Scale = \\begin{bmatrix} \\color{red}1 &amp; \\color{red}0 &amp; \\color{red}0 &amp; \\color{red}1 \\\\ \\color{green}0 &amp; \\color{green}1 &amp; \\color{green}0 &amp; \\color{green}2 \\\\ \\color{blue}0 &amp; \\color{blue}0 &amp; \\color{blue}1 &amp; \\color{blue}3 \\\\ \\color{purple}0 &amp; \\color{purple}0 &amp; \\color{purple}0 &amp; \\color{purple}1 \\end{bmatrix} . \\begin{bmatrix} \\color{red}2 &amp; \\color{red}0 &amp; \\color{red}0 &amp; \\color{red}0 \\\\ \\color{green}0 &amp; \\color{green}2 &amp; \\color{green}0 &amp; \\color{green}0 \\\\ \\color{blue}0 &amp; \\color{blue}0 &amp; \\color{blue}2 &amp; \\color{blue}0 \\\\ \\color{purple}0 &amp; \\color{purple}0 &amp; \\color{purple}0 &amp; \\color{purple}1 \\end{bmatrix} = \\begin{bmatrix} \\color{red}2 &amp; \\color{red}0 &amp; \\color{red}0 &amp; \\color{red}1 \\\\ \\color{green}0 &amp; \\color{green}2 &amp; \\color{green}0 &amp; \\color{green}2 \\\\ \\color{blue}0 &amp; \\color{blue}0 &amp; \\color{blue}2 &amp; \\color{blue}3 \\\\ \\color{purple}0 &amp; \\color{purple}0 &amp; \\color{purple}0 &amp; \\color{purple}1 \\end{bmatrix} \\\\ \\begin{bmatrix} \\color{red}2 &amp; \\color{red}0 &amp; \\color{red}0 &amp; \\color{red}1 \\\\ \\color{green}0 &amp; \\color{green}2 &amp; \\color{green}0 &amp; \\color{green}2 \\\\ \\color{blue}0 &amp; \\color{blue}0 &amp; \\color{blue}2 &amp; \\color{blue}3 \\\\ \\color{purple}0 &amp; \\color{purple}0 &amp; \\color{purple}0 &amp; \\color{purple}1 \\end{bmatrix} . \\begin{bmatrix} x \\\\ y \\\\ z \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} \\color{red}2x + \\color{red}1 \\\\ \\color{green}2y + \\color{green}2  \\\\ \\color{blue}2z + \\color{blue}3 \\\\ 1 \\end{bmatrix} \\] <p>\u4e0d\u540c\u7684\u64cd\u4f5c\u4e4b\u9593\u53ef\u80fd\u76f8\u4e92\u5f71\u97ff\uff0c\u4f9d\u7167\u7e2e\u653e\u3001\u65cb\u8f49\u3001\u4f4d\u79fb\u7684\u9806\u5e8f\u7d44\u5408\u77e9\u9663\uff0c\u5426\u5247\u64cd\u4f5c\u9593\u6703\u76f8\u4e92\u5f71\u97ff</p> \\[ M_{\\text{transform}} = M_{\\text{Translate}} \\cdot M_{\\text{Rotate}} \\cdot M_{\\text{Scale}} \\]"},{"location":"OpenGL/Transform/#glm","title":"GLM","text":"<p>OpenGL Mathematics\uff0c\u662f\u4e00\u500b header-only \u7684 OpenGL \u6578\u5b78\u51fd\u5f0f\u5eab</p> <pre><code>glm::vec4 vec(1.0f, 0.0f, 0.0f, 1.0f);\n\nglm::mat4 trans(1.0f);\ntrans = glm::translate(trans, glm::vec3(1.0f, 1.0f, 0.0f));\nvec = trans * vec;\nprintf(\"%d %d %d\\n\", vec.x, vec.y, vec.z);\n</code></pre> <ul> <li>\u7e2e\u653e 0.5 \u500d\uff0c\u9006\u6642\u91dd\u9078\u8f49 90 \u5ea6</li> </ul> <pre><code>glm::mat4 trans;\ntrans = glm::rotate(trans, glm::radian(90.f), glm::vec3(0.0, 0.0, 1.0));\ntrans = glm::scale(trans, glm::vec3(0.5, 0.5, 0.5));\n</code></pre> <p>Danger</p> <p>\u6700\u5f8c\u5728\u628a <code>trans</code> \u8ddf\u9ede\u5ea7\u6a19\u76f8\u4e58\u6642\uff0c\u662f\u9760\u53f3\u7684\u77e9\u9663\u5148\u8ddf\u9ede\u76f8\u4e58\uff0c\u6240\u4ee5\u64cd\u4f5c\u6703\u662f\u76f8\u53cd\u7684 \u5728\u88fd\u4f5c <code>trans</code> \u6642\u662f\u5148\u65cb\u8f49\u518d\u7e2e\u653e\uff0c\u4f46\u662f\u5c0d\u65bc\u8a72\u9ede\u5ea7\u6a19\u662f\u5148\u7e2e\u653e\u518d\u65cb\u8f49\u3002</p> <ul> <li>\u4fee\u6539 Vertex Shader \uff0c\u65b0\u589e <code>mat4</code></li> </ul> <pre><code>#version 450 core\nlayout (location = 0) in vec3 aPos;\nlayout (location = 1) in vec3 aVertColor;\nlayout (location = 2) in vec2 aTexCoord;\n\nout vec3 VertColor;\nout vec2 TexCoord;\n\nuniform mat4 vTransform;\n\nvoid main()\n{\n    gl_Position = vTransform * vec4(aPos, 1.0);\n    TexCoord = aTexCoord;\n    VertColor = aVertColor;\n}\n</code></pre> <ul> <li>\u5c07\u77e9\u9663\u50b3\u5230 Vertex Shader</li> </ul> <pre><code>int transformLoc = glGetUniformLocation(program, \"vTransform\");\nglUniformMatrix4fv(transformLoc, 1, GL_FALSE, glm::value_ptr(trans));\n</code></pre>"},{"location":"OpenGL/glsl/","title":"OpenGL GLSL","text":""},{"location":"OpenGL/glsl/#data-type","title":"Data Type","text":"<p>GLSL \u6709C\u8a9e\u8a00\u53ca\u5176\u4ed6\u8a9e\u8a00\u5927\u591a\u90fd\u6709\u7684 type:<code>int</code>, <code>float</code>, <code>double</code>, <code>uint</code>, <code>bool</code>\uff0c\u53e6\u4f4d\u9084\u6709\u5169\u7a2e\u5bb9\u5668 type: \u5411\u91cf(Vector)\u8ddf\u77e9\u9663(Matrix)</p> <ul> <li> <p>\u5411\u91cf</p> <ul> <li>\u53ef\u4ee5\u6709 \\([1, 4]\\) \u500b\u5206\u91cf</li> <li><code>vecn</code> \u5305\u542b \\(n\\) \u500b <code>float</code></li> <li><code>bvecn</code> \u5305\u542b \\(n\\) \u500b <code>bool</code></li> <li><code>ivecn</code> \u5305\u542b \\(n\\) \u500b <code>int</code></li> <li><code>uvecn</code> \u5305\u542b \\(n\\) \u500b <code>unsigned int</code></li> <li><code>dvecn</code> \u5305\u542b \\(n\\) \u500b <code>double</code></li> </ul> </li> <li> <p>\u5206\u91cf\u7528 <code>.x</code>, <code>.y</code>, <code>.z</code>, <code>.w</code> \u4f86\u5b58\u53d6\u5206\u91cf\uff0c\u6216\u662f<code>rgba</code>(\u984f\u8272)\u8ddf<code>stpq</code>(\u6750\u8cea)\u4f86\u5b58\u53d6\u3002</p> </li> <li> <p>\u91cd\u7d44(Swizzling)</p> <ul> <li>\u53ef\u4ee5\u7528\u5206\u91cf\u7684\u7d44\u5408\u4f86\u5efa\u7acb\u65b0\u7684 vec <pre><code>vec2 someVec;\nvec4 differentVec = someVec.xyxx;\nvec3 anotherVec = differentVec.zyw;\nvec4 otherVec = someVec.xxxx + anotherVec.yxzy;\n</code></pre></li> </ul> </li> </ul>"},{"location":"OpenGL/glsl/#input-output","title":"Input &amp; Output","text":"<p>GLSL \u53ef\u4ee5\u7528 <code>in</code>, <code>out</code> \u4f86\u6a19\u793a\u4e00\u500b\u8b8a\u6578\u662f\u50b3\u5165\u9084\u662f\u50b3\u51fa\uff0c\u4e0a\u500b Shader \u6240\u6307\u5b9a\u7684 <code>out</code> \u6703\u5c0d\u61c9\u5230\u4e0b\u500b Shader \u6240\u6307\u5b9a\u7684 <code>in</code> \u8b8a\u6578\uff0c\u540d\u7a31\u8981\u76f8\u540c\u3002</p> <ul> <li>Vertex Shader <pre><code>#version 330 core\nlayout (location = 0) in vec3 aPos;\nlayout (location = 1) in vec3 aColor;\n\nout vec3 ourColor; // \u8f38\u51fa\u5230 Fragment Shader\n\nvoid main() {\n    gl_Position = vec4(aPos, 1.0);\n    ourColor = aColor;\n}\n</code></pre></li> <li>Fragment Shader <pre><code>#version 330 core\nin vec3 ourColor;   // \u5f9e Vertex Shader \u8f38\u5165\u7684\u984f\u8272\uff0c\u540d\u7a31\u8981\u4e00\u6a23\n\nout vec4 FragColor;\n\nvoid main() {\n    FragColor = ourColor;    \n}\n</code></pre></li> </ul>"},{"location":"OpenGL/glsl/#uniform","title":"Uniform","text":"<p>Uniform \u662f CPU \u5411 GPU \u7684 Shader \u767c\u9001\u6578\u64da\u7684\u65b9\u5f0f\uff0c\u4f46\u8ddf Vertex Attribute \u6709\u9ede\u4e0d\u540c\u3002 Uniform \u53ef\u4ee5\u5728\u6240\u6709\u7684 Shader \u4e2d\u5b58\u53d6\uff0c\u800c\u4e0d\u7528\u50cf Vertex Attribute \u662f\u8981\u7528 <code>in</code>, <code>out</code> \u50b3\u8cc7\u6599\uff0c\u610f\u601d\u662f Uniform \u662f Global \u7684\u8b8a\u6578\uff0c\u5b83\u5fc5\u9808\u662f \u7368\u7279\u7684(Unique) \u7684\u3002</p> <pre><code>#version 330 core\nout vec4 FragColor;\n\nuniform vec4 ourColor; // \u5728 Code \u4e2d\u50b3\u5165\n\nvoid main()\n{\n    FragColor = ourColor;\n}\n</code></pre> <p>Warning</p> <p>\u5982\u679c\u5ba3\u544a\u4e86\u4e00\u500b <code>uniform</code> \u537b\u6c92\u6709\u4f7f\u7528\uff0c\u7de8\u8b6f\u5668\u53ef\u80fd\u6703\u79fb\u9664\u8a72\u8b8a\u6578\uff0c\u5c0e\u81f4\u5728\u6700\u5f8c\u7de8\u8b6f\u51fa\u7684\u7248\u672c\u4e0d\u6703\u5305\u542b\u5b83</p> <ul> <li>\u50b3\u5165 uniform<ul> <li>\u4f7f\u7528 <code>glGetUniformLocation()</code> \u4ee5\u53ca <code>glUniform4f()</code> <pre><code>float green = /* expression for calculating green */;\n// \u67e5\u8a62 ourColor \u7684\u4f4d\u7f6e\nint vertexColorLocation = glGetUniformLocation(shaderProgram, \"ourColor\");\n// \u555f\u7528 shader\nglUseProgram(shaderProgram);\n// \u50b3\u5165 ourColor \u7684\u503c (vec4)\nglUniform4f(vertexColorLocation, 0.0f, green, 0.0f, 1.0f);\n</code></pre></li> </ul> </li> </ul> <p>Info</p> <p>\u56e0\u70ba OpenGL \u662f C \u7684 Library\uff0c\u6240\u4ee5\u4e0d\u652f\u63f4 Overloading</p> \u5f8c\u7db4 \u610f\u7fa9 <code>f</code> float <code>i</code> int <code>ui</code> unsigned int <code>3f</code> \u4e09\u500b float <code>fv</code> array of float"},{"location":"Other/gmail_smtp/","title":"Use SMTP send gmail","text":"<ul> <li><code>smtp.gmail.com</code></li> <li>username/password: <code>your@gmail.com/password</code></li> <li>port: 587 TLS, 465 SSL</li> </ul> <p>Warning</p> <p>Remember to turn on \"Allow less secure apps\" in https://myaccount.google.com/security#connectedapps</p>"},{"location":"Other/gmail_smtp/#references","title":"References","text":"<p>https://kinsta.com/blog/gmail-smtp-server/</p> <p>https://stackoverflow.com/questions/33939393/failed-to-authenticate-on-smtp-server-error-using-gmail</p>"},{"location":"Other/pi/","title":"raspberry pi","text":"<ul> <li>check camera <pre><code>vcgencmd get_camera\n</code></pre></li> </ul> <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\nsudo rpi-update\nsudo modprobe bcm2835-v4l2\n</code></pre>"},{"location":"Other/pi/#raspistill","title":"raspistill","text":"<ul> <li>Take a pic</li> </ul> <pre><code>raspistill -o &lt;name&gt;.jpg\n</code></pre>"},{"location":"Other/pi/#fswebcam","title":"fswebcam","text":"<ul> <li>Take a pic</li> </ul> <pre><code>fswebcam -r 1280x720 --no-banner name.jpg\n</code></pre>"},{"location":"Other/pi/#ref","title":"Ref","text":"<p>https://www.raspberrypi.org/forums/viewtopic.php?t=194311</p> <p>Using a standard USB webcam https://www.raspberrypi.org/documentation/usage/webcams/</p>"},{"location":"Programming%20Language/C/VAL/","title":"Variable Argument List","text":""},{"location":"Programming%20Language/C/VAL/#printf-like","title":"printf-like","text":"<pre><code>void my_printf(const char *fmt, ...)\n{\n    va_list list;\n\n    va_start(list, fmt);\n    vprintf_functions(fmt, list);\n    va_end(list);\n}\n</code></pre>"},{"location":"Programming%20Language/C/VAL/#gcc-warning","title":"gcc warning","text":"<p>Type-checked against a format string. Enable by <code>-Wformat</code></p> <pre><code>format (archetype, string-index, first-to-check)\n</code></pre> <ul> <li>Types: <code>printf</code>, <code>scanf</code>, <code>strftime</code> or <code>strfmon</code>. <code>ms_printf</code>, <code>ms_strftime</code> in mingw. <code>gnu_xxx</code> for glibc</li> </ul> <pre><code>extern int\nmy_printf (void *my_object, const char *my_format, ...)\n      __attribute__ ((format (printf, 2, 3)));\n</code></pre> <p>member function in C++ have the <code>this</code> argument. So the index must be counted from 2.</p> <p>https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#Common-Function-Attributes</p>"},{"location":"Programming%20Language/C/snippets/","title":"snippets","text":""},{"location":"Programming%20Language/C/snippets/#string-format-malloc","title":"string format malloc","text":"<pre><code>#define ssprintf(...) \\\n    ({                \\\n        int _ss_size = snprintf(0, 0, ##__VA_ARGS__);           \\\n        char *_ss_ret = (char*)malloc(_ss_size * sizeof(char)); \\\n        snprintf(_ss_ret, _ss_size+1, ##__VA_ARGS__);           \\\n        _ss_ret;                                                \\\n    })\n</code></pre>"},{"location":"Programming%20Language/C/unix/","title":"*nix","text":""},{"location":"Programming%20Language/C/unix/#realpath","title":"realpath","text":"<pre><code>#include &lt;limits.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar path[PATH_MAX];\nchar *p = realpath(\"../path/to/files\", path);\n</code></pre>"},{"location":"Programming%20Language/C/unix/#retrieve-filename-from-file-descriptor","title":"Retrieve filename from file descriptor","text":"<ul> <li>Use <code>readlink</code> on <code>/proc/self/fd/XXX</code> (Linux)</li> </ul> <pre><code>char fdpath[PATH_MAX];\nsnprintf(fdpath, sizeof(fdpath), \"/proc/self/fd/%d\", fd);\nint siz = readlink(fdpath, buf, buf_size);\nif(siz != -1)\n    buf[siz == PATH_MAX ? PATH_MAX-1 : siz] = '\\0';\n</code></pre> <ul> <li>Use <code>fcntl</code></li> </ul> <pre><code>#include &lt;sys/syslimits.h&gt;\n#include &lt;fcntl.h&gt;\n\nchar filePath[PATH_MAX];\nif (fcntl(fd, F_GETPATH, filePath) != -1)\n{\n    // do something with the file path\n}\n</code></pre>"},{"location":"Programming%20Language/C/libs/stb_image/","title":"stb_image","text":"<p>stb_image.h \u662f\u4e00\u500b header-only \u7684\u5716\u7247\u8f09\u5165 library \u662f stb \u7cfb\u5217\u7684\u5176\u4e2d\u4e4b\u4e00\uff0c\u652f\u63f4 jpg, png, tga, bmp, psd, gif, hdr, pic \u7b49\u683c\u5f0f\u3002</p> <ul> <li> <p>\u4e0b\u8f09 <code>stb_image.h</code> \u4e26\u52a0\u5230\u4f60\u7684\u5c08\u6848\u4e2d\uff0c\u4e26\u53e6\u65b0\u589e\u4e00\u500b <code>.cpp</code> \u8f38\u5165\u4ee3\u78bc     <pre><code>#define STB_IMAGE_IMPLEMENTATION\n#include \"stb_image.h\"\n</code></pre></p> </li> <li> <p>\u8f09\u5165\u5716\u7247</p> </li> </ul> <pre><code>int width, height, nrChannels;\nunsigned char *data = stbi_load(\"example.jpg\", &amp;width, &amp;height, &amp;nrChannels, 0);\n\n// free\nstbi_image_free(data);\n</code></pre>"},{"location":"Programming%20Language/C%2B%2B/Algorithm/","title":"Algorithm","text":""},{"location":"Programming%20Language/C%2B%2B/Algorithm/#remove-remove_if","title":"remove, remove_if","text":"<pre><code>auto it = std::remove(v.begin(), v.end(), 10);\nstd::erase(it, v.end()); // actual remove\n</code></pre> <p>https://www.cnblogs.com/fortunely/p/15694743.html</p>"},{"location":"Programming%20Language/C%2B%2B/Algorithm/#max_element-min_element","title":"max_element, min_element","text":"<pre><code>int max = *std::max_element(v.begin(), v.end());\nint min = *std::min_element(v.begin(), v.end());\n</code></pre>"},{"location":"Programming%20Language/C%2B%2B/Algorithm/#_1","title":"\u96c6\u5408\u904b\u7b97","text":"<p>\u53ef\u4ee5\u7528\u5728\u5176\u4ed6 container \u4e0a\uff0c\u4f46\u8981\u6ce8\u610f\u8981\u4e0d\u8981 sort\uff0c\u548c <code>inserter</code> \u6216 <code>back_inserter</code></p> <pre><code>set&lt;int&gt; a = {1, 2, 3};\nset&lt;int&gt; b = {3, 4, 5};\nset&lt;int&gt; c;\n\nset_union(a.begin(), a.end(), b.begin(), b.end(), inserter(c, c.begin()));\n// 1 2 3 4 5\n\nset_intersection(a.begin(), a.end(), b.begin(), b.end(), inserter(c, c.begin()));\n// 3\n\nset_difference(a.begin(), a.end(), b.begin(), b.end(), inserter(c, c.begin()));\n// 1 2\n\nset_difference(b.begin(), b.end(), a.begin(), a.end(), inserter(c, c.begin()));\n// 4 5\n\nset_symmetric_difference(a.begin(), a.end(), b.begin(), b.end(), inserter(c, c.begin()));\n// 1 2 4 5\n</code></pre>"},{"location":"Programming%20Language/C%2B%2B/clang-tidy/","title":"Clang tidy","text":""},{"location":"Programming%20Language/C%2B%2B/clang-tidy/#disable-lint-in-text","title":"Disable Lint in text","text":"<pre><code>badcode;  // NOLINT\n\n// NOLINTNEXTLINE\nbadcode;\n\nbadcode; // NOLINT(cert-err-58-cpp)\n</code></pre> <p>https://stackoverflow.com/questions/37950439/inline-way-to-disable-clang-tidy-checks</p>"},{"location":"Programming%20Language/C%2B%2B/cmake/","title":"CMake","text":""},{"location":"Programming%20Language/C%2B%2B/cmake/#commandline","title":"Commandline","text":"<ul> <li>Generate<ul> <li>CMake Generators</li> </ul> </li> </ul> <pre><code>cmake -G &lt;generator&gt; -B &lt;build_dir&gt; -D &lt;build_type&gt; &lt;path_to_proj&gt;\n# Or\nmkdir &lt;build_dir&gt; &amp;&amp; cd &lt;build_dir&gt; &amp;&amp; cmake -G &lt;generator&gt; ..\n</code></pre> <ul> <li> <p><code>CMAKE_BUILD_TYPE</code></p> <ul> <li><code>Debug</code> \u7522\u751f\u9664\u932f\u8cc7\u8a0a</li> <li><code>Release</code> \u9032\u884c\u57f7\u884c\u901f\u5ea6\u6700\u4f73\u5316</li> <li><code>RelWithDebInfo</code> \u9032\u884c\u57f7\u884c\u901f\u5ea6\u6700\u4f73\u5316\uff0c\u4f46\u4ecd\u7136\u6703\u555f\u7528 debug flag</li> <li><code>MinSizeRel</code>  \u9032\u884c\u7a0b\u5f0f\u78bc\u6700\u5c0f\u5316</li> </ul> </li> <li> <p>Compile</p> </li> </ul> <pre><code>cmake --build &lt;build_dir&gt; --config Release\n\n# makefile\ncd &lt;build&gt; &amp;&amp; make -j&lt;process&gt;\n</code></pre> <ul> <li>Install</li> </ul> <pre><code>cmake --build &lt;build_dir&gt; --target install\n\n# makefile\ncd &lt;build_dir&gt; &amp;&amp; make install\n</code></pre>"},{"location":"Programming%20Language/C%2B%2B/cmake/#cmakeliststxt","title":"<code>CMakeLists.txt</code>","text":"<ul> <li>Set compile option for a target <pre><code>target_compile_options(target_name\n    PUBLIC -optionA -optionB ...\n)\n</code></pre><ul> <li>e.g. <pre><code>-Wall -Wextra -Wshadow -Wnon-virtual-dtor -pedantic -Woverloaded-virtual -Wduplicated-cond -Wduplicated-branches -Wlogical-op -Wnull-dereference -Wno-sign-compare\n</code></pre></li> </ul> </li> </ul>"},{"location":"Programming%20Language/C%2B%2B/cmake/#fetchcontent","title":"FetchContent","text":"<ul> <li> <p>Need cmake version <code>&gt;= 3.14</code> <pre><code>cmake_minimum_required(VERSION 3.14)\n# ...\ninclude(FetchContent)\nFetchContent_Declare(\n    DocTest\n    GIT_REPOSITORY \"https://github.com/onqtam/doctest\"\n    GIT_TAG \"932a2ca50666138256dae56fbb16db3b1cae133a\"\n)\nFetchContent_MakeAvailable(DocTest)\n# ...\ntarget_link_libraries(${PROJECT_NAME} doctest)\n</code></pre></p> </li> <li> <p>Included libraries must be installable.</p> </li> </ul>"},{"location":"Programming%20Language/C%2B%2B/cmake/#references","title":"References","text":"<p>Build types in CMake https://codeyarns.com/2015/05/14/build-types-in-cmake/</p> <p>CMake \u5165\u9580/\u52a0\u5165\u7de8\u8b6f\u9078\u9805 https://zh.m.wikibooks.org/zh-hant/CMake_%E5%85%A5%E9%96%80/%E5%8A%A0%E5%85%A5%E7%B7%A8%E8%AD%AF%E9%81%B8%E9%A0%85</p>"},{"location":"Programming%20Language/C%2B%2B/demangle/","title":"typeid and demangle","text":"<ul> <li>typeid</li> </ul> <pre><code>#include &lt;typeinfo&gt;\nclass Base {\npublic:\n    virtual void vvfunc() {}\n};\n\nclass Derived : public Base {};\n\ntemplate&lt;typename T&gt;\nvoid hello()\n{\n    cout &lt;&lt; \"hello, \" &lt;&lt; typeid(T).name() &lt;&lt; '\\n';\n}\n\nint main() {\n    cout &lt;&lt; typeid(123).name() &lt;&lt; '\\n';\n    cout &lt;&lt; typeid(1.0).name() &lt;&lt; '\\n';\n\n    Derived* pd = new Derived;\n    Base* pb = pd;\n    cout &lt;&lt; typeid( pb ).name() &lt;&lt; '\\n';   //prints \"P4Base\"\n    cout &lt;&lt; typeid( *pb ).name() &lt;&lt; '\\n';  //prints \"7Derived\"\n    cout &lt;&lt; typeid( pd ).name() &lt;&lt; '\\n';   //prints \"P7Derived\"\n    cout &lt;&lt; typeid( *pd ).name() &lt;&lt; '\\n';  //prints \"7Derived\"\n\n    int a;\n    int &amp;b = a;\n    double c;\n    if(typeid(a) == typeid(b))\n        puts(\"type a == type b\");\n    if(typeid(a) != typeid(c))\n        puts(\"type a != type c\");\n\n    hello&lt;long long&gt;();\n}\n</code></pre> <ul> <li>demangle</li> </ul> <pre><code>#include &lt;cxxabi.h&gt;\nint status = 0;\nabi::__cxa_demangle(name, 0, 0, &amp;status);\n</code></pre>"},{"location":"Programming%20Language/C%2B%2B/demangle/#references","title":"References","text":"<p>https://docs.microsoft.com/zh-tw/cpp/cpp/typeid-operator?view=vs-2019</p>"},{"location":"Programming%20Language/C%2B%2B/fileIO/","title":"I/O","text":""},{"location":"Programming%20Language/C%2B%2B/fileIO/#read-file-lines","title":"Read file lines","text":"<pre><code>#include &lt;fstream&gt;\nstd::ifstream file(\"file\");\nstd::string line;\nwhile (std::getline(file, line))\n{\n    // ...\n}\n</code></pre>"},{"location":"Programming%20Language/C%2B%2B/filesystem/","title":"filesystem","text":""},{"location":"Programming%20Language/C%2B%2B/filesystem/#cheatsheet","title":"Cheatsheet","text":"<ul> <li> <p>Convert <code>path::iterator</code> to string</p> <ul> <li>Use <code>.string()</code></li> </ul> </li> <li> <p>Remove trailing slash</p> <ul> <li><code>std::filesystem::canonical()</code> in C++17</li> <li>Erase the character before converting to path object</li> <li>Append a fake file and use <code>.parent_path()</code></li> </ul> </li> </ul> <pre><code>p /= \"FAKE.PATH\";\np = p.lexically_normal();\np = p.parent_path();\n</code></pre>"},{"location":"Programming%20Language/C%2B%2B/filesystem/#reference","title":"Reference","text":"<p>parent_path() with or without trailing slash - stackoverflow https://stackoverflow.com/questions/36941934/parent-path-with-or-without-trailing-slash</p>"},{"location":"Programming%20Language/C%2B%2B/map/","title":"map/unordered_map","text":""},{"location":"Programming%20Language/C%2B%2B/map/#unordered_map","title":"unordered_map","text":""},{"location":"Programming%20Language/C%2B%2B/map/#custom-class-as-key","title":"Custom Class as key","text":"<pre><code>// Example custom class\nstruct Foo\n{\n    string a;\n    int b;\n};\n</code></pre> <p>\u4f5c\u70ba key \u7684 class \u9700\u8981\u6709: 1. hash function 2. <code>operator==</code></p> <p>hash function \u53ef\u4ee5\u662f\u53bb\u5be6\u4f5c <code>struct std::hash&lt;T&gt;</code>\u3002</p> <pre><code>namespace std {\ntemplate &lt;&gt;\nstruct hash&lt;Foo&gt;\n{\n    std::size_t operator()(const Foo&amp; foo) const\n    {\n        return hash&lt;string&gt;{}(foo.a) ^\n               hash&lt;int&gt;{}(foo.b);\n    }\n};\n}\n\nunordered_map&lt;Foo, int&gt; m; // ok\n</code></pre> <p>\u6216\u662f\u81ea\u5df1\u5b9a\u7fa9\u4e00\u500b function object \u6216\u662f lambda \u7136\u5f8c\u4e1f\u5230 <code>unordered_map</code> \u7684\u7b2c\u4e09\u500b template \u53c3\u6578</p> <pre><code>std::unordered_map&lt;Foo, int&gt; m; // error\n\nstruct FooHash\n{\n    size_t operator()(const Foo&amp; foo) const\n    {\n        return std::hash&lt;string&gt;{}(foo.a) ^\n               std::hash&lt;int&gt;{}(foo.b);\n    }\n};\nstd::unordered_map&lt;Foo, int, FooHash&gt; m; // ok\n\nauto FooHashLambda = [](const Foo&amp; foo) -&gt; size_t {\n    return std::hash&lt;string&gt;{}(foo.a) ^\n           std::hash&lt;int&gt;{}(foo.b);\n};\nstd::unordered_map&lt;Foo, int, decltype(FooHashLambda)&gt; m2(1, FooHashLambda); // ok\n</code></pre> <p>https://ianyepan.github.io/posts/cpp-custom-hash/ https://marknelson.us/posts/2011/09/03/hash-functions-for-c-unordered-containers.html</p> <p>\u4ee5\u4e0a\u7bc4\u4f8b\u7684 hash \u65b9\u6cd5\u662f\u76f4\u63a5 XOR \u800c\u9019\u6a23\u5f88\u4e0d\u597d\uff0c\u70ba\u4e86\u907f\u514d hash collision\u61c9\u8a72\u7528\u66f4\u597d\u7684\u65b9\u6cd5: hash combine</p> <pre><code>template &lt;class T&gt;\ninline void hash_combine(std::size_t &amp; seed, const T &amp; v)\n{\n  std::hash&lt;T&gt; hasher;\n  seed ^= hasher(v) + 0x9e3779b9 + (seed &lt;&lt; 6) + (seed &gt;&gt; 2);\n}\n// \u4ee5\u4e0a\u5be6\u4f5c\u5176\u5be6\u5c31\u662f boost::hash_combine\n// #include &lt;boost/functional/hash.hpp&gt;\n// boost::hash_combine(seed, x);\n\nnamespace std\n{\ntemplate&lt;typename S, typename T&gt;\nstruct hash&lt;pair&lt;S, T&gt;&gt;\n{\ninline size_t operator()(const pair&lt;S, T&gt; &amp; v) const\n{\n  size_t seed = 0;\n  ::hash_combine(seed, v.first);\n  ::hash_combine(seed, v.second);\n  return seed;\n}\n};\n}\nunordered_map&lt;pair&lt;int,int&gt;,int&gt; m; // ok\n\n// \u6216\u662f\nstruct pair_hash {\n    template &lt;class T1, class T2&gt;\n    std::size_t operator () (const std::pair&lt;T1,T2&gt; &amp;p) const {\n        auto h1 = std::hash&lt;T1&gt;{}(p.first);\n        auto h2 = std::hash&lt;T2&gt;{}(p.second);\n        return h1 ^ h2;  \n    }\n};\nunordered_map&lt;pair&lt;int,int&gt;,int, pair_hash&gt; m; // ok\n</code></pre> <p>https://www.boost.org/doc/libs/1_35_0/doc/html/hash/combine.html https://gist.github.com/eugene-malashkin/884e225ff57aca1b9cbe</p> <pre><code>// boost example\n#include &lt;boost/functional/hash.hpp&gt;\nstruct KeyHasher\n{\n  std::size_t operator()(const Key&amp; k) const\n  {\n      using boost::hash_value;\n      using boost::hash_combine;\n.\n      std::size_t seed = 0;\n      hash_combine(seed,hash_value(k.first));\n      hash_combine(seed,hash_value(k.second));\n      hash_combine(seed,hash_value(k.third));\n      return seed;\n  }\n};\n</code></pre> <p>\u6216\u662f\u6709\u652f\u63f4 64-bit \u7684\u7248\u672c:</p> <pre><code>size_t hash_combine( size_t lhs, size_t rhs ) {\n  if constexpr (sizeof(size_t) &gt;= 8) {\n    lhs ^= rhs + 0x517cc1b727220a95 + (lhs &lt;&lt; 6) + (lhs &gt;&gt; 2);\n  } else {\n    lhs ^= rhs + 0x9e3779b9 + (lhs &lt;&lt; 6) + (lhs &gt;&gt; 2);\n  }\n  return lhs;\n}\n</code></pre> <p>https://stackoverflow.com/questions/5889238/why-is-xor-the-default-way-to-combine-hashes/27952689#27952689 https://stackoverflow.com/questions/17016175/c-unordered-map-using-a-custom-class-type-as-the-key</p>"},{"location":"Programming%20Language/C%2B%2B/priority_queue/","title":"priority_queue - Heap","text":"<pre><code>#include &lt;priority_queue&gt;\n</code></pre>"},{"location":"Programming%20Language/C%2B%2B/priority_queue/#construct","title":"Construct","text":"<pre><code>// Max Heap\npriority_queue&lt;int&gt; pq;\n\n// Min Heap\npriority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt; pq;\n</code></pre>"},{"location":"Programming%20Language/C%2B%2B/priority_queue/#operations","title":"Operations","text":"<pre><code>// Push\npq.push(1);\n\n// Access\nauto x = pq.top();\n\npq.pop();\n</code></pre>"},{"location":"Programming%20Language/C%2B%2B/priority_queue/#in-algorithm","title":"In <code>&lt;algorithm&gt;</code>","text":"<p>Use </p>"},{"location":"Programming%20Language/C%2B%2B/string/","title":"string","text":""},{"location":"Programming%20Language/C%2B%2B/string/#split","title":"split","text":"<ul> <li> <p><code>strtok</code> in C</p> </li> <li> <p><code>std::string::find</code> + <code>std::string::substr</code> in-place</p> </li> </ul> <pre><code>auto start = 0U;\nauto end = s.find(delim);\nwhile (end != std::string::npos)\n{\n    std::cout &lt;&lt; s.substr(start, end - start) &lt;&lt; std::endl;\n    start = end + delim.length();\n    end = s.find(delim, start);\n}\nstd::cout &lt;&lt; s.substr(start, end);\n</code></pre> <ul> <li><code>string_view</code> &gt;= C++17<ul> <li>TODO: testing</li> </ul> </li> </ul> <pre><code>std::vector&lt;std::string_view&gt; split(std::string_view buffer, const std::string_view delimeter = \" \")\n{\n    std::vector&lt;std::string_view&gt; ret{};\n    std::decay_t&lt;decltype(std::string_view::npos)&gt; pos{};\n    while ((pos = buffer.find(delimeter)) != std::string_view::npos)\n    {\n        const auto match = buffer.substr(0, pos);\n        if (!match.empty())\n            ret.push_back(match);\n        buffer = buffer.substr(pos + delimeter.size());\n    }\n    if (!buffer.empty())\n        ret.push_back(buffer);\n    return ret;\n}\n</code></pre> <ul> <li> <p>= C++20</p> <ul> <li>TODO: testing</li> </ul> </li> </ul> <pre><code>#include &lt;ranges&gt;\n#include &lt;string_view&gt;\nauto split = hello\n    | std::ranges::views::split(' ')\n    | std::ranges::views::transform([](auto&amp;&amp; str) { \n        return std::string_view(&amp;*str.begin(), std::ranges::distance(str)); \n    });\n</code></pre> <p>https://stackoverflow.com/questions/14265581/parse-split-a-string-in-c-using-string-delimiter-standard-c</p>"},{"location":"Programming%20Language/C%2B%2B/string/#contains","title":"contains","text":"<ul> <li><code>C++23</code></li> </ul> <pre><code>str.contains(\"niddle\");\n</code></pre> <ul> <li>Boost</li> </ul> <pre><code>#include &lt;boost/algorithm/string.hpp&gt;\nbool b = boost::algorithm::contains(s, t);\n</code></pre> <ul> <li>Vanilla</li> </ul> <pre><code>if (s1.find(s2) != std::string::npos) {\n    std::cout &lt;&lt; \"found!\" &lt;&lt; '\\n';\n}\n</code></pre>"},{"location":"Programming%20Language/C%2B%2B/string/#endswith-startswith","title":"endswith, startswith","text":"<p>TODO</p>"},{"location":"Programming%20Language/C%2B%2B/gibberish/CRTP/","title":"CRTP","text":"<p>TODO</p>"},{"location":"Programming%20Language/C%2B%2B/gibberish/RAAI/","title":"RAAI","text":"<p>TODO</p>"},{"location":"Programming%20Language/C%2B%2B/gibberish/SFINAE/","title":"SFINAE","text":"<p>TODO</p>"},{"location":"Programming%20Language/C%2B%2B/gibberish/detection/","title":"Detection Idiom","text":""},{"location":"Programming%20Language/javascript/string/","title":"string","text":""},{"location":"Programming%20Language/javascript/string/#format","title":"format","text":"<ul> <li><code>&gt;= ES6</code></li> </ul> <pre><code>let soMany = 10;\nconsole.log(`This is ${soMany} times easier!`);\n// \"This is 10 times easier!\n</code></pre> <ul> <li> <p>sprintf.js</p> </li> <li> <p>Implement your own <code>format</code></p> </li> </ul> <pre><code>if (!String.prototype.format) {\n  String.prototype.format = function() {\n    var args = arguments;\n    return this.replace(/{(\\d+)}/g, function(match, number) { \n      return typeof args[number] != 'undefined'\n        ? args[number]\n        : match\n      ;\n    });\n  };\n}\n</code></pre>"},{"location":"Programming%20Language/javascript/string/#find","title":"Find","text":"<ul> <li><code>indexOf()</code>/<code>lastIndexOf()</code></li> </ul> <pre><code>var str = \"Please locate where 'locate' occurs! locate\";\nvar first_pos = str.indexOf(\"locate\");\nvar last_pos = str.lastIndexOf(\"locate\");\n</code></pre> <ul> <li><code>search()</code>: search with regex<ul> <li>https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Guide/Regular_Expressions</li> </ul> </li> </ul> <pre><code>let str = '...';\nconst regex = /ab+c/g;\nlet pos = str.search(regex);\n</code></pre>"},{"location":"Programming%20Language/javascript/string/#splice-substr","title":"Splice, Substr","text":"<pre><code>var str = \"Apple, Banana, Kiwi\";\n\nstr.slice(7, 13);   // Banana\nstr.slice(-12, -6); // Banana\n\nstr.slice(7);       // Banana, Kiwi\nstr.slice(-4);      // Kiwi\n\nstr.substr(7, 6);   // Banana\nstr.substr(7);      // Banana, Kiwi\n\nstr.substr(-12, 6); // Banana\nstr.substr(-4);     // Kiwi\n</code></pre>"},{"location":"Programming%20Language/javascript/string/#replace","title":"Replace","text":"<pre><code>let str = \"Apple, Banana, Kiwi, Banana\";\nlet a = str.replace(\"Banana\", \"PP\");  // Apple, PP, Kiwi, Banana\nlet b = str.replace(/Banana/g, \"PP\"); // Apple, PP, Kiwi, PP\n</code></pre>"},{"location":"Programming%20Language/javascript/string/#uppercase-and-lowercase","title":"Uppercase and Lowercase","text":"<pre><code>let str = \"Hello World!\";\nlet a = str.toUpperCase(); // HELLO WORLD!\nlet b = str.toLowerCase(); // hello world!\n</code></pre>"},{"location":"Programming%20Language/javascript/string/#concate","title":"Concate","text":"<pre><code>var a = \"Hello\";\nvar b = \"World\";\nvar c = a.concat(\" \", b); // Hello World\n</code></pre>"},{"location":"Programming%20Language/javascript/string/#trim","title":"Trim","text":"<pre><code>let str = \"       Hello World!        \";\nlet a = str.trim(); // \"Hello World!\"\n</code></pre>"},{"location":"Programming%20Language/javascript/string/#padding","title":"Padding","text":"<pre><code>let str = \"5\";\nlet a = str.padStart(4, 0); // 0005\nlet b = str.padEnd(4, 0);   // 5000\n</code></pre>"},{"location":"Programming%20Language/javascript/string/#access","title":"Access","text":"<p>Danger</p> <p><code>str[]</code> is read-only in javascript. <code>string != array</code> in javascript.</p> <pre><code>let str = \"ABCDE\";\nstr.charAt(0);    // A\nstr.charCodeAt(0) // 72\nstr[0]            // A\n</code></pre>"},{"location":"Programming%20Language/javascript/string/#split","title":"Split","text":"<pre><code>let str = \"a,b,c,d,e\";\nlet a = str.split(\",\"); // [\"a\",\"b\",\"c\",\"d\",\"e\"]\n// str.split(/regex/)\n</code></pre>"},{"location":"Programming%20Language/python/cheatsheet/","title":"cheatsheet - python","text":""},{"location":"Programming%20Language/python/cheatsheet/#delete","title":"Delete","text":"<pre><code>deduplicate = lambda s,c: c.join([substring for substring in s.strip().split(c) if substring])\n\ndeduplicate('a    b      c', ' ') # \"a b c\"\n</code></pre>"},{"location":"Programming%20Language/python/decorator/","title":"decorator","text":"<ul> <li>Make a wrapper for function and provide a syntatic sugar</li> </ul> <pre><code>import functools\ndef my_decorator(func):\n    @functools.wraps(func)\n    def wrapper(*args, **kwargs):\n        # before\n        res = func(*args, **kwargs)\n        # after\n        return res\n    return wrapper\n# Usage\n@my_decorator\ndef hello():\n    print('Hello')\n</code></pre> <p><code>functools.wrap()</code> uses <code>functools.update_wrapper()</code> to update attributes like <code>__name__</code> and <code>__doc__</code> for type introspection</p> <ul> <li>Usage for e.g.: debug print, timing, lightweight plugin system</li> </ul> <p>TODO</p>"},{"location":"Programming%20Language/python/decorator/#references","title":"References","text":"<p>Primer on Python Decorators https://realpython.com/primer-on-python-decorators/</p>"},{"location":"Programming%20Language/python/dict/","title":"dict","text":""},{"location":"Programming%20Language/python/dict/#construct","title":"Construct","text":"<pre><code>&gt;&gt;&gt; a = dict(one=1, two=2, three=3)\n&gt;&gt;&gt; b = {'one': 1, 'two': 2, 'three': 3}\n&gt;&gt;&gt; c = dict(zip(['one', 'two', 'three'], [1, 2, 3]))\n&gt;&gt;&gt; d = dict([('two', 2), ('one', 1), ('three', 3)])\n&gt;&gt;&gt; e = dict({'three': 3, 'one': 1, 'two': 2})\n&gt;&gt;&gt; f = dict({'one': 1, 'three': 3}, two=2)\n&gt;&gt;&gt; a == b == c == d == e == f\nTrue\n</code></pre>"},{"location":"Programming%20Language/python/dict/#exist","title":"Exist","text":"<pre><code>d = {'a' : 10, 'b' : 20}\nif 'a' in d:\n    # In\nif 'na' not in d:\n    # Not in\n</code></pre>"},{"location":"Programming%20Language/python/dict/#access","title":"Access","text":"<pre><code>d = {'a' : 10, 'b' : 20}\n\nd['a']         # 10 throw KeyError if the key is not existed\nd.get('c', 87) # 87\n\na = {'a': 123}\na.setdefault('a')     # 123\na.setdefault('b', 87) # 87\n</code></pre>"},{"location":"Programming%20Language/python/dict/#use-collectionsdefaultdict-to-prevent-use-get-at-every-access","title":"Use <code>collections.defaultdict</code> to prevent use <code>.get()</code> at every access","text":"<pre><code>from collections import defaultdict\nd = defaultdict(int)\nd['123'] # 0\n\n# Change the default\ndef cf(v):\n    return lambda: v\nd = defaultdict(cf(87))\nd['123'] # 87\n</code></pre>"},{"location":"Programming%20Language/python/dict/#operation","title":"Operation","text":""},{"location":"Programming%20Language/python/dict/#insert","title":"Insert","text":"<pre><code>d = {}\nd.update(a=10, b=123)\nd.update({'c': 87})\nd['d'] = 123\n</code></pre>"},{"location":"Programming%20Language/python/dict/#erase","title":"Erase","text":"<p>Delete the key value pair from the dict</p> <pre><code>d = {'a' : 10, 'b' : 20}\np = d.pop('a')      # 10\np2 = d.pop('c', 87) # 87\n</code></pre>"},{"location":"Programming%20Language/python/dict/#clear","title":"Clear","text":"<p>Remove all items from the dictionary</p> <pre><code>d = {'a' : 10, 'b' : 20}\nd.clear()\n</code></pre>"},{"location":"Programming%20Language/python/dict/#copy","title":"Copy","text":"<pre><code>import copy\n\na = {\"first\" : 10, \"second\" : [1, [2, 3]]}\nb = a                # reference\nc = a.copy()         # shallow copy\nd = copy.deepcopy(a) # deep copy\n\nid(a) == id(b) # True\nid(a) == id(c) # False\n\n# The shallow copy one still have the same reference of its elements\nid(c['second']) == id(a['second']) # True\n\n# Use deepcopy() you will get the truely copied one\nid(d['second']) == id(a['second']) # False\n</code></pre>"},{"location":"Programming%20Language/python/dict/#views","title":"Views","text":"<pre><code>d = {'a': 123, 'b': 456, 'c': 789}\n\nd.keys()   # dict_keys(['a', 'b', 'c'])\nd.values() # dict_values([123, 456, 789])\nd.items()  # dict_items([('a', 123), ('b', 456), ('c', 789)])\n</code></pre>"},{"location":"Programming%20Language/python/fs/","title":"fs","text":"<p>file-system related</p> <ul> <li>List directory</li> </ul> <pre><code>os.listdir(path) -&gt; [a, b, ...]\n\n# depth = 1\n(dirpath, dirnames, filenames) = next(os.walk(path))\n</code></pre> <ul> <li>Walk directory and files recursively</li> </ul> <pre><code>for (dirpath, dirnames, filenames) in os.walk(path):\n    # ...\n</code></pre> <ul> <li>Current directory (<code>pathlib</code>) </li> </ul> <pre><code>from pathlib import Path\n\nPath.cwd()    # Get current dir\n\nfull_path = Path(__file__).resolve()\ndir_name = full_path.parent\n</code></pre> <ul> <li>Current directory (<code>os</code>)</li> </ul> <pre><code>os.getcwd()      # Get current dir\nos.chdir('/usr') # Change current dir\n\n__file__         # Current filename\ndir_name = os.path.dirname(full_path)\nfull_path = os.path.realpath(__file__)\n\n# Spilt\npath, filename = os.path.split(full_path)\n</code></pre> <ul> <li>Delete a file</li> </ul> <pre><code>Path(file_path).unlink() == os.remove(file_path)\n</code></pre> <ul> <li><code>rm -r</code></li> </ul> <pre><code>shutil.rmtree(path)\n</code></pre> <ul> <li>Delete a dir</li> </ul> <pre><code>Path(dir_path).rmdir() == os.rmdir(dir_path)\n</code></pre> <ul> <li>touch a file</li> </ul> <pre><code>Path(path).touch()\n</code></pre>"},{"location":"Programming%20Language/python/fs/#os-and-pathlib","title":"<code>os</code> and <code>pathlib</code>","text":""},{"location":"Programming%20Language/python/fs/#see-also","title":"See Also","text":"<ul> <li>shutil</li> </ul>"},{"location":"Programming%20Language/python/fs/#references","title":"References","text":"<p>pathlib \u2014 Object-oriented filesystem paths https://docs.python.org/3/library/pathlib.html</p> <p>os \u2014 Miscellaneous operating system interfaces https://docs.python.org/3/library/os.html</p>"},{"location":"Programming%20Language/python/install/","title":"Install Other version","text":"<ul> <li> <p>Install <pre><code>sudo add-apt-repository ppa:deadsnakes/ppa\nsudo apt install python3.x python3.x-distutils python3.x-venv\n</code></pre></p> </li> <li> <p>Use <code>venv</code></p> </li> </ul> <pre><code>python3.x -m venv &lt;dir&gt;\n</code></pre>"},{"location":"Programming%20Language/python/install/#references","title":"References","text":"<p>https://askubuntu.com/questions/56761/force-apt-get-to-overwrite-file-installed-by-another-package https://www.techiediaries.com/ubuntu/install-python-3-pip-venv-ubuntu-20-04-19/</p>"},{"location":"Programming%20Language/python/links/","title":"Useful Links","text":"<ul> <li>pythoncheatsheet</li> </ul>"},{"location":"Programming%20Language/python/libs/argparse/","title":"argparse","text":"<ul> <li>Parse arguments</li> </ul> <pre><code>import argparse\nparser = argparse.ArgumentParser(description=\"xxx\")\nargs = parser.parse_args()\n</code></pre> <ul> <li>Positional Arguments</li> </ul> <pre><code>parser.add_argument(\"echo\", help=\"echo the string you use here\",\n    type=int,          # type\n    choices=[0, 1, 2]  # Limit the choices\n)\nargs.echo # variable\n</code></pre> <ul> <li>Optional Arguments</li> </ul> <pre><code>parser.add_argument(\"-v\", \"--verbose\", action=\"count\", default=0, help=\"increase output verbosity\")\n# action=\"store_true\" =&gt; bool\n# \n# action=\"count\" =&gt; Enable counting the flag e.g. -vv =&gt; 2\n#   parser.add_argument(\"-v\", \"--verbosity\", action=\"count\")\n\nif args.verbosity:\n    print(\"verbosity turned on\")\n</code></pre> <ul> <li>Mutually exclusive</li> </ul> <pre><code>group = parser.add_mutually_exclusive_group()\ngroup.add_argument(\"-v\", \"--verbose\", action=\"store_true\")\ngroup.add_argument(\"-q\", \"--quiet\", action=\"store_true\")\n</code></pre>"},{"location":"Programming%20Language/python/libs/argparse/#sub-commands","title":"Sub-commands","text":"<ul> <li>Create a subparser</li> </ul> <pre><code>subparsers = parser.add_subparsers(title='subcommands', description='valid subcommands',\n    help='sub-command help')\n# For sub-command `a`\nparser_a = subparsers.add_parser('a', help='a help')\nparser_a.add_argument('bar', type=int, help='bar help')\n# For sub-command `b`\nparser_b = subparsers.add_parser('b', help='b help')\nparser_b.add_argument('--baz', choices='XYZ', help='baz help')\n\n&gt;&gt;&gt; parser.parse_args(['--help'])\nusage: [-h] {a,b} ...\n\noptional arguments:\n  -h, --help  show this help message and exit\n\nsubcommands:\n  valid subcommands\n\n  {a,b}       sub-command help\n    a         a help\n    b         b help\n</code></pre>"},{"location":"Programming%20Language/python/libs/argparse/#references","title":"References","text":"<p>https://docs.python.org/3/library/argparse.html</p>"},{"location":"Programming%20Language/python/libs/click/","title":"click","text":"<p>a python library for parsing arguments</p> <pre><code>import click\n\n@click.command()\n@click.option('--count', default=1, help='Number of greetings.')\n@click.option('--name', prompt='Your name',\n              help='The person to greet.')\ndef hello(count, name):\n    \"\"\"Simple program that greets NAME for a total of COUNT times.\"\"\"\n    for x in range(count):\n        click.echo('Hello %s!' % name)\n\nif __name__ == '__main__':\n    hello()\n</code></pre> <ul> <li>print help</li> </ul> <pre><code>def print_help_msg(command):\nwith click.Context(command) as ctx:\n    click.echo(command.get_help(ctx))\n</code></pre>"},{"location":"Programming%20Language/python/libs/click/#reference","title":"Reference","text":"<p>click docs 7.x https://click.palletsprojects.com/en/7.x/</p> <p>Python \u7528 Click \u6a21\u7d44\u88fd\u4f5c\u597d\u7528\u7684\u6307\u4ee4 https://myapollo.com.tw/zh-tw/python-click/</p>"},{"location":"Programming%20Language/python/libs/datetime/","title":"datetime","text":""},{"location":"Programming%20Language/python/libs/datetime/#conversion","title":"Conversion","text":"<ul> <li><code>str</code> to <code>datetime</code></li> </ul> <pre><code>from datetime import datetime\ndatetime.strptime('2019-01-01','%Y-%m-%d')\n# datetime.datetime(2019, 1, 1, 0, 0)\n</code></pre> <ul> <li><code>datetime</code> to <code>str</code></li> </ul> <pre><code>from datetime import datetime\ndatetime.strftime(datetime.now(), '%Y-%m-%d %H:%M:%S')\n# '2021-10-20 14:08:36'\n</code></pre>"},{"location":"Programming%20Language/python/libs/fastapi/","title":"fastapi","text":""},{"location":"Programming%20Language/python/libs/fastapi/#installation","title":"Installation","text":"<pre><code>pip install fastapi[all] uvicorn[standard]\n</code></pre> <p>Test to see if it installed successfully</p> <pre><code>&gt;&gt;&gt; from fastapi import FastAPI\n&gt;&gt;&gt; app = FastAPI()\n&gt;&gt;&gt; app\n&lt;fastapi.applications.FastAPI object at 0x107040c70&gt;\n</code></pre>"},{"location":"Programming%20Language/python/libs/fastapi/#query-method","title":"Query Method","text":"<ul> <li>HTTP methods<ul> <li>common<ul> <li>GET</li> <li>POST</li> <li>PUT</li> <li>DELETE</li> </ul> </li> <li>exotic ones<ul> <li>OPTIONS</li> <li>HEAD</li> <li>PATCH</li> <li>TRACE</li> </ul> </li> </ul> </li> </ul> <pre><code>@app.post('/route')\n@app.get('/route')\ndef route_controller():\n    return {'msg' : 'Im route'}\n</code></pre>"},{"location":"Programming%20Language/python/libs/fastapi/#path-parameters","title":"Path Parameters","text":"<pre><code>@app.get('/items/{item_id}')\nasync def read_item(item_id: int):\n    return {'item_id': item_id}\n</code></pre>"},{"location":"Programming%20Language/python/libs/fastapi/#enum","title":"Enum","text":"<pre><code>from enum import Enum\n\nclass TypeName(str, Enum):\n    type_a = 'A'\n    type_b = 'B'\n    type_c = 'C'\n\n@app.get('/types/{type_name}')\nasync def get_type(type_name: TypeName):\n    return {'type_name': type_name}\n</code></pre>"},{"location":"Programming%20Language/python/libs/fastapi/#file-path","title":"File Path","text":"<pre><code>@app.get(\"/files/{file_path:path}\")\nasync def read_file(file_path: str):\n    return {\"file_path\": file_path}\n</code></pre>"},{"location":"Programming%20Language/python/libs/fastapi/#query-parameters","title":"Query Parameters","text":"<ul> <li> <p>GET parameters</p> <ul> <li>To make it Required, just remove the default value</li> </ul> <pre><code>@app.get(\"/items/\")\nasync def read_item(skip: int, limit: int=10):\n    return {'skip': skip, 'limit': limit}\n</code></pre> </li> <li> <p>Optional parameters</p> <pre><code>from typing import Optional\n\n@app.get(\"/items/{item_id}\")\nasync def read_item(item_id: str, q: Optional[str]=None):\n    if q:\n        return {'item_id': item_id, 'q': q}\n    return {'item_id': item_id}\n</code></pre> </li> <li> <p>Allow for multiple path parameters and query parameters at the same time. No nee</p> </li> </ul>"},{"location":"Programming%20Language/python/libs/fastapi/#validations","title":"Validations","text":"<p>Warning</p> <p>Notice It is not <code>Optional</code> make FastAPI know the value is optional; The default value <code>= None</code> made it happened.</p> <ul> <li> <p>Optional</p> <pre><code>from typing import Optional\n\n@app.get('/items/')\ndef get_items(q: Optional[str] = None):\n    # ...\n</code></pre> </li> <li> <p>Query: provide additional validations for the query parameter</p> <ul> <li>e.g. Limit the character length</li> </ul> <pre><code>from fastapi import Query\n\n@app.get('/optional/')\n    def A(q: Optional[str] = Query(None, max_length=50)):\n        # ...\n\n@app.get('/required/')\n    def B(q: Optional[str] = Query(..., max_length=50)):\n        # ...\n</code></pre> <ul> <li>parameters:<ul> <li><code>min_length</code></li> <li><code>max_length</code></li> <li><code>regex</code></li> </ul> </li> </ul> </li> </ul>"},{"location":"Programming%20Language/python/libs/fastapi/#list-multiple-values","title":"List / multiple values","text":"<p>You can declare the parameter as a list to receive multiple values.</p> <pre><code>@app.get(\"/items/\")\nasync def read_items(q: Optional[List[str]] = Query(None)):\n    query_items = {\"q\": q}\n    return query_items\n</code></pre> <p>THe URL looks like</p> <pre><code>http://localhost:8000/items/?q=foo&amp;q=bar\n</code></pre> <p>And the value of <code>q</code> is</p> <pre><code>['foo', 'bar']\n</code></pre>"},{"location":"Programming%20Language/python/libs/fastapi/#request-body","title":"Request Body","text":"<p>Use <code>Pydantic</code> to delare the request body.</p> <p>Advantages:</p> <ul> <li>Read the request body as JSON</li> <li>Convert the corresponding type</li> <li>Validate the data</li> <li>Gernerate JSON Schema for the model</li> <li>Editor support</li> </ul> <pre><code>from pydantic import BaseModel\n\nclass Item(BaseModel):\n    name: str\n    description: Optional[str] = None\n    price: float\n    tax: Optional[float] = None\n\n@app.post(\"/items/\")\nasync def create_item(item: Item):\n    return item\n</code></pre> <p></p>"},{"location":"Programming%20Language/python/libs/fastapi/#not-using-pydantic-model","title":"Not using Pydantic model","text":"<p>Warning</p> <p>Must use with other model.</p> <pre><code>class User(BaseModel):\n    username: str\n    full_name: Optional[str] = None\n\n@app.post('/')\nasync def index(user: User, a: int = Body(...)):\n    return {'a': a, **user.dict()}\n</code></pre> <p></p>"},{"location":"Programming%20Language/python/libs/fastapi/#form","title":"Form","text":"<p>Warning</p> <p>Install <code>python-multipart</code> first. <code>pip install python-multipart</code></p> <pre><code>from fastapi import Form\n\n@app.post('/')\nasync def index(user: str=Form(...), passwd: str=Form(...)):\n    return {'user': user, 'passwd': passwd}\n</code></pre> <p></p> <p>Info</p> <p>Data form \u901a\u5e38\u662f encode \u6210 <code>application/x-www-form-urlencoded</code>\uff0c\u4f46\u5982\u679c\u6709\u8981\u50b3\u6a94\u6848\u7684\u8a71\uff0c\u5c31\u6703 encode \u6210 <code>multipart/form-data</code> \u8a73\u898b: https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST</p> <p>Danger</p> <p><code>Form()</code> \u548c <code>Body()</code> \u6df7\u7528\u53ef\u80fd\u5c0e\u81f4\u975e\u9810\u671f\u7d50\u679c: \u56e0\u70ba HTML form \u662f\u7528 <code>application/x-www-form-urlencoded</code> \u4e26\u975e <code>application/json</code> \u6240\u4ee5\u8a66\u5716\u7528 <code>Body()</code> \u4f86\u62ff JSON \u662f\u932f\u7684</p> <p>TODO</p>"},{"location":"Programming%20Language/python/libs/fastapi/#cookie","title":"Cookie","text":"<ul> <li>Cookie parameter</li> </ul> <pre><code>from fastapi import Cookie\n\n@app.get('/needCookie')\ndef need_cookie_route(test: Optional[str] = Cookie(...)):\n    return test\n</code></pre> <ul> <li>Set cookie</li> </ul> <pre><code>from fastapi import Response\n\n@app.get('/cookie')\ndef set_cookie(response: Response):\n    response.set_cookie(key='test', value='fuck you')\n    return {'message': 'success'}\n</code></pre> <p>https://fastapi.tiangolo.com/advanced/response-cookies/ https://fastapi.tiangolo.com/tutorial/cookie-params/</p>"},{"location":"Programming%20Language/python/libs/fastapi/#template","title":"Template","text":"<p>Need to install <code>jinja2</code></p> <pre><code>from starlette.templating import Jinja2Templates\n\ntemplates = Jinja2Templates(directory='templates')\n\n@app.get('/')\nasync def main(request: Request):\n    return template.TemplateResponse('index.html', {'request': request})\n</code></pre>"},{"location":"Programming%20Language/python/libs/fastapi/#endpoints","title":"Endpoints","text":""},{"location":"Programming%20Language/python/libs/fastapi/#http","title":"Http","text":"<pre><code>@app.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello World\"}\n</code></pre>"},{"location":"Programming%20Language/python/libs/fastapi/#use-starletteendpointshttpendpoint","title":"Use <code>starlette.endpoints.HTTPEndpoint</code>","text":"<pre><code>from starlette.endpoints import HTTPEndpoint\nfrom starlette.responses import HTMLResponse\n\n@app.route('/&lt;route&gt;/{arg}')\nclass Homepage(HTTPEndpoint):\n    async def get(self, request):\n        path_params = request.path_params\n        query_params = request.query_params\n        return HTMLResponse(html)\n</code></pre>"},{"location":"Programming%20Language/python/libs/fastapi/#websocket","title":"Websocket","text":"<ul> <li>Controller of a websocket route<ul> <li>Send<ul> <li><code>.send_text()</code></li> <li><code>.send_bytes()</code></li> <li><code>.send_json()</code></li> </ul> </li> </ul> </li> </ul> <pre><code>@app.websocket(\"/ws\")\nasync def websocket_endpoint(websocket: WebSocket):\n    await websocket.accept()\n    while True:\n        try:\n            s = await websocket.receive_text()\n            await websocket.send_text(s)\n        except Exception as e:\n            print('error:', e)\n            break\n</code></pre>"},{"location":"Programming%20Language/python/libs/fastapi/#use-starletteendpointswebsocketendpoint","title":"Use <code>starlette.endpoints.WebSocketEndpoint</code>","text":"<pre><code>from starlette.endpoints import WebSocketEndpoint\n\n@app.websocket_route(\"/ws\")\nclass Endpoint(WebSocketEndpoint):\n    encoding = 'text'\n\n    async def on_connect(self, websocket):\n        await websocket.accept()\n\n    async def on_receive(self, websocket, data):\n        await websocket.send_text(f'Message text was: {data}')\n\n    async def on_disconnect(self, websocket, close_code):\n        pass\n</code></pre>"},{"location":"Programming%20Language/python/libs/io/","title":"io - Core tools for working with streams","text":""},{"location":"Programming%20Language/python/libs/io/#stringio-read-string-as-a-stream","title":"StringIO - Read string as a stream","text":"<p>```python3 linenum=\"1\" from io import StringIO ss = StringIO('foo\\nbar\\nend\\n')</p> <p>.read() .readline() .readlines() .write() .writelines() ```</p>"},{"location":"Programming%20Language/python/libs/io/#references","title":"References","text":"<p>https://stackoverflow.com/questions/21843693/creating-stream-to-iterate-over-from-string-in-python</p>"},{"location":"Programming%20Language/python/libs/jinja/","title":"jinja","text":"<p>TODO</p>"},{"location":"Programming%20Language/python/libs/jupyter/","title":"Jupyter","text":""},{"location":"Programming%20Language/python/libs/jupyter/#install","title":"Install","text":"<pre><code>pip install jupyterlab # lab\npip install notebook   # notebook\n</code></pre>"},{"location":"Programming%20Language/python/libs/pycryptodome/","title":"PyCryptodome","text":""},{"location":"Programming%20Language/python/libs/pycryptodome/#installation","title":"Installation","text":"<pre><code>pip3 install pycryptodome\n</code></pre> <ul> <li>Run self test</li> </ul> <pre><code>python3 -m Crypto.SelfTest\n</code></pre>"},{"location":"Programming%20Language/python/libs/pycryptodome/#usage","title":"Usage","text":"<ul> <li>Generate random bytes</li> </ul> <pre><code>from Crypto.Random import get_random_bytes\n\n# \u7522\u751f 256 \u4f4d\u5143\u96a8\u6a5f\u91d1\u9470\uff0832 \u4f4d\u5143\u7d44 = 256 \u4f4d\u5143\uff09\nkey = get_random_bytes(32)\nprint(key)\n</code></pre> <ul> <li>Use password to generate key (hash)</li> </ul> <pre><code>from Crypto.Protocol.KDF import PBKDF2\n\n# \u56fa\u5b9a\u7684 salt\nsalt = b'\\xd0\\x18\\xa7QM\\xd6\\x9b\\xebxu\\xe4\\xed\\xa8\\x83\\xf6\\xa3/\\x01\\x9c\\x9e\\x86n\\xda;\\x10EdD\\xf7\\x932\\xcc'\n\n# \u5bc6\u78bc\npassword = 'my#password'\n\n# \u6839\u64da\u5bc6\u78bc\u8207 salt \u7522\u751f\u91d1\u9470\nkey = PBKDF2(password, salt, dkLen=32)\n</code></pre>"},{"location":"Programming%20Language/python/libs/pycryptodome/#aes-cbc","title":"AES CBC","text":"<ul> <li>Encrypt</li> </ul> <pre><code>from Crypto.Cipher import AES\nfrom Crypto.Util.Padding import pad\n\nkey = b'A'*32 # change\nplaintext = b'My secret data.'\ncipher = AES.new(key, AES.MODE_CBC)\nenc = cipher.encrypt(pad(plaintext, AES.block_size))\n\n# iv: ciphter.iv (16 bytes)\n# encrypted: enc\n</code></pre> <ul> <li>Decrypt</li> </ul> <pre><code>from Crypto.Cipher import AES\nfrom Crypto.Util.Padding import unpad\n\nenc = b'your encrypted data'\niv = b'your iv'\n# \u4ee5\u91d1\u9470\u642d\u914d CBC \u6a21\u5f0f\u8207\u521d\u59cb\u5411\u91cf\u5efa\u7acb cipher \u7269\u4ef6\ncipher = AES.new(key, AES.MODE_CBC, iv=iv)\n# \u89e3\u5bc6\u5f8c\u9032\u884c unpadding\nplaintext = unpad(cipher.decrypt(enc), AES.block_size)\n</code></pre>"},{"location":"Programming%20Language/python/libs/pycryptodome/#references","title":"References","text":"<p>Python \u4ee5 PyCryptodome \u5be6\u4f5c AES \u5c0d\u7a31\u5f0f\u52a0\u5bc6\u65b9\u6cd5\u6559\u5b78\u8207\u7bc4\u4f8b</p> <p>https://hackmd.io/@Not/Pbkdf2</p> <p>https://stackoverflow.com/questions/30056762/rsa-encryption-and-decryption-in-python</p> <p>https://pastebin.com/tfH13zpA</p>"},{"location":"Programming%20Language/python/libs/pytz/","title":"pytz - World Timezone Definitions for Python","text":""},{"location":"Programming%20Language/python/libs/pytz/#to-utc","title":"To UTC","text":"<pre><code>from datetime import datetime\nimport pytz # $ pip install pytz\n\nd = datetime(2009, 8, 31, 22, 30, 30)\ntz = pytz.timezone('US/Pacific')\n\n# a) raise exception for non-existent or ambiguous times\naware_d = tz.localize(d, is_dst=None)\n## b) assume standard time, adjust non-existent times\n#aware_d = tz.normalize(tz.localize(d, is_dst=False))\n## c) assume DST is in effect, adjust non-existent times\n#aware_d = tz.normalize(tz.localize(naive_d, is_dst=True))\n\n# convert to UTC\nutc_d = aware_d.astimezone(pytz.utc)\n</code></pre> <pre><code>pytz.utc.localize(utc_time, is_dst=None).astimezone(tz)\n</code></pre>"},{"location":"Programming%20Language/python/libs/pytz/#references","title":"References","text":"<p>pytz utc conversion https://stackoverflow.com/questions/1357711/pytz-utc-conversion</p>"},{"location":"Programming%20Language/python/libs/pyyaml/","title":"yaml - python","text":""},{"location":"Programming%20Language/python/libs/pyyaml/#load","title":"Load","text":"<pre><code>import yaml\nwith open('a.yml', 'r') as f:\n    data = yaml.load(f, Loader=yaml.CLoader)\n</code></pre> <ul> <li>Load all<ul> <li>multiple yamls in the same file splitted by <code>---</code></li> </ul> </li> </ul> <pre><code>for data in yaml.load_all(documents):\n    print(data)\n</code></pre>"},{"location":"Programming%20Language/python/libs/pyyaml/#dump","title":"Dump","text":"<pre><code>import yaml\nwith open('a.yml', 'w') as f:\n    f.write(yaml.dump(f, Dumper=yaml.CDumper))\n</code></pre>"},{"location":"Programming%20Language/python/libs/pyyaml/#references","title":"References","text":"<p>PyYAML Documentation https://pyyaml.org/wiki/PyYAMLDocumentation</p>"},{"location":"Programming%20Language/python/libs/qt/","title":"Qt","text":""},{"location":"Programming%20Language/python/libs/qt/#installation","title":"Installation","text":"<pre><code>pip install pyside2\n</code></pre>"},{"location":"Programming%20Language/python/libs/qt/#helloworld","title":"Helloworld","text":"<pre><code>import sys\nimport random\nfrom PySide2 import QtCore, QtWidgets, QtGui\n\nclass MyWidget(QtWidgets.QWidget):\n    def __init__(self):\n        super().__init__()\n\n        self.hello = [\"Hallo Welt\", \"Hei maailma\", \"Hola Mundo\", \"\u041f\u0440\u0438\u0432\u0435\u0442 \u043c\u0438\u0440\"]\n\n        self.button = QtWidgets.QPushButton(\"Click me!\")\n        self.text = QtWidgets.QLabel(\"Hello World\")\n        self.text.setAlignment(QtCore.Qt.AlignCenter)\n\n        self.layout = QtWidgets.QVBoxLayout()\n        self.layout.addWidget(self.text)\n        self.layout.addWidget(self.button)\n        self.setLayout(self.layout)\n\n        self.button.clicked.connect(self.magic)\n\n    def magic(self):\n        self.text.setText(random.choice(self.hello))\n\nif __name__ == \"__main__\":\n    app = QtWidgets.QApplication([])\n\n    widget = MyWidget()\n    widget.resize(800, 600)\n    widget.show()\n\n    sys.exit(app.exec_())\n</code></pre>"},{"location":"Programming%20Language/python/libs/qt/#widgets","title":"Widgets","text":"<ul> <li>Label</li> </ul> <pre><code>from PySize2 import QLabel\nlabel = QLabel(\"&lt;font color=red size=40&gt;Hello World!&lt;/font&gt;\")\nlabe.show()\n</code></pre>"},{"location":"Programming%20Language/python/libs/qt/#useful-links","title":"Useful Links","text":"<p>Qt for Python Tutorials https://doc.qt.io/qtforpython/tutorials/index.html</p>"},{"location":"Programming%20Language/python/libs/selenium/","title":"selenium","text":""},{"location":"Programming%20Language/python/libs/selenium/#install","title":"Install","text":"<pre><code>pip3 install selenium\n\n# chromium (https://chromedriver.chromium.org/downloads)\nsudo apt install chromium-browser\nwget https://chromedriver.storage.googleapis.com/87.0.4280.20/chromedriver_linux64.zip\nunzip chromedriver_linux64.zip\nsudo mv chromedriver /usr/bin/chromedriver\nsudo chown root:root /usr/bin/chromedriver\nsudo chmod +x /usr/bin/chromedriver\n</code></pre>"},{"location":"Programming%20Language/python/libs/selenium/#example","title":"Example","text":"<pre><code>from selenium.webdriver.chrome.options import Options\n\nchrome_options = Options()\nchrome_options.add_argument('blink-settings=imagesEnabled=false')\nchrome_options.add_argument(\"--no-sandbox\")\nchrome_options.add_argument(\"--disable-setuid-sandbox\")\nchrome_options.add_argument(\"--remote-debugging-port=9222\")\nchrome_options.add_argument(\"--disable-dev-shm-using\")\nchrome_options.add_argument(\"--disable-extensions\")\nchrome_options.add_argument(\"--disable-gpu\")\nchrome_options.add_argument(\"start-maximized\")\nchrome_options.add_argument(\"disable-infobars\")\nchrome_options.add_argument(\"--headless\")\n\nurl = 'your_url'\ndriver = webdriver.Chrome('/usr/bin/chromedriver',chrome_options=chrome_options)\ndriver.get(url)\n</code></pre>"},{"location":"Programming%20Language/python/libs/shutil/","title":"shutil","text":"<p>High-level file operations</p> <ul> <li>Copy files <code>src</code> to file or directory <code>dst</code></li> </ul> <pre><code>shutil.copy(src, dst)\nshutil.copy(src, dst) # try to preserve metadata\n</code></pre> <ul> <li>Move a file or directory <code>src</code> to another location <code>dst</code> and return the dest</li> </ul> <pre><code>shutil.move(src, dst)\n</code></pre> <ul> <li>Disk usage (byte)</li> </ul> <pre><code>total, used, free = shutil.disk_usage(path)\n</code></pre>"},{"location":"Programming%20Language/python/libs/sqlite3/","title":"sqlite3","text":"<p>https://docs.python.org/3/library/sqlite3.html</p> <ul> <li>Connect to a db</li> </ul> <p>```python3 linenum=\"1\" import sqlite3 con = sqlite3.connect('example.db') # :memory: for in memory db</p>"},{"location":"Programming%20Language/python/libs/sqlite3/#doing-things","title":"Doing things","text":"<p>con.close() <pre><code>- Create a cursor object and CRUD\n\n```python3 linenums=\"1\"\ncur = con.cursor()\n\n# Create\ncur.execute('CREATE TABLE status (state)')\ncon.commit()\n</code></pre></p> <ul> <li>Request with parameters<ul> <li>Prevent from SQL injection</li> </ul> </li> </ul> <pre><code># ? style\ncur.execute(\"insert into lang values (?, ?)\", (\"C\", 1972))\n\nlang_list = [\n    (\"Fortran\", 1957),\n    (\"Python\", 1991),\n    (\"Go\", 2009),\n]\ncur.executemany(\"insert into lang values (?, ?)\", lang_list)\n\n# named style\ncur.execute(\"select * from lang where first_appeared=:year\", {\"year\": 1972})\n</code></pre>"},{"location":"Programming%20Language/python/libs/sqlite3/#read","title":"Read","text":"<ul> <li>Iterator</li> </ul> <pre><code>for row in cur.execute('SELECT * FROM stocks ORDER BY price'):\n    print(row)\n</code></pre> <ul> <li>Use <code>fetchone()</code>, <code>fetchmany()</code>, <code>fetchall()</code></li> </ul> <pre><code>cur.execute('SELECT * FROM table WHERE a=b')\ncur.fetchone() # None if no data available\n</code></pre>"},{"location":"Programming%20Language/python/libs/sqlite3/#row","title":"Row","text":"<pre><code>&gt;&gt;&gt; con.row_factory = sqlite3.Row\n&gt;&gt;&gt; cur = con.cursor()\n&gt;&gt;&gt; cur.execute('select * from stocks')\n&lt;sqlite3.Cursor object at 0x7f4e7dd8fa80&gt;\n\n&gt;&gt;&gt; r = cur.fetchone()\n&gt;&gt;&gt; type(r)\n&lt;class 'sqlite3.Row'&gt;\n\n&gt;&gt;&gt; tuple(r)\n('2006-01-05', 'BUY', 'RHAT', 100.0, 35.14)\n\n&gt;&gt;&gt; len(r)\n5\n\n&gt;&gt;&gt; r[2]\n'RHAT'\n\n&gt;&gt;&gt; r.keys()\n['date', 'trans', 'symbol', 'qty', 'price']\n\n&gt;&gt;&gt; r['qty']\n100.0\n\n&gt;&gt;&gt; for member in r:\n...     print(member)\n...\n2006-01-05\nBUY\nRHAT\n100.0\n35.14\n</code></pre>"},{"location":"Programming%20Language/python/libs/sqlite3/#other","title":"Other","text":"<ul> <li>Execute whole script</li> </ul> <pre><code>cur.executescript('''\n    create table person(\n        firstname,\n        lastname,\n        age\n    );\n\n    create table book(\n        title,\n        author,\n        published\n    );\n\n    insert into book(title, author, published)\n    values (\n        'Dirk Gently''s Holistic Detective Agency',\n        'Douglas Adams',\n        1987\n    );\n''')\n</code></pre> <p>TODO: advanced usage</p>"},{"location":"Programming%20Language/python/libs/sqlite3/#references","title":"References","text":"<p>https://pythonexamples.org/python-sqlite3-tutorial/</p>"},{"location":"Programming%20Language/python/libs/tarfile/","title":"tarfile - Python","text":""},{"location":"Programming%20Language/python/libs/tarfile/#compress-all-files-under-a-path","title":"Compress all files under a path","text":"<pre><code>ar = tarfile.open('test.tar.gz', 'w:gz')\n\nfor root, dirs, files in os.walk(path):\n    for file_name in files:\n        ar.add(os.path.join(root, file_name))\n\nar.close()\n</code></pre>"},{"location":"Programming%20Language/python/libs/tarfile/#extract-all-files","title":"Extract all files","text":"<pre><code>tar = tarfile.open(path, 'r:gz')\ntar.extractall()\n</code></pre>"},{"location":"Programming%20Language/python/libs/tarfile/#modes","title":"Modes","text":"\u6a21\u5f0f \u64cd\u4f5c 'r' or 'r:*' Open for reading with transparent compression (recommended). 'r:' Open for reading exclusively without compression. 'r:gz' Open for reading with gzip compression. r:bz2' Open for reading with bzip2 compression. 'r:xz' Open for reading with lzma compression. 'x' or 'x:' Create a tarfile exclusively without compression. Raise an FileExistsError exception if it already exists. 'x:gz' Create a tarfile with gzip compression. Raise an FileExistsError exception if it already exists. 'x:bz2' Create a tarfile with bzip2 compression. Raise an FileExistsError exception if it already exists. 'x:xz' Create a tarfile with lzma compression. Raise an FileExistsError exception if it already exists."},{"location":"Programming%20Language/python/libs/tarfile/#references","title":"References","text":"<p>[Python] \u4f7f\u7528 tarfile \u58d3\u7e2e\u3001\u89e3\u58d3\u7e2e\u6a94\u6848 https://clay-atlas.com/blog/2020/08/14/python-cn-tarfile-compression-uncompression/</p> <p>tarfile \u2014 Read and write tar archive files https://docs.python.org/3/library/tarfile.html</p>"},{"location":"Reverse/Ghidra/","title":"Ghidra","text":"<ul> <li>Setting up the per user ghidra script directory<ul> <li>Create the directory <code>%userprofile%/ghidra_script</code></li> <li>Window &gt; ScriptManager</li> </ul> </li> </ul>"},{"location":"Services/gitlab/","title":"gitlab","text":""},{"location":"Services/gitlab/#problems","title":"Problems","text":""},{"location":"Services/gitlab/#how-to-reset-user-password","title":"How to reset user password","text":"<pre><code>sudo gitlab-rake \"gitlab:password:reset\"\n</code></pre>"},{"location":"Services/gitlab/#reference","title":"Reference","text":"<p>Docs - gitlab https://docs.gitlab.com/</p>"},{"location":"Services/hath/","title":"H@H","text":"<p>Hello, Gentleman</p>"},{"location":"Services/hath/#download-client","title":"Download client","text":"<pre><code>$ wget https://github.com/james58899/hath-rust/releases/download/v$(curl https://api.github.com/repos/james58899/hath-rust/releases | jq -r '.[0].name')/hath-rust-x86_64-unknown-linux-gnu -O hath\n</code></pre>"},{"location":"Services/hath/#usage","title":"Usage","text":"<ul> <li> <p>Start the client <pre><code>hath --cache-dir /mnt/hath/cache --data-dir /mnt/hath/data --log-dir /mnt/hath/log --temp-dir tmp --download-dir /mnt/hath-download\n</code></pre></p> </li> <li> <p>Mount download storage</p> <ul> <li>\u5982\u679c\u662f PVE \u7684 lxc \u8a18\u5f97\u958b\u555f nfs \u9078\u9805\uff0c\u4e26\u91cd\u555f container <pre><code>mount -t nfs 192.168.x.y:/mnt/pool0/hath /mnt/hath-download\n# persistent\necho \"192.168.x.y:/mnt/pool0/hath   /mnt/hath-download   nfs   defaults      0 0\" &gt;&gt; /etc/fstab\n</code></pre></li> </ul> </li> <li> <p><code>systemd</code> service: <code>hath.service</code> <pre><code>[Unit]\nDescription=H@H service\nAfter=local-fs.target remote-fs.target network.target\n\n[Service]\nUser=root\nWorkingDirectory=/root/hath\nSuccessExitStatus=143\nExecStart=/root/hath/hath --cache-dir /mnt/hath/cache --data-dir /mnt/hath/data --log-dir /mnt/hath/log --temp-dir /mnt/hath/tmp --download-dir /mnt/hath-download\nRestart=on-abort\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></p> </li> </ul>"},{"location":"Services/hath/#reference","title":"Reference","text":"<p>https://github.com/Yukariin/hath-scripts/blob/master/systemd.service https://github.com/james58899/hath-rust</p>"},{"location":"Services/hedgedoc/","title":"hedgedoc","text":""},{"location":"Services/hedgedoc/#docker","title":"docker","text":"<ul> <li><code>docker-compose.yml</code></li> </ul> <pre><code>version: '3'\nservices:\n  database:\n    image: postgres:13.4-alpine\n    environment:\n      - POSTGRES_USER=hedgedoc\n      - POSTGRES_PASSWORD=PASSWORD\n      - POSTGRES_DB=hedgedoc\n    volumes:\n      - ./database:/var/lib/postgresql/data\n    restart: always\n  app:\n    # Make sure to use the latest release from https://hedgedoc.org/latest-release\n    image: quay.io/hedgedoc/hedgedoc:1.9.2\n    environment:\n      - CMD_DB_URL=postgres://hedgedoc:PASSWORD@database:5432/hedgedoc\n      - CMD_DOMAIN=&lt;your-hedgedoc-url&gt;\n      - CMD_URL_ADDPORT=false\n\n      # User and Privileges\n      - CMD_ALLOW_ANONYMOUS=false\n      - CMD_GITLAB_BASEURL=https://&lt;your-gitlab-url&gt;\n      - CMD_GITLAB_CLIENTID=*************\n      - CMD_GITLAB_CLIENTSECRET=*************\n\n      # Registeration\n      - CMD_EMAIL=true\n      - CMD_ALLOW_EMAIL_REGISTER=false\n    volumes:\n      - ./uploads:/hedgedoc/public/uploads\n    ports:\n      - \"80:3000\"\n    restart: always\n    depends_on:\n      - database\n</code></pre> <p>Info</p> <p>Need to set the write permission for others to the Upload directory when using the volume mapping in docker</p>"},{"location":"Services/nextcloud/","title":"nextcloud","text":"<p>Info</p> <p>On <code>Ubuntu 20.04</code>, TODO: redis, php-fpm</p> <ul> <li>Install php, apache2, and mariadb</li> </ul> <pre><code>sudo apt update\nsudo apt install apache2 mariadb-server libapache2-mod-php7.4\nsudo apt install php7.4-gd php7.4-mysql php7.4-curl php7.4-mbstring php7.4-intl\nsudo apt install php7.4-gmp php7.4-bcmath php-imagick php7.4-xml php7.4-zip\n</code></pre> <ul> <li>Initialize the DB</li> </ul> <pre><code>sudo mysql -uroot -p &lt;&lt;&lt;EOF\nCREATE USER 'nextcloud'@'localhost' IDENTIFIED BY 'password';\nCREATE DATABASE IF NOT EXISTS nextcloud CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\nGRANT ALL PRIVILEGES ON nextcloud.* TO 'nextcloud'@'localhost';\nFLUSH PRIVILEGES;\nexit\nEOF;\n</code></pre> <ul> <li>Download nextcloud and install</li> </ul> <pre><code>cd /var/www\nwget https://download.nextcloud.com/server/releases/nextcloud-23.0.0.zip \\\n &amp;&amp; unzip nextcloud-23.0.0.zip &amp;&amp; rm nextcloud-23.0.0.zip\n</code></pre> <ul> <li>Add apache2 conf: <code>/etc/apache2/sites-available/nextcloud.conf</code><ul> <li>Remember to change the <code>ServerName</code></li> <li>Run <code>a2ensite nextcloud.conf</code> to enable</li> </ul> </li> </ul> <pre><code>Alias /nextcloud \"/var/www/nextcloud/\"\n\n&lt;VirtualHost *:80&gt;\n  DocumentRoot /var/www/nextcloud/\n  ServerName  your.server.com\n\n  &lt;Directory /var/www/nextcloud/&gt;\n    Require all granted\n    AllowOverride All\n    Options FollowSymLinks MultiViews\n\n    &lt;IfModule mod_dav.c&gt;\n      Dav off\n    &lt;/IfModule&gt;\n  &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre> <ul> <li>Enable some apache2 modules</li> </ul> <pre><code>sudo a2enmod rewrite\nsudo a2enmod headers\nsudo a2enmod env\nsudo a2enmod dir\nsudo a2enmod mime\nsudo a2enmod ssl\nsudo systemctl restart apache2\n</code></pre> <ul> <li> <p>Pretty urls</p> <ul> <li>Add these line in <code>/var/www/nextcloud/config/config.php</code></li> <li>Run <code>sudo -u www-data php /var/www/nextcloud/occ maintenance:update:htaccess</code> to update <pre><code>'overwrite.cli.url' =&gt; 'https://nextcloud.roy4801.tw/',\n'htaccess.RewriteBase' =&gt; '/',\n</code></pre></li> </ul> </li> <li> <p>Chown the permission to <code>www-data</code> <pre><code>chown -R www-data:www-data /var/www/nextcloud/\n</code></pre></p> </li> <li> <p>Install Certificate by <code>certbot</code></p> </li> </ul> <pre><code>sudo apt install python3-certbot-apache\nsudo certbot --apache\n\nsudo systemctl status certbot.timer # Checking the auto renew\n</code></pre> <ul> <li>Add cron job <pre><code>crontab -u www-data -e\n\n*/5  *  *  *  *  php -f /var/www/nextcloud/cron.php\n</code></pre></li> </ul>"},{"location":"Services/nextcloud/#apps","title":"Apps","text":"<p>Warning</p> <p>Remember to enable apps in Settings</p> <ul> <li>Preview Generator <pre><code>cd /var/www/nextcloud/apps\ngit clone https://github.com/nextcloud/previewgenerator.git\n\ncrontab -u www-data -e\n# */10 *  *  *  *  php /var/www/nextcloud/occ preview:pre-generate\n</code></pre></li> </ul>"},{"location":"Services/nextcloud/#heic","title":"HEIC","text":"<p>https://eplt.medium.com/5-minutes-to-install-imagemagick-with-heic-support-on-ubuntu-18-04-digitalocean-fe2d09dcef1</p> <p>https://gist.github.com/ishad0w/788555191c7037e249a439542c53e170</p> <p>https://github.com/nextcloud/photos/issues/498</p> <p>https://github.com/major-mayer/imageconverter/</p>"},{"location":"Services/nextcloud/#references","title":"References","text":"<p>https://docs.nextcloud.com/server/latest/admin_manual/installation/example_ubuntu.html</p> <p>https://docs.nextcloud.com/server/latest/admin_manual/installation/source_installation.html#apache-configuration-label</p> <p>https://www.pigo.idv.tw/archives/832</p> <p>https://stackoverflow.com/questions/55183514/symfony-4-an-exception-occurred-in-driver-could-not-find-driver</p>"},{"location":"Services/nginx-proxy-manager/","title":"Nginx Proxy Manager","text":"<p>Nginx Proxy Manager \u662f\u4e00\u500b\u6613\u65bc\u8a2d\u5b9a\u53cd\u5411\u4ee3\u7406\uff0c\u64c1\u6709 webgui \u4ecb\u9762\u65b9\u4fbf\u8a2d\u5b9a\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u7ba1\u7406 SSL \u8b49\u66f8\u548c\u66ff\u8def\u7531\u52a0\u4e0a https</p>"},{"location":"Services/nginx-proxy-manager/#installation","title":"Installation","text":"<p>\u5b98\u65b9\u6709 docker image \u4e26\u4e14\u6709\u63d0\u4f9b docker-compose.yml \u65b9\u4fbf\u79c1\u4eba\u67b6\u8a2d\u4f7f\u7528</p> <pre><code>version: '3'\nservices:\n  app:\n    image: 'jc21/nginx-proxy-manager:latest'\n    restart: unless-stopped\n    ports:\n      - '80:80'\n      - '81:81'\n      - '443:443'\n    volumes:\n      - ./data:/data\n      - ./letsencrypt:/etc/letsencrypt\n    network_mode: \"host\"\n</code></pre>"},{"location":"Services/nginx-proxy-manager/#usage","title":"Usage","text":"<ol> <li>\u53bb DNS \u8a2d\u5b9a\u60f3\u8981\u7684\u5b50\u57df\u540d\u6307\u5411 NPM \u6240\u57f7\u884c\u7684 IP</li> <li>\u5728 NPM \u65b0\u589e Proxy Hosts \u4e26\u8a2d\u5b9a\u57df\u540d\u4ee5\u53ca IP \u548c port<ul> <li>\u9078\u7528: SSL</li> </ul> </li> <li>Done.</li> </ol> <p>Info</p> <p>\u4f7f\u7528 bridge mode \u53ef\u4ee5\u6307\u5411\u5176\u4ed6 docker continer \u7684 ip</p> <p>Warning</p> <p>\u5982\u679c\u8981\u6307\u5411 localhost \u5247\u9700\u8981\u4f7f\u7528 <code>network_mode: \"host\"</code> \u4f7f\u5f97 docker container \u76f4\u63a5\u4f7f\u7528 host \u7db2\u8def\uff0c\u9810\u8a2d\u662f bridge \u7db2\u8def(\u53ef\u7528 <code>docker network ls</code>)\u67e5\u770b\u3002</p>"},{"location":"Services/nginx-proxy-manager/#references","title":"References","text":"<p>https://nginxproxymanager.com/</p> <p>https://github.com/NginxProxyManager/nginx-proxy-manager</p> <p>https://www.sio.moe/2021/12/18/computer/Docker-Container/Use-Docker-to-install-Nginx-ProxyManager-for-SSL-reverse-proxy/</p>"},{"location":"Services/pve/","title":"Proxmox VE(PVE)","text":""},{"location":"Services/pve/#vm","title":"\u8a2d\u5b9a VM \u81ea\u52d5\u958b\u6a5f","text":"<ul> <li> <p>In CLI</p> <pre><code>qm set $VMID --onboot 1\n</code></pre> </li> </ul>"},{"location":"Services/pve/#share-storage","title":"Share storage","text":"<ol> <li>\u5efa\u7acb NAS VM e.g. TrueNAS \u4e26\u6311\u4e00\u500b\u5354\u8b70\u5206\u4eab e.g. NFS/CIFS</li> <li> <p>Datacenter &gt; Storage &gt; Add</p> </li> <li> <p>\u6b0a\u9650\u8a2d\u5b9a\u8981\u5c0d: \u5982\u679c\u662f TrueNAS &amp; NFS \u8981\u5c07 pool \u7684 perm \u8a2d\u6210\u5efa\u7acb\u7684 user/group \u548c NFS \u7684 mapalluser/mapallgroup \u8a2d\u6210\u525b\u525b\u7684 user/group</p> </li> </ol> <p></p> <p>https://www.youtube.com/watch?v=eZXXa7ujoks</p>"},{"location":"Services/pve/#lxc-nfs-server","title":"\u4f7f\u7528 lxc \u5efa\u7acb NFS Server","text":"<ul> <li>\u9078\u4e00\u500b \u767c\u884c\u7248\u5efa\u7acb lxc </li> <li>\u6839\u64da\u6559\u5b78\u8a2d\u5b9a<ul> <li>https://gist.github.com/rwenz3l/0907385f6a6690c34eb8e36fa73d8405</li> </ul> </li> <li>\u6ce8\u610f\u4e8b\u9805<ul> <li>\u639b\u8f09\u76ee\u9304\u7684\u6b0a\u9650\u8981\u5c0d: <code>chown -R 501:100 /mnt/mp0</code></li> </ul> </li> </ul> <pre><code># \u79fb\u52d5 iso \u5230\u639b\u8f09\u7684\u76ee\u9304\nmv /var/lib/vz/template/iso/* /mnt/pve/iso/template/iso/\n</code></pre>"},{"location":"Services/pve/#others","title":"Others","text":"<ul> <li>xterm.js<ul> <li>https://www.pigo.idv.tw/archives/3261</li> </ul> </li> </ul>"},{"location":"Technical%20Terms/mixin/","title":"Mixin","text":"<p>\u53c8\u7a31 mix-in \uff0c\u5f9e\u5b57\u9762\u4e0a\u89e3\u91cb\u662f\u300c\u6df7\u5165\u300d\u7684\u610f\u601d\u3002 Mixin \u662f\u63d0\u4f9b\u57fa\u790e\u529f\u80fd\u7684 class \uff0c\u4e26\u5728\u9700\u8981\u8a72\u529f\u80fd\u6642\u300c\u6df7\u5165\u300d\u8a72 class (\u50cf\u7d44\u4ef6\u4e00\u6a23\u70ba\u5305\u542b\u4ed6\u7684 class \u63d0\u4f9b\u529f\u80fd)\u3002\u6ce8\u610f Mixin \u8ddf\u591a\u91cd\u7e7c\u627f\u4e0d\u4e00\u6a23\uff0c\u591a\u91cd\u7e7c\u627f\u6703\u6709\u7684\u83f1\u5f62\u7e7c\u627f\u554f\u984c mixin \u4e0d\u6703\u6709\u3002</p>"},{"location":"Technical%20Terms/mixin/#c","title":"C++ \u5be6\u73fe","text":""},{"location":"Testing/katalon/","title":"Katalon","text":""},{"location":"Testing/katalon/#_1","title":"Katalon","text":""},{"location":"network/OpenNMS/","title":"OpenNMS","text":""},{"location":"network/OpenNMS/#installation","title":"Installation","text":""},{"location":"network/OpenNMS/#centos7","title":"CentOS7","text":"<p>https://www.tecmint.com/install-opennms-network-monitoring-in-centos-rhel/</p> <pre><code>yum install java-11-openjdk\nexport JAVA_HOME=/usr/lib/jvm/XXX\nyum -y install https://yum.opennms.org/repofiles/opennms-repo-stable-rhel7.noarch.rpm\nrpm --import https://yum.opennms.org/OPENNMS-GPG-KEY\nyum -y install opennms\n\n# Install PostgresSQL &gt; 10\nsudo /usr/pgsql-10/bin/postgresql-10-setup initdb\nsu - postgres\ncreateuser -P opennms # Enter password\ncreatedb -O opennms opennms\npsql -c \"ALTER USER postgres WITH PASSWORD 'xu0650@yvmp4';\"\nexit\n\nvim /var/lib/pgsql/10/data/pg_hba.conf\n# Editing method to md5\n# host    all             all             127.0.0.1/32            md5\n# host    all             all             ::1/128                 md5\nsystemctl reload postgresql\n\nvim /opt/opennms/etc/opennms-datasources.xml\n# &lt;jdbc-data-source name=\"opennms\"\n#                     database-name=\"opennms\"\n#                     class-name=\"org.postgresql.Driver\"\n#                     url=\"jdbc:postgresql://localhost:5432/opennms\"\n#                     user-name=\"opennms\"\n#                     password=\"your-passwd-here\" /&gt;\n\n# &lt;jdbc-data-source name=\"opennms-admin\"\n#                     database-name=\"template1\"\n#                     class-name=\"org.postgresql.Driver\"\n#                     url=\"jdbc:postgresql://localhost:5432/template1\"\n#                     user-name=\"postgres\"\n#                     password=\"your-db-admin-pass-here\" /&gt;\n\n/opt/opennms/bin/runjava -s\n/opt/opennms/bin/install -dis\nsystemctl start opennms\nsystemctl enable opennms\nsystemctl status \n\nfirewall-cmd --permanent --add-port=8980/tcp\nfirewall-cmd --reload\n</code></pre> <ul> <li>PostgreSQL<ul> <li>https://blog.gtwang.org/linux/centos-linux-install-postgresql-database-tutorial/</li> </ul> </li> </ul> <pre><code>wget https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm\nsudo yum install pgdg-redhat-repo-latest.noarch.rpm epel-release\nsudo yum install postgresql10-server postgresql10-contrib -y\nsudo /usr/pgsql-10/bin/postgresql-10-setup initdb\nsystemctl start postgresql-10\nsystemctl enable postgresql-10\n</code></pre>"},{"location":"network/cheatsheet/","title":"Cheatsheet","text":""},{"location":"network/dhcpd/","title":"isc-dhcp-server","text":"<ul> <li>config: <code>/etc/dhcp/dhcpd.conf</code></li> </ul> <pre><code>sudo systemctl restart isc-dhcp-server\n</code></pre> <ul> <li>Setting up dhcp service</li> </ul> <pre><code>subnet 10.0.0.0 netmask 255.255.255.0 {\n  range 10.0.0.1 10.0.0.253;\n  option routers 10.0.0.254;\n  option domain-name-servers 10.0.0.254, 1.1.1.1, 8.8.8.8;\n}\n\n# static\nhost server2 {\n    hardware ethernet 08:00:27:39:e2:72;                                                                                                                                          \n    fixed-address 192.168.57.104;\n}\n</code></pre> <ul> <li>Group</li> </ul> <pre><code>group {\n    option domain-name-servers 192.168.56.103;\n\n    host server2 {\n        hardware ethernet 08:00:27:39:e2:72;                                                                                                                                          \n        fixed-address 192.168.57.104;\n    }\n\n    host server3 {\n        hardware ethernet 08:00:27:39:e3:56;                                                                                                                                          \n        fixed-address 192.168.57.105;\n    }\n\n    subnet 192.168.57.0 netmask 255.255.255.0 {\n        range 192.168.57.150 192.168.57.160;\n    }\n}\n</code></pre>"},{"location":"network/dhcpd/#references","title":"References","text":"<p>https://magiclen.org/ubuntu-server-dhcp/</p>"},{"location":"network/ip/","title":"Linux ip tools","text":""},{"location":"network/ip/#ip","title":"<code>ip</code>","text":"<ul> <li>Setup the ip addr and gateway</li> </ul> <pre><code>ip addr add &lt;ip&gt;/24 dev ens160\nroute add default gw &lt;gateway&gt;\n</code></pre>"},{"location":"network/ip/#etcnetworkinterfaces","title":"<code>/etc/network/interfaces</code>","text":"<pre><code>vim /etc/network/interfaces\n\nauto lo\niface lo inet loopback\n\nauto ensX\niface ensX inet static\naddress &lt;IP&gt;\nnetmask 255.255.255.0\ngateway &lt;gateway&gt;\n</code></pre>"},{"location":"network/ip/#networkmanager","title":"NetworkManager","text":"<pre><code>nmcli\n</code></pre>"},{"location":"network/ip/#netplan","title":"netplan","text":"<ul> <li>Config file @ <code>/etc/netplan</code></li> </ul> <pre><code>network:\n  ethernets:\n    ens160:\n      addresses:\n      - 140.136.149.93/24\n      gateway4: 140.136.149.254\n      nameservers:\n        addresses:\n        - 1.1.1.1\n        - 8.8.8.8\n\n    ens161:\n      dhcp4: true\n\n  version: 2\n</code></pre> <ul> <li>Test the config</li> </ul> <pre><code>sudo netplan try\n</code></pre> <ul> <li>Apply the config</li> </ul> <pre><code>sudo netplan apply\n</code></pre>"},{"location":"network/ip/#change-dns-server","title":"Change DNS server","text":"<pre><code>sudo vim /etc/resolv.conf\n\n# nameserver 1.1.1.1\n</code></pre>"},{"location":"network/ip/#ref","title":"Ref","text":"<p>https://netplan.io/ https://netplan.io/examples/ Ubuntu Linux 18.04 \u8a2d\u5b9a\u975c\u614b\u7db2\u8def IP \u4f4d\u5740\u6559\u5b78 https://blog.gtwang.org/linux/ubuntu-linux-1804-configure-network-static-ip-address-tutorial/ Ubuntu \u7db2\u8def\u8a2d\u5b9a - \u56fa\u5b9a IP http://note.drx.tw/2008/02/ubuntu-ip.html NetworkManager - ArchWiki https://wiki.archlinux.org/title/NetworkManager Ubuntu NetworkManager \u4f7f\u7528\u8981\u9805 https://www.rocksaying.tw/archives/11777065.html ubuntu \u4f7f\u7528ifupdown \u8fdb\u884c\u9ad8\u7ea7\u7f51\u7edc\u8bbe\u7f6e https://www.cnblogs.com/yasmi/p/4843348.html debian network docs https://www.debian.org/doc/manuals/debian-reference/ch05.zh-tw.html</p>"},{"location":"network/iptables/","title":"iptables","text":""},{"location":"network/iptables/#nat","title":"NAT","text":"<ul> <li><code>eth0</code> wan</li> <li><code>eth1</code> lan</li> </ul> <pre><code>sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\nsudo iptables -A FORWARD -i eth1 -j ACCEPT\nsudo iptables -A FORWARD -o eth1 -j ACCEPT\n</code></pre> <ul> <li>Port forwarding</li> </ul> <pre><code>iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j DNAT \\\n      --to 172.31.0.23:80\n</code></pre>"},{"location":"network/iptables/#usage","title":"Usage","text":"<ul> <li>Detailed info<ul> <li><code>-n</code> numeric output</li> <li><code>-v</code> verbose</li> <li><code>-L</code> list</li> </ul> </li> </ul> <pre><code>sudo iptables -nvL [-t table]\n\n# INPUT FORWARD OUTPUT\nsudo iptables -nvL \n\n# NAT\nsudo iptables -t nat -nVL\n</code></pre> <ul> <li>Flush<ul> <li><code>-t</code> table<ul> <li><code>filter</code>: INPUT, FORWARD, OUTPUT</li> <li><code>nat</code>: PREROUTING, OUTPUT, POSTROUTING</li> <li><code>mangle</code> ...</li> <li><code>raw</code> ...</li> <li><code>security</code> ...</li> </ul> </li> </ul> </li> </ul> <pre><code>sudo iptables -t nat -F\n</code></pre>"},{"location":"network/iptables/#persistent","title":"Persistent","text":"<ul> <li>Write iptable configs in <code>/etc/network/interfaces</code></li> </ul> <pre><code>source /etc/network/interfaces.d/*\n\nauto lo\niface lo inet loopback\n\nallow-hotplug ens18\nauto ens18\niface ens18 inet static\naddress 1.2.3.4/24\ngateway 1.2.3.1\ndns-nameservers 1.1.1.1\n\nauto ens19\niface ens19 inet static\naddress 10.0.0.254\nnetmask 255.255.255.0\npost-up iptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o ens18 -j MASQUERADE\n</code></pre> <ul> <li>Use <code>iptables-persistent</code></li> </ul>"},{"location":"network/iptables/#references","title":"References","text":"<p>https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/4/html/security_guide/s1-firewall-ipt-fwd https://web.mit.edu/rhel-doc/4/RH-DOCS/rhel-sg-zh_tw-4/s1-firewall-ipt-fwd.html https://www.cyberciti.biz/faq/howto-iptables-show-nat-rules/ https://magiclen.org/ubuntu-server-iptables-save-permanently/ https://linuxconfig.org/how-to-make-iptables-rules-persistent-after-reboot-on-linux https://blog.longwin.com.tw/2016/11/debian-linux-iptable-save-restore-auto-start-2016/ http://onlinetest3-7.slhs.tp.edu.tw/webdoc/net-b/net-s3-router.html</p>"},{"location":"network/jargon/","title":"Networking Jargon","text":""},{"location":"network/jargon/#network-devices","title":"Network Devices","text":"<ul> <li>ATU-R (ADSL Tranceiver Unit Remote): \u5c0f\u70cf\u9f9c</li> <li>VTU-R (VDSL Tranceiver Unit Remote): \u96fb\u8a71\u7dda\u8def\u52a0\u88ddVDSL\u6578\u64da\u6a5f(VTU-R)\uff0c\u85c9\u7531\u5206\u983b\u6280\u8853\u4f7f\u7528\u6236\u53ef\u900f\u904e\u540c\u4e00\u689d\u96fb\u8a71\u7dda\u8def\u540c\u6642\u64a5\u63a5\u96fb\u8a71\u4e26\u4eab\u53d7\u9ad8\u901f\u4e0a\u7db2\uff0c\u4e0d\u6703\u4e92\u76f8\u5e72\u64fe\u3002</li> </ul>"},{"location":"network/jargon/#fibre","title":"Fibre","text":"<ul> <li>PON (Passive Optical Network): \u7121\u6e90\u5149\u7db2\u7d61<ul> <li>OLT (Optical Line Terminal): \u5149\u7e96\u7dda\u8def\u7d42\u7aef</li> <li>ONT (Optical Network Terminal): \u5149\u7e96\u7db2\u8def\u7d42\u7aef</li> <li>ONU (Optical Network Unit): \u5149\u7e96\u7db2\u8def\u55ae\u4f4d</li> <li>ODN (Optical Distribution Network): \u5149\u7e96\u5206\u914d\u7db2\u8def</li> </ul> </li> </ul> <pre><code>OLT &lt;--&gt; Splitter &lt;--&gt; ONU/ONT\n</code></pre> <ul> <li>Standards<ul> <li>ITU-T G.98x<ul> <li>APON -&gt; BPON -&gt; GPON -&gt; XGPON</li> </ul> </li> <li>IEEE 802 EFM<ul> <li>EPON -&gt; 10G-EPON</li> </ul> </li> </ul> </li> </ul> Characteristics EPON GPON Speed 1.25Gbps/1.25Gbps 2.48Gbps/1.24Gbps <ul> <li> <p>Reference</p> <ul> <li>https://www.sysage.com.tw/news/technology/187</li> <li>https://www.thinkbroadband.com/guides/fibre-fttc-ftth-broadband-guide</li> <li>https://www.fiber-optic-solutions.com/epon-vs-gpon-a-practical-comparison.html</li> </ul> </li> <li> <p>FTTx</p> </li> </ul> Characteristics FTTCab FTTC FTTB FTTH Position of ONU \u4ea4\u63db\u7bb1 \u8857\u89d2 \u5927\u6a13 \u5bb6 \u63a5\u5165\u4ecb\u8cea \u4e3b\u5e79: \u5149\u7e96\u672b\u7aef: \u9285\u7ddaor\u7121\u7dda \u4e3b\u5e79: \u5149\u7e96\u672b\u7aef: \u9285\u7ddaor\u7121\u7dda \u4e3b\u5e79: \u5149\u7e96\u672b\u7aef: \u9285\u7ddaor\u7121\u7dda \u5168\u7a0b\u5149\u7e96 \u5149\u7bc0\u9ede\u8ddd\u96e2\u7528\u6236 1~2km 1~2km 200m~1km \u5e7e\u7c73\u81f3\u5e7e\u5341\u7c73 Speed 25Mbps/1.8Mbps Best 100Mbps/25Mbps Best 100Mbps/100Mbps &gt; 100Mbps/100Mbps"},{"location":"network/librenms/","title":"LibreNMS","text":""},{"location":"network/librenms/#installation","title":"Installation","text":""},{"location":"network/librenms/#ubuntu-2004","title":"Ubuntu 20.04","text":"<pre><code># Install dependencies\nsudo apt install software-properties-common\nsudo add-apt-repository universe\nsudo apt update\nsudo apt install acl curl composer fping git graphviz imagemagick mariadb-client mariadb-server mtr-tiny nginx-full nmap php7.4-cli php7.4-curl php7.4-fpm php7.4-gd php7.4-gmp php7.4-json php7.4-mbstring php7.4-mysql php7.4-snmp php7.4-xml php7.4-zip rrdtool snmp snmpd whois unzip python3-pip python3-pymysql python3-dotenv python3-redis python3-setuptools python3-systemd\n\n# Add user &amp; password\nsudo useradd librenms -d /opt/librenms -M -r -s \"$(which bash)\"\nsudo passwd librenms\n\n# Download librenms &amp; set permissions\ncd /opt &amp;&amp; git clone https://github.com/librenms/librenms.git\nsudo chown -R librenms:librenms /opt/librenms &amp;&amp; sudo chmod 771 /opt/librenms\nsudo setfacl -d -m g::rwx /opt/librenms/rrd /opt/librenms/logs /opt/librenms/bootstrap/cache/ /opt/librenms/storage/\nsudo setfacl -R -m g::rwx /opt/librenms/rrd /opt/librenms/logs /opt/librenms/bootstrap/cache/ /opt/librenms/storage/\n\n# Install PHP deps\nsu - librenms\n./scripts/composer_wrapper.php install --no-dev\nexit\n\n# Set date.timezone = Asia/Taipei\nsudo vim /etc/php/7.4/fpm/php.ini\nsudo vim /etc/php/7.4/cli/php.ini\ntimedatectl set-timezone Asia/Taipei\n\n# Configure MariaDB\nsudo vim /etc/mysql/mariadb.conf.d/50-server.cnf\n# Add these in [mysqld]\n#   innodb_file_per_table=1\n#   lower_case_table_names=0\nsudo systemctl enable mariadb &amp;&amp; sudo systemctl restart mariadb\nsudo mysql -u root &lt;&lt; EOF\nCREATE DATABASE librenms CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nCREATE USER 'librenms'@'localhost' IDENTIFIED BY 'password';\nGRANT ALL PRIVILEGES ON librenms.* TO 'librenms'@'localhost';\nFLUSH PRIVILEGES;\nexit\nEOF\n\n# Configure PHP-FPM\nsudo cp /etc/php/7.4/fpm/pool.d/www.conf /etc/php/7.4/fpm/pool.d/librenms.conf\nsudo vim /etc/php/7.4/fpm/pool.d/librenms.conf\n# [www] -&gt; [librenms]\n# user = librenms\n# group = librenms\n# listen = /run/php-fpm-librenms.sock\n\n# Configure Web Server\nsudo vim /etc/nginx/conf.d/librenms.conf\n# \nserver {\n listen      80;\n server_name librenms.example.com; # REMEMBER TO CHANGE THIS\n root        /opt/librenms/html;\n index       index.php;\n\n charset utf-8;\n gzip on;\n gzip_types text/css application/javascript text/javascript application/x-javascript image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon;\n location / {\n  try_files $uri $uri/ /index.php?$query_string;\n }\n location ~ [^/]\\.php(/|$) {\n  fastcgi_pass unix:/run/php-fpm-librenms.sock;\n  fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n  include fastcgi.conf;\n }\n location ~ /\\.(?!well-known).* {\n  deny all;\n }\n}\n#\nsudo rm /etc/nginx/sites-enabled/default\nsudo systemctl restart nginx &amp;&amp; sudo systemctl restart php7.4-fpm\n\n# Enable command completion\nsudo ln -s /opt/librenms/lnms /usr/bin/lnms\nsudo cp /opt/librenms/misc/lnms-completion.bash /etc/bash_completion.d/\n\n# Install snmpd\nsudo cp /opt/librenms/snmpd.conf.example /etc/snmp/snmpd.conf\nsudo vim /etc/snmp/snmpd.conf # Edit RANDOMSTRINGGOESHERE -&gt; community string\nsudo curl -o /usr/bin/distro https://raw.githubusercontent.com/librenms/librenms-agent/master/snmp/distro\nsudo chmod +x /usr/bin/distro\nsudo systemctl enable snmpd &amp;&amp; sudo systemctl restart snmpd\n\n# Enable cron job\nsudo cp /opt/librenms/librenms.nonroot.cron /etc/cron.d/librenms\n\n# logrotate\nsudo cp /opt/librenms/misc/librenms.logrotate /etc/logrotate.d/librenms\n# Complete Go\n</code></pre> <ul> <li>Debug</li> </ul> <pre><code>sudo su - librenms\n./validate.php\n</code></pre>"},{"location":"network/librenms/#nagios-plugins-services","title":"Nagios Plugins - Services","text":"<pre><code>sudo apt install monitoring-plugins\nchmod +x /usr/lib/nagios/plugins/*\n</code></pre> <ul> <li>Add the following line in <code>/etc/cron.d/librenms</code></li> </ul> <pre><code>*/5 * * * * librenms /opt/librenms/services-wrapper.py 1\n</code></pre> <ul> <li>Add these lines in the <code>config.php</code></li> </ul> <pre><code>$config['discover_services'] = true;\n$config['discover_services_templates'] = true;\n$config['show_services'] = 1;\n$config['nagios_plugins'] = \"/usr/lib/nagios/plugins\";\n</code></pre> <ul> <li>Other plugins<ul> <li>The Monitoring Plugins Project</li> <li>pkg-nagios-plugins-contrib</li> <li>https://github.com/drewkerrigan/nagios-http-json</li> </ul> </li> </ul>"},{"location":"network/librenms/#references","title":"References","text":"<p>https://docs.librenms.org/ https://docs.librenms.org/Installation/Install-LibreNMS/</p>"},{"location":"network/mikrotik/","title":"Routeros","text":""},{"location":"network/mikrotik/#allow-remote-winbox-connection","title":"Allow remote winbox connection","text":"<pre><code>/ip firewall filter add action=accept chain=input disabled=no dst-port=8291 protocol=tcp\n</code></pre>"},{"location":"network/mikrotik/#enabling-https-on-mikrotik","title":"Enabling HTTPS on MikroTik","text":"<ul> <li>Create certificates</li> </ul> <pre><code>/certificate\nadd name=root-cert common-name=MyRouter days-valid=3650 key-usage=key-cert-sign,crl-sign\nsign root-cert\nadd name=https-cert common-name=MyRouter days-valid=3650\nsign ca=root-cert https-cert\n</code></pre> <ul> <li>Enable <code>www-ssl</code> service and disable <code>www</code> service</li> </ul> <pre><code>/ip service\nset www-ssl certificate=https-cert disabled=no\nset www disabled=yes\n</code></pre>"},{"location":"network/mikrotik/#dns-server","title":"DNS Server","text":"<ul> <li>Redirect all LAN DNS requests to the router</li> </ul> <pre><code>ip firewall nat add chain=dstnat action=redirect to-ports=53 protocol=udp dst-port=53 to-address=192.168.88.1 comment=\"DIRECT ALL DNS REQUESTS TO MIKROTIK INTERNAL DNS SERVER.\"\n</code></pre> <ul> <li>Forbid all Remove DNS request</li> </ul> <pre><code>ip firewall filter.\n\nadd action=drop chain=input dst-port=53 protocol=udp\nadd action=drop chain=input dst-port=53 protocol=tcp\n</code></pre> <ul> <li>Set static DNS record</li> </ul>"},{"location":"network/mikrotik/#setting-doh","title":"Setting DoH","text":"<ul> <li> <p>Download Root CAs (In ROS terminal) <pre><code>/tool fetch url=https://curl.se/ca/cacert.pem\n/certificate import file-name=cacert.pem passphrase=\"\"\n</code></pre></p> </li> <li> <p>Remove existing DNS setting</p> </li> <li>Add a static DNS entry for DoH hostname<ul> <li>e.g. <code>cloudflare-dns.com -&gt; 1.1.1.1</code></li> </ul> </li> <li>Add <code>use DoH Server</code> and check <code>Verify DoH Certificate</code><ul> <li>e.g. <code>https://cloudflare-dns.com/dns-query</code></li> </ul> </li> <li> <p>Checking DNS status: https://1.1.1.1/help</p> </li> <li> <p>References</p> <ul> <li>MikroTik Tutorial: How to enable DNS over HTTPS (DoH): https://jcutrer.com/howto/networking/mikrotik/mikrotik-dns-over-https</li> <li>[\u6559\u5b78] Mikrotik \u5982\u4f55\u4f7f\u7528 DNS over HTTPS ( DoH ): https://mahirmax.blogspot.com/2020/08/mikrotik-dns-over-https-doh.html?m=0</li> <li>HTTPS \u4ec0\u9ebc\u662f\u6839\u6191\u8b49 root certificate: https://matthung0807.blogspot.com/2021/03/https-what-is-root-certificate.html</li> </ul> </li> </ul>"},{"location":"network/mikrotik/#script-scheduler","title":"Script &amp; scheduler","text":"<pre><code>/system script add name=&lt;script_name&gt; source=[/file get &lt;file_name&gt; contents]\n</code></pre> <ul> <li>Scheduler: System &gt; Scheduler<ul> <li>Use the script name in On Event section</li> </ul> </li> </ul>"},{"location":"network/wireguard/","title":"Wireguard","text":""},{"location":"network/wireguard/#install","title":"Install","text":"<ul> <li>Ubuntu 16.04 <pre><code># printf \"\\n\" | add-apt-repository ppa:wireguard/wireguard\n# apt update &amp;&amp; apt instll wireguard -y\n</code></pre></li> <li> <p>Activate wireguard <pre><code># modprobe wireguard\n# lsmod | grep wireguard # check whether the module is loaded\n</code></pre></p> </li> <li> <p>macos <pre><code>$ brew install wireguard\n</code></pre></p> </li> </ul>"},{"location":"network/wireguard/#setting-up","title":"Setting up","text":""},{"location":"network/wireguard/#server","title":"Server","text":"<ul> <li> <p>Generate keys <pre><code>$ cd /etc/wireguard\n$ umask 077\n$ wg genkey | sudo tee privatekey | wg pubkey | sudo tee publickey\n</code></pre></p> </li> <li> <p>Configureation (<code>/etc/wireguard/wg0.conf</code>) <pre><code>[Interface]\nPrivateKey = &lt;your server private key here&gt;\nAddress = 10.10.0.1/24\n#Address = fd86:ea04:1111::1/64\nSaveConfig = true\nPostUp = iptables -A FORWARD -i wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o ens3 -j MASQUERADE; ip6tables -A FORWARD -i wg0 -j ACCEPT; ip6tables -t nat -A POSTROUTING -o ens3 -j MASQUERADE\nPostDown = iptables -D FORWARD -i wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o ens3 -j MASQUERADE; ip6tables -D FORWARD -i wg0 -j ACCEPT; ip6tables -t nat -D POSTROUTING -o ens3 -j MASQUERADE\nListenPort = 51820\nDNS = 1.1.1.1\nMTU = 1420\n</code></pre></p> </li> <li> <p>iptables <pre><code>iptables -A FORWARD -i wg0 -j ACCEPT &amp;&amp; iptables -A FORWARD -o wg0 -j ACCEPT &amp;&amp; iptables -t nat -A POSTROUTING -o enp1s0 -j MASQUERADE\niptables -D FORWARD -i wg0 -j ACCEPT &amp;&amp; iptables -D FORWARD -o wg0 -j ACCEPT &amp;&amp; iptables -t nat -D POSTROUTING -o enp1s0 -j MASQUERADE\n</code></pre></p> </li> </ul> <p>Info</p> <p>The network interface must set to the one which connects to the internet Use <code>ip addr</code> to check.</p> <ul> <li>peers(client) @ <code>/etc/wireguard/wg0.conf</code> <pre><code>[Peers]\nPublicKey = &lt;Ur client pub key here&gt;\nAllowedIPs = 10.10.0.2/32\n</code></pre></li> </ul> <p>or use <code>wg set</code> <pre><code>wg set wg0 peer &lt;client-public-key&gt; allowed-ips 10.10.0.2/32,fd86:ea04:1111::2/128\n</code></pre></p> <ul> <li> <p>Turn up <pre><code>$ wg-quick up wg0    # Turn up\n$ wg-quick down wg0  # Turn down\n</code></pre></p> </li> <li> <p>Check status <pre><code>$ wg\n</code></pre></p> </li> </ul>"},{"location":"network/wireguard/#turn-ipv4-forward","title":"Turn ipv4 forward","text":"<ul> <li> <p>Temporary <pre><code># echo 1 &gt; /proc/sys/net/ipv4/ip_forward\n# or\n# sysctl -w net.ipv4.ip_forward=1\n</code></pre></p> </li> <li> <p>You need to edit <code>/etc/sysctl.conf</code></p> <ul> <li>Change <code>net.ipv4.ip_forward</code> from <code>0</code> to <code>1</code> <pre><code># sed -i '/net.ipv4.ip_forward/ s/\\(.*= \\).*/\\11/' /etc/sysctl.conf\n</code></pre></li> </ul> </li> </ul>"},{"location":"network/wireguard/#auto-start-on-linux","title":"Auto start on linux","text":"<ul> <li>Start</li> </ul> <pre><code>sudo systemctl enable wg-quick@wg0.service\nsudo systemctl daemon-reload\nsudo systemctl start wg-quick@wg0\n</code></pre> <ul> <li>Stop</li> </ul> <pre><code>sudo systemctl stop wg-quick@wg0\nsudo systemctl disable wg-quick@wg0.service\nsudo rm -i /etc/systemd/system/wg-quick@wg0*\nsudo systemctl daemon-reload\nsudo systemctl reset-failed\n</code></pre> <p>Warning</p> <p>Q: <code>/usr/bin/wg-quick: line 31: resolvconf: command not found</code> A: <code>ln -s /usr/bin/resolvectl /usr/local/bin/resolvconf</code></p>"},{"location":"network/wireguard/#client","title":"Client","text":""},{"location":"network/wireguard/#linux","title":"Linux","text":"<pre><code>[Interface]\nAddress = 10.10.0.2/32\nAddress = fd86:ea04:1111::2/128\nSaveConfig = true\nPrivateKey = &lt;your client private key here&gt;\nDNS = 1.1.1.1\n\n[Peer]\nPublicKey = &lt;your server public key here&gt;\nEndpoint = &lt;your server public ip&gt;:51820\nAllowedIPs = 0.0.0.0/0, ::/0\n</code></pre> <p>perm : <code>$ chmod 600 /etc/wireguard/wg0.conf</code></p>"},{"location":"network/wireguard/#macos","title":"macos","text":""},{"location":"network/wireguard/#wireguard-ui","title":"wireguard-ui","text":"<p>A wireguard web interface: https://github.com/ngoduykhanh/wireguard-ui</p> <pre><code>git clone https://github.com/ngoduykhanh/wireguard-ui.git\ncd wireguard-ui &amp;&amp; docker-compose up\n</code></pre>"},{"location":"tools/docker/","title":"docker","text":""},{"location":"tools/docker/#images","title":"Images","text":"<pre><code># remove dangling images\ndocker rmi -f $(docker images -f dangling=true -q)\n# remove dangling volumes\ndocker volume rm $(docker volume ls -qf dangling=true)\n</code></pre>"},{"location":"tools/docker/#installation","title":"Installation","text":"<ul> <li>Script</li> </ul> <pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsh get-docker.sh\n</code></pre>"},{"location":"tools/docker/#ubuntu","title":"Ubuntu","text":"<pre><code>sudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release -y\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\necho \\\n  \"deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\nsudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io\n</code></pre>"},{"location":"tools/docker/#centos","title":"CentOS","text":"<pre><code>sudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n</code></pre>"},{"location":"tools/docker/#docker-compose","title":"docker-compose","text":"<pre><code># Need jq\nsudo curl -L \"https://github.com/docker/compose/releases/download/$(curl https://api.github.com/repos/docker/compose/releases | jq -r '.[0].name')/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\nsudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n</code></pre>"},{"location":"tools/docker/#get-container-ip","title":"Get container IP","text":"<pre><code>docker inspect -f '{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}' IP\n</code></pre>"},{"location":"tools/ffmpeg/","title":"ffmpeg","text":"<ul> <li>To mp3</li> </ul> <pre><code>ffmpeg -i \"${FILE}\" -vn -c:a libmp3lame -y \"${FILE%.mkv}to.mp3\n</code></pre> <ul> <li>Extract frames</li> </ul> <pre><code>ffmpeg -i file.mpg -r 1/1 $filename%03d.bmp\n</code></pre>"},{"location":"tools/ffmpeg/#gif","title":"GIF","text":"<pre><code>ffmpeg -i IN.mp4 -filter_complex \"[0:v] palettegen\" palette.png\nffmpeg -i IN.mp4 -i palette.png -filter_complex \"[0:v][1:v] paletteuse\" OUT.gif\n</code></pre> <p>http://blog.pkh.me/p/21-high-quality-gif-with-ffmpeg.html https://engineering.giphy.com/how-to-make-gifs-with-ffmpeg/ https://ffmpeg.org/ffmpeg-filters.html#palettegen-1</p>"},{"location":"tools/ffmpeg/#refs","title":"Refs","text":"<p>https://ffmpeg.org/</p> <p>https://stackoverflow.com/questions/10957412/fastest-way-to-extract-frames-using-ffmpeg</p>"},{"location":"tools/fish_shell/","title":"fish shell","text":""},{"location":"tools/fish_shell/#installation","title":"Installation","text":"<pre><code># Install fish\nsudo apt-add-repository ppa:fish-shell/release-3\nsudo apt-get update\nsudo apt-get install fish\nchsh -s &lt;whereis fish&gt;\n\ncurl -L https://get.oh-my.fish | fish\ncurl -sL https://git.io/fisher | source &amp;&amp; fisher install jorgebucaran/fisher\n\nfisher install oh-my-fish/theme-agnoster\n</code></pre>"},{"location":"tools/fs/","title":"Disk related","text":"<ul> <li> <p><code>diskutil</code></p> <ul> <li><code>diskutil list</code> List</li> </ul> </li> <li> <p>Mount ntfs on macos</p> <ul> <li><code>sudo ntfs-3g /dev/disk3s1 /Volumes/NTFS -olocal -oallow_other -o auto_xattr</code></li> <li>ezntfs</li> <li>mounty</li> </ul> </li> </ul>"},{"location":"tools/fs/#hard-link-symbolic-link","title":"Hard link &amp; Symbolic link","text":"<ul> <li> <p>Hard Link</p> <ul> <li>\u4ee5\u76f8\u540c\u7684i-node\u6307\u5411\u76f8\u540c\u7684\u6a94\u6848\u3002</li> <li>\u4e3b\u8981\u7528\u65bc\u5099\u4efd\u3002</li> <li>\u53ea\u80fd\u5728\u540c\u4e00\u500b\u78c1\u5340 (Partition)\u4e2d\u5efa\u7acb\uff0c\u4e0d\u80fd\u8de8 Filesystem</li> <li>\u53ea\u80fd\u9023\u7d50\u6a94\u6848\uff0c\u4e0d\u80fd\u9023\u7d50\u76ee\u9304\u3002</li> <li><code>ln &lt;src&gt; &lt;dst&gt;</code></li> </ul> </li> <li> <p>Symbolic Link</p> <ul> <li>\u4ee5\u7d55\u5c0d\u8def\u5f91\u6216\u76f8\u5c0d\u8def\u5f91\u6307\u5411\u539f\u59cb\u7684\u6a94\u6848\u3002</li> <li>\u4e3b\u8981\u7528\u65bc\u7c21\u5316\u8def\u5f91\u3002</li> <li><code>ln -s &lt;src&gt; &lt;dst&gt;</code></li> </ul> </li> </ul>"},{"location":"tools/fs/#ubuntu-expand-disk","title":"Ubuntu expand disk","text":"<p>https://gist.github.com/gjrdiesel/4e93d8743b71babb58dcba4ee049247c https://askubuntu.com/questions/116351/increase-partition-size-on-which-ubuntu-is-installed</p>"},{"location":"tools/fs/#references","title":"References","text":"<p>Hard Link\u8207Symbolic Link\u7684\u6bd4\u8f03 https://claire-chang.com/2019/10/03/hard-link%E8%88%87symbolic-link%E7%9A%84%E6%AF%94%E8%BC%83/</p> <p>\u786c\u9023\u7d50\uff1f\u8edf\u9023\u7d50\uff1f\u6a94\u6848\u5206\u8eab\u4e0d\u4e4f\u8853 https://www.techbang.com/posts/12538-hard-links-soft-links-archives-does-not-fashu</p>"},{"location":"tools/git/","title":"git","text":""},{"location":"tools/git/#remove-from-git-but-keep-local","title":"Remove from git but keep local","text":"<pre><code># Added but not commited\ngit reset\n\n# Commited\ngit rm --cached {someFile}\ngit rm --cached -r {someDir}\n</code></pre>"},{"location":"tools/git/#edit-a-commit","title":"Edit a commit","text":"<ul> <li>autosquash</li> </ul> <pre><code>git commit -m \"fixup! &lt;msg/hash&gt;\"\ngit rebase &lt;hash&gt;~N -i --autosquash\n</code></pre>"},{"location":"tools/git/#reset","title":"Reset","text":"<ul> <li>Hard<ul> <li>\u76f4\u63a5\u56de\u5230\u8a72 commit</li> </ul> </li> </ul> <pre><code>git reset --hard &lt;HEAD/hash&gt;~N # \u56de\u5230\u524d N \u500b\n</code></pre> <ul> <li>Soft</li> </ul> <pre><code>git reset --soft &lt;hash&gt;\n</code></pre>"},{"location":"tools/git/#quick-fix-the-last-commit","title":"Quick fix the last commit","text":"<pre><code>git commit --amend --no-edit\n</code></pre>"},{"location":"tools/git/#submodule","title":"submodule","text":"<ul> <li>Add submodule</li> </ul> <pre><code>git submodule add\n# e.g.\ngit submodule add git://github.com/majutsushi/tagbar.git .vim/bundle/tagbar\n</code></pre> <ul> <li>Update submodule</li> </ul> <pre><code># `git pull` in each git repo\n# or pull all submodules\ngit submodule foreach --recursive git pull origin master\n</code></pre> <ul> <li>Delete a submodule</li> </ul> <pre><code>git rm --cached /path/to/files\nrm -rf /path/to/files\n</code></pre> <ul> <li>Delete the corresponding lines in <code>.gitmodules</code></li> </ul> <pre><code>[submodule \"/path/to/files\"]\n    path = /path/to/files\n    url = xxx\n</code></pre> <ul> <li>Clone the repo with submodules</li> </ul> <pre><code>git clone --recursive &lt;url to the repo&gt;\n</code></pre> <ul> <li>Clone the reop first and then clone the submodules</li> </ul> <pre><code>git submodule update --init --recursive\n</code></pre>"},{"location":"tools/git/#pull","title":"pull","text":"<ul> <li>rebase <pre><code>git pull --rebase\ngit rebase --continue\n</code></pre></li> </ul>"},{"location":"tools/git/#cherry-pick","title":"cherry-pick","text":"<p>Pick a specific commit to HEAD</p> <pre><code>git cherry-pick &lt;SHA1&gt; &lt;SHA2&gt; ...\n</code></pre> <ul> <li> <p>Conflict?</p> <ul> <li><code>git cherry-pick --continue</code></li> </ul> </li> <li> <p>Edit commit message? Use <code>-e</code></p> <ul> <li><code>git cherry-pick &lt;sha&gt; -e</code></li> </ul> </li> </ul>"},{"location":"tools/git/#revert","title":"Revert","text":"<p>\u5df2\u7d93\u88ab\u63a8\u4e0a\u53bb\u7684 commit \u767c\u73fe\u932f\u8aa4\uff0c\u53ef\u4ee5\u7528 revert \u4f86\u4fee\u5fa9</p> <pre><code>git revert &lt;Hash&gt;\n</code></pre>"},{"location":"tools/git/#reflog-","title":"reflog - \u79fb\u52d5\u7d00\u9304","text":"<ul> <li> <p>HEAD log     <pre><code>git reflog\n</code></pre></p> </li> <li> <p>branch log     <pre><code>git reflog &lt;branch&gt;\n</code></pre></p> </li> </ul>"},{"location":"tools/git/#search-commit","title":"Search commit","text":"<pre><code>git log --grep \"&lt;pattern&gt;\"\n</code></pre>"},{"location":"tools/git/#github-two-account","title":"github two account","text":"<pre><code>ssh-keygen -t rsa -C \"your-email-address\"\n# Remember to enter filename id_rsaXXXX\n</code></pre> <ul> <li> <p>Add to <code>~/.ssh/config</code> <pre><code>Host github-COMPANY\n  HostName github.com\n  User git\n  IdentityFile ~/.ssh/id_rsa_COMPANY\n</code></pre></p> </li> <li> <p>Remember to add your ssh key to github &amp; use different user.name &amp; user.email in repos</p> </li> </ul>"},{"location":"tools/git/#other","title":"Other","text":"<ul> <li>Clean</li> </ul> <pre><code>git config --local credential.helper \"\"\ngit push origin master\n</code></pre> <ul> <li>Set default pull rebase</li> </ul> <pre><code>git config --global pull.rebase true\n</code></pre> <ul> <li>Remove submodules<ul> <li>Delete lines in <code>.gitmodules</code> and <code>git add .gitmodules</code></li> <li>Execute <code>rm ./.git/config</code></li> <li><code>git rm --cached path_to_submodule</code></li> <li><code>rm -rf .git/modules/path_to_submodule</code></li> <li>Commit</li> </ul> </li> </ul> <pre><code># Remove the submodule entry from .git/config\ngit submodule deinit -f path/to/submodule\n\n# Remove the submodule directory from the superproject's .git/modules directory\nrm -rf .git/modules/path/to/submodule\n\n# Remove the entry in .gitmodules and remove the submodule directory located at path/to/submodule\ngit rm -f path/to/submodule\n</code></pre> <ul> <li>Merge two different repos</li> </ul> <pre><code># clone a &amp; b\ncd a\ngit filter-repo --to-subdirectory-filter a\ncd b\ngit remote add a ../a\ngit fetch a\ngit merge --allow-unrelated-histories a/master\ngit remote remove a\n</code></pre> <ul> <li>Checkout to tag</li> </ul> <pre><code>git tag -l\ngit checkout &lt;tag&gt;\n</code></pre>"},{"location":"tools/git/#references","title":"References","text":"<p>Git Submodule \u7528\u6cd5\u7b46\u8a18 https://blog.chh.tw/posts/git-submodule/</p> <p>https://stackoverflow.com/questions/1260748/how-do-i-remove-a-submodule/36593218#36593218</p>"},{"location":"tools/mkdocs/","title":"MkDocs","text":"<p>https://hackmd.io/pNxCxfHMTYm-GrJ1oc4ITA?view</p>"},{"location":"tools/mkdocs/#_1","title":"\u57fa\u672c\u4ecb\u7d39","text":"<p>\u6839\u64da\u5b98\u7db2\u4ecb\u7d39\uff0cMkDocs\u662f\u500b\u7528\u65bcproject documentation\u7684static site generator\uff0c\u4e26\u4e14\u5f37\u8abf\u5feb\u901f\u3001\u7c21\u55ae\uff0c\u6587\u4ef6\u4f7f\u7528<code>markdown</code>\u64b0\u5beb\uff0c\u8a2d\u5b9a\u6a94\u4f7f\u7528<code>YAML</code>\uff0c\u4e26\u4e14\u53ef\u4ee5\u4f7f\u7528\u4e3b\u984c\u7b49\u9ad8\u5ea6\u81ea\u8a02\u5316\u3002</p> <ul> <li>\u4f7f\u7528 Material for MkDocs<ul> <li><code>pip install mkdocs-material</code></li> </ul> </li> </ul> <pre><code>mkdocs --version    # Check the path\ncd ..../theme       # the ... replace with the path see above\ngit clone https://github.com/squidfunk/mkdocs-material.git\nln -s mkdocs-material/material material\n</code></pre>"},{"location":"tools/mkdocs/#_2","title":"\u5b89\u88dd","text":"<ul> <li>\u7528package manager\u5b89\u88dd\uff0c\u6216\u662f\u81ea\u5df2build</li> </ul> <pre><code>$ brew install mkdocs\n</code></pre> <p>Danger</p> <p>\u7528<code>pip</code>\u5b89\u88dd\u5373\u53ef\uff0c\u82e5\u4f7f\u7528package manager\u5b89\u88dd\u5247\u5f8c\u7e8c\u6703\u9047\u5230\u76ee\u9304\u554f\u984c  https://github.com/squidfunk/mkdocs-material/issues/52</p> <p>https://www.mkdocs.org/#installation</p>"},{"location":"tools/mkdocs/#_3","title":"\u57fa\u672c\u4f7f\u7528","text":"<ul> <li>\u65b0\u5efa\u5c08\u6848</li> </ul> <pre><code>$ mkdocs new &lt;project name&gt;\nINFO    -  Creating project directory: docs\nINFO    -  Writing config file: docs/mkdocs.yml\nINFO    -  Writing initial docs: docs/docs/index.md\n</code></pre> <p><code>mkdocs</code>\u6703\u7522\u751f\u4f60\u6307\u5b9a\u7684\u76ee\u9304\u53ca\u5e95\u4e0b\u7684\u6a94\u6848\uff0c\u800c\u4e4b\u5f8c\u8981\u5f80\u4f60\u7684docs\u52a0\u6771\u897f\u5c31\u5f80\u9019\u500b\u76ee\u9304\u65b0\u5efa\u6a94\u6848\u3002</p> <ul> <li>\u6e2c\u8a66</li> </ul> <pre><code>$ mkdocs serve\nINFO    -  Building documentation...\nINFO    -  Cleaning site directory\n[I 190915 00:07:57 server:292] Serving on http://127.0.0.1:8000\n</code></pre> <p>\u8a2a\u554fhttp://127.0.0.1:8000\u770b\u5230\u4ee5\u4e0b\u756b\u9762\u4fbf\u5b8c\u6210\u65b0<code>mkdocs</code>\u5c08\u6848\u5efa\u7acb</p> <p></p>"},{"location":"tools/mkdocs/#_4","title":"\u90e8\u7f72","text":"<ul> <li>\u5728<code>mkdocs.yml</code>\u52a0\u5165<code>repo_name</code>\u8ddf<code>repo_url</code></li> </ul> <pre><code>repo_name: roy4801/docs.roy4801.tw\nrepo_url: https://github.com/roy4801/docs.roy4801.tw\n</code></pre> <ul> <li>\u57f7\u884c<code>mkdocs gh-deploy</code><ul> <li>site\u6703deploy\u5728<code>gh-page</code>\u5206\u652f</li> </ul> </li> </ul> <p>Github page: \u5728<code>docs/</code>\u5e95\u4e0b\u52a0\u5165<code>CNAME</code>\u53ef\u4ee5\u81ea\u8a02domain</p>"},{"location":"tools/mkdocs/#github-action","title":"\u4f7f\u7528 github-action \u81ea\u52d5\u90e8\u7f72","text":"<p>\u4f7f\u7528 mhausenblas/mkdocs-deploy-gh-pages \u5075\u6e2c push \u6642\u81ea\u52d5\u90e8\u7f72\u5230 <code>gh-page</code> \u5206\u652f</p> <p>\u65b0\u589e\u6a94\u6848 <code>.github/workflows/deploy.yml</code> \u5982\u4e0b\uff0c\u5176\u4e2d\u7684 <code>GITHUB_TOKEN</code> \u6703\u81ea\u52d5\u7522\u751f <pre><code>name: Publish docs via GitHub Pages\non:\n  push:\n    branches:\n      - master\n\njobs:\n  build:\n    name: Deploy docs\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout main\n        uses: actions/checkout@v2\n\n      - name: Deploy docs\n        uses: mhausenblas/mkdocs-deploy-gh-pages@master\n        # Or use mhausenblas/mkdocs-deploy-gh-pages@nomaterial to build without the mkdocs-material theme\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          CUSTOM_DOMAIN: docs.roy4801.tw\n          CONFIG_FILE: mkdocs.yml\n          EXTRA_PACKAGES: build-base\n          # GITHUB_DOMAIN: github.myenterprise.com\n          REQUIREMENTS: requirements.txt\n</code></pre></p>"},{"location":"tools/mkdocs/#_5","title":"\u53c3\u8003","text":"<ul> <li> <p>MkDocsPlus</p> </li> <li> <p>https://github.com/ctf-wiki/ctf-wiki/blob/master/mkdocs-zh.yml</p> </li> <li> <p>https://squidfunk.github.io/mkdocs-material/extensions/pymdown/</p> </li> </ul>"},{"location":"tools/rclone/","title":"rclone","text":"<ul> <li>list</li> </ul> <pre><code># List all\nrclone ls gdrive:\n\n# List directories\nrclone lsd gdrive:\n</code></pre> <ul> <li>size</li> </ul> <pre><code>rclone size gdrive:\n</code></pre> <ul> <li>Sync<ul> <li><code>--fast-list</code>: Store list in mem</li> <li><code>--transfers=N</code>: Transfer N files at once</li> </ul> </li> </ul> <pre><code>rclone sync -P --fast-list --transfers=32 gdrive:/ .\n</code></pre> <ul> <li> <p>Show google drive shared with me: <code>--drive-shared-with-me</code></p> </li> <li> <p>Limit speed: <code>--bwlimit 8M</code></p> </li> <li> <p>Cheatsheet <pre><code>rclone copy -P --fast-list --bwlimit 8M --drive-shared-with-me drive:/A ./A\n</code></pre></p> </li> </ul>"},{"location":"tools/rclone/#reference","title":"Reference","text":"<p>https://www.dmuth.org/back-up-your-google-drive-files-with-rclone/</p>"},{"location":"tools/rsync/","title":"rsync","text":"<pre><code># copy\nrsync -aP\n</code></pre> <pre><code> -r, --recursive             recurse into directories\n -v, --verbose               increase verbosity\n -z, --compress              compress file data during the transfer\n -n, --dry-run               perform a trial run with no changes made\n\n -p, --perms                 preserve permissions\n -E, --executability         preserve executability\n     --chmod=CHMOD           affect file and/or directory permissions\n</code></pre>"},{"location":"tools/rsync/#ref","title":"Ref","text":"<p>How to tell rsync do not check permissions https://serverfault.com/questions/495527/how-to-tell-rsync-do-not-check-permissions</p>"},{"location":"tools/ventoy/","title":"ventoy","text":"<p>https://izaka.tw/ventoy-bootable-usb-solution-user-guide/</p> <p>https://izaka.tw/ventoy-theme-apply-guide/</p>"},{"location":"tools/vim/","title":"vim","text":""},{"location":"tools/vim/#repoen-as-root","title":"Repoen as root","text":"<pre><code>:w !sudo tee %\n</code></pre> <p>Add to <code>.vimrc</code></p> <pre><code>\" Allow saving of files as sudo when I forgot to start vim using sudo.\ncmap w!! w !sudo tee &gt; /dev/null %\n</code></pre> <p>https://stackoverflow.com/questions/2600783/how-does-the-vim-write-with-sudo-trick-work</p>"},{"location":"tools/vim/#search-and-replace","title":"Search and replace","text":"<ul> <li>regex (e.g. <code>foo</code> -&gt; <code>bar</code>)</li> </ul> <pre><code>s/foo/bar/g\n</code></pre> <ul> <li>From line to line (e.g. <code>foo</code> -&gt; <code>bar</code>)</li> </ul> <pre><code>:1,10s/foo/bar/g\n</code></pre> <p>https://stackoverflow.com/questions/17319557/search-and-replace-in-vim-in-specific-lines</p>"},{"location":"tools/vmware/","title":"vmware","text":""},{"location":"tools/vmware/#workstation","title":"workstation","text":"<ul> <li>Mount share folder in Linux guest</li> </ul> <pre><code>mount -t vmhgfs .host:/foo/bar /var/lib/bar\n</code></pre> <ul> <li><code>/etc/fstab</code></li> </ul> <pre><code>.host:/XXX /home/roy4801/XXX fuse.vmhgfs-fuse allow_other,uid=1000,gid=1000   0       0\n</code></pre>"},{"location":"tools/vmware/#references","title":"References","text":"<p>https://docs.vmware.com/en/VMware-Workstation-Pro/16.0/com.vmware.ws.using.doc/GUID-AB5C80FE-9B8A-4899-8186-3DB8201B1758.html</p>"},{"location":"tools/Latex/miktex/","title":"Miktex","text":""},{"location":"tools/Latex/miktex/#install","title":"Install","text":"<p>https://miktex.org/download</p>"},{"location":"tools/Latex/miktex/#problems","title":"Problems","text":"<pre><code>updmap.exe --admin\nupdmap.exe --force\n</code></pre>"}]}